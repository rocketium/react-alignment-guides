{"version":3,"file":"index.es.js","sources":["../node_modules/lodash.throttle/index.js","../src/utils/helpers.js","../src/utils/constants.js","../node_modules/style-inject/dist/style-inject.es.js","../src/Box.js","../src/AlignmentGuides.js","../src/index.js"],"sourcesContent":["/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the `TypeError` message for \"Functions\" methods. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/** Used to match leading and trailing whitespace. */\nvar reTrim = /^\\s+|\\s+$/g;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        result = wait - timeSinceLastCall;\n\n    return maxing ? nativeMin(result, maxWait - timeSinceLastInvoke) : result;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\n/**\n * Creates a throttled function that only invokes `func` at most once per\n * every `wait` milliseconds. The throttled function comes with a `cancel`\n * method to cancel delayed `func` invocations and a `flush` method to\n * immediately invoke them. Provide `options` to indicate whether `func`\n * should be invoked on the leading and/or trailing edge of the `wait`\n * timeout. The `func` is invoked with the last arguments provided to the\n * throttled function. Subsequent calls to the throttled function return the\n * result of the last `func` invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the throttled function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.throttle` and `_.debounce`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to throttle.\n * @param {number} [wait=0] The number of milliseconds to throttle invocations to.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=true]\n *  Specify invoking on the leading edge of the timeout.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new throttled function.\n * @example\n *\n * // Avoid excessively updating the position while scrolling.\n * jQuery(window).on('scroll', _.throttle(updatePosition, 100));\n *\n * // Invoke `renewToken` when the click event is fired, but not more than once every 5 minutes.\n * var throttled = _.throttle(renewToken, 300000, { 'trailing': false });\n * jQuery(element).on('click', throttled);\n *\n * // Cancel the trailing throttled invocation.\n * jQuery(window).on('popstate', throttled.cancel);\n */\nfunction throttle(func, wait, options) {\n  var leading = true,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  if (isObject(options)) {\n    leading = 'leading' in options ? !!options.leading : leading;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n  return debounce(func, wait, {\n    'leading': leading,\n    'maxWait': wait,\n    'trailing': trailing\n  });\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && objectToString.call(value) == symbolTag);\n}\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = value.replace(reTrim, '');\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nmodule.exports = throttle;\n","export const calculateGuidePositions = (dimensions, axis) => {\n\tif (axis === 'x') {\n\t\tconst start = dimensions.left;\n\t\tconst middle = dimensions.left + parseInt(dimensions.width / 2, 10);\n\t\tconst end = dimensions.left + dimensions.width;\n\n\t\treturn [ start, middle, end ];\n\t} else {\n\t\tconst start = dimensions.top;\n\t\tconst middle = dimensions.top + parseInt(dimensions.height / 2, 10);\n\t\tconst end = dimensions.top + dimensions.height;\n\n\t\treturn [ start, middle, end ];\n\t}\n};\n\nexport const proximityListener = (active, allGuides) => {\n\tconst xAxisGuidesForActiveBox = allGuides[active].x;\n\tconst yAxisGuidesForActiveBox = allGuides[active].y;\n\n\tconst xAxisAllGuides = getAllGuidesForGivenAxisExceptActiveBox(allGuides, xAxisGuidesForActiveBox, 'x');\n\tconst yAxisAllGuides = getAllGuidesForGivenAxisExceptActiveBox(allGuides, yAxisGuidesForActiveBox, 'y');\n\tconst xAxisMatchedGuides = checkValueProximities(xAxisGuidesForActiveBox, xAxisAllGuides);\n\tconst yAxisMatchedGuides = checkValueProximities(yAxisGuidesForActiveBox, yAxisAllGuides);\n\n\tconst allMatchedGuides = {};\n\n\tif (xAxisMatchedGuides.proximity) {\n\t\tallMatchedGuides.x = {\n\t\t\t...xAxisMatchedGuides,\n\t\t\tactiveBoxGuides: xAxisGuidesForActiveBox\n\t\t};\n\t}\n\n\tif (yAxisMatchedGuides.proximity) {\n\t\tallMatchedGuides.y = {\n\t\t\t...yAxisMatchedGuides,\n\t\t\tactiveBoxGuides: yAxisGuidesForActiveBox,\n\t\t};\n\t}\n\n\treturn allMatchedGuides;\n};\n\nexport const getAllGuidesForGivenAxisExceptActiveBox = (allGuides, guidesForActiveBoxAlongGivenAxis, axis) => {\n\tconst result = Object.keys(allGuides).map(box => {\n\t\tif (allGuides && allGuides[box]) {\n\t\t\tconst currentBoxGuidesAlongGivenAxis = allGuides[box][axis];\n\t\t\tif (currentBoxGuidesAlongGivenAxis !== guidesForActiveBoxAlongGivenAxis) {\n\t\t\t\treturn currentBoxGuidesAlongGivenAxis;\n\t\t\t}\n\t\t}\n\t});\n\n\treturn result.filter(guides => guides !== undefined);\n};\n\nexport const checkValueProximities = (activeBoxGuidesInOneAxis, allOtherGuidesInOneAxis) => {\n\tlet proximity = null;\n\tlet intersection = null;\n\tlet matchedArray = [];\n\tconst snapThreshold = 5;\n\tfor (let index = 0; index < allOtherGuidesInOneAxis.length; index += 1) {\n\t\tlet index2 = 0;\n\t\tlet index3 = 0;\n\n\t\twhile (index2 < activeBoxGuidesInOneAxis.length && index3 < allOtherGuidesInOneAxis[index].length) {\n\t\t\tconst diff = Math.abs(activeBoxGuidesInOneAxis[index2] - allOtherGuidesInOneAxis[index][index3]);\n\t\t\tif (diff <= snapThreshold) {\n\t\t\t\tproximity = { value: diff, activeBoxIndex: index2, matchedBoxIndex: index3 };\n\t\t\t\tmatchedArray = allOtherGuidesInOneAxis[index];\n\t\t\t\tintersection = allOtherGuidesInOneAxis[index][index3];\n\t\t\t}\n\n\t\t\tif (activeBoxGuidesInOneAxis[index2] < allOtherGuidesInOneAxis[index][index3]) {\n\t\t\t\tindex2 += 1;\n\t\t\t} else {\n\t\t\t\tindex3 += 1;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn { matchedArray, proximity, intersection };\n};\n\nexport const calculateBoundariesForDrag = (left, top, width, height, bounds) => {\n\tconst boundingBox = { ...bounds };\n\tif (left >= 0 && left <= boundingBox.width - width && top >= 0 && top <= boundingBox.height - height) {\n\t\treturn {\n\t\t\tleft,\n\t\t\ttop\n\t\t};\n\t} else if (left >= 0 && left <= boundingBox.width - width) {\n\t\treturn {\n\t\t\tleft,\n\t\t\ttop: top < 0 ? 0 : (boundingBox.height - height)\n\t\t};\n\t} else if (top >= 0 && top <= boundingBox.height - height) {\n\t\treturn {\n\t\t\tleft: left < 0 ? 0 : (boundingBox.width - width),\n\t\t\ttop\n\t\t};\n\t} else {\n\t\treturn {\n\t\t\tleft: left < 0 ? 0 : (boundingBox.width - width),\n\t\t\ttop: top < 0 ? 0 : (boundingBox.height - height)\n\t\t};\n\t}\n};\n\n// Calculate boundaries for boxes given an output resolution\nexport const calculateBoundariesForResize = (left, top, width, height, bounds) => {\n\tconst boundingBox = { ...bounds };\n\tlet widthDifference = 0;\n\tlet heightDifference = 0;\n\tif (left >= 0 && left + width <= boundingBox.width && top >= 0 && top + height <= boundingBox.height) {\n\t\treturn {\n\t\t\tleft,\n\t\t\ttop,\n\t\t\twidth,\n\t\t\theight\n\t\t};\n\t} else if (left < 0 && top < 0) {\n\t\treturn {\n\t\t\tleft: 0,\n\t\t\ttop: 0,\n\t\t\twidth: width + left <= boundingBox.width ? width + left : boundingBox.width,\n\t\t\theight: height + top <= boundingBox.height ? height + top : boundingBox.height\n\t\t};\n\t} else if (left < 0) {\n\t\treturn {\n\t\t\tleft: 0,\n\t\t\ttop,\n\t\t\twidth: width + left <= boundingBox.width ? width + left : boundingBox.width,\n\t\t\theight: height + top <= boundingBox.height ? height : boundingBox.height - top\n\t\t};\n\t} else if (top < 0) {\n\t\treturn {\n\t\t\tleft,\n\t\t\ttop: 0,\n\t\t\twidth: width + left <= boundingBox.width ? width : boundingBox.width - left,\n\t\t\theight: height + top <= boundingBox.height ? height + top : boundingBox.height\n\t\t};\n\t} else if (left >= 0 && left + width <= boundingBox.width) {\n\t\theightDifference = (top + height) - boundingBox.height;\n\t\treturn {\n\t\t\tleft,\n\t\t\ttop: top < 0 ? 0 : top,\n\t\t\twidth,\n\t\t\theight: height - heightDifference\n\t\t};\n\t} else if (top >= 0 && top + height <= boundingBox.height) {\n\t\twidthDifference = (left + width) - boundingBox.width;\n\t\treturn {\n\t\t\tleft: left < 0 ? 0 : left,\n\t\t\ttop,\n\t\t\twidth: width - widthDifference,\n\t\t\theight\n\t\t};\n\t} else {\n\t\twidthDifference = (left + width) - boundingBox.width;\n\t\theightDifference = (top + height) - boundingBox.height;\n\t\treturn {\n\t\t\tleft: left < 0 ? 0 : left,\n\t\t\ttop: top < 0 ? 0 : top,\n\t\t\twidth: width - widthDifference,\n\t\t\theight: height - heightDifference\n\t\t};\n\t}\n};\n\nexport const getOffsetCoordinates = (node) => {\n\treturn {\n\t\tx: node.offsetLeft,\n\t\ty: node.offsetTop,\n\t\ttop: node.offsetTop,\n\t\tleft: node.offsetLeft,\n\t\twidth: node.offsetWidth,\n\t\theight: node.offsetHeight\n\t};\n};\n\nexport const getLength = (x, y) => Math.sqrt(x * x + y * y);\n\nexport const topLeftToCenter = ({ left, top, width, height, rotateAngle }) => ({\n\tcx: left + width / 2,\n\tcy: top + height / 2,\n\twidth,\n\theight,\n\trotateAngle\n});\n\nexport const centerToTopLeft = ({ cx, cy, width, height, rotateAngle }) => ({\n\ttop: cy - height / 2,\n\tleft: cx - width / 2,\n\twidth,\n\theight,\n\trotateAngle\n});\n\nconst setWidthAndDeltaW = (width, deltaW, minWidth) => {\n\tconst expectedWidth = width + deltaW\n\tif (expectedWidth > minWidth) {\n\t\twidth = expectedWidth\n\t} else {\n\t\tdeltaW = minWidth - width\n\t\twidth = minWidth\n\t}\n\treturn { width, deltaW }\n}\n\nconst setHeightAndDeltaH = (height, deltaH, minHeight) => {\n\tconst expectedHeight = height + deltaH\n\tif (expectedHeight > minHeight) {\n\t\theight = expectedHeight\n\t} else {\n\t\tdeltaH = minHeight - height\n\t\theight = minHeight\n\t}\n\treturn { height, deltaH }\n}\n\nexport const getNewStyle = (type, rect, deltaW, deltaH, minWidth, minHeight) => {\n\tlet { width, height, cx, cy, rotateAngle } = rect;\n\tconst widthFlag = width < 0 ? -1 : 1;\n\tconst heightFlag = height < 0 ? -1 : 1;\n\twidth = Math.abs(width)\n\theight = Math.abs(height)\n\tswitch (type) {\n\t\tcase 'tr': {\n\t\t\tdeltaH = -deltaH\n\t\t\tconst widthAndDeltaW = setWidthAndDeltaW(width, deltaW, minWidth)\n\t\t\twidth = widthAndDeltaW.width\n\t\t\tdeltaW = widthAndDeltaW.deltaW\n\t\t\tconst heightAndDeltaH = setHeightAndDeltaH(height, deltaH, minHeight)\n\t\t\theight = heightAndDeltaH.height\n\t\t\tdeltaH = heightAndDeltaH.deltaH\n\t\t\tcx += deltaW / 2 * cos(rotateAngle) + deltaH / 2 * sin(rotateAngle)\n\t\t\tcy += deltaW / 2 * sin(rotateAngle) - deltaH / 2 * cos(rotateAngle)\n\t\t\tbreak\n\t\t}\n\t\tcase 'br': {\n\t\t\tconst widthAndDeltaW = setWidthAndDeltaW(width, deltaW, minWidth)\n\t\t\twidth = widthAndDeltaW.width\n\t\t\tdeltaW = widthAndDeltaW.deltaW\n\t\t\tconst heightAndDeltaH = setHeightAndDeltaH(height, deltaH, minHeight)\n\t\t\theight = heightAndDeltaH.height\n\t\t\tdeltaH = heightAndDeltaH.deltaH\n\t\t\tcx += deltaW / 2 * cos(rotateAngle) - deltaH / 2 * sin(rotateAngle)\n\t\t\tcy += deltaW / 2 * sin(rotateAngle) + deltaH / 2 * cos(rotateAngle)\n\t\t\tbreak\n\t\t}\n\t\tcase 'bl': {\n\t\t\tdeltaW = -deltaW\n\t\t\tconst widthAndDeltaW = setWidthAndDeltaW(width, deltaW, minWidth)\n\t\t\twidth = widthAndDeltaW.width\n\t\t\tdeltaW = widthAndDeltaW.deltaW\n\t\t\tconst heightAndDeltaH = setHeightAndDeltaH(height, deltaH, minHeight)\n\t\t\theight = heightAndDeltaH.height\n\t\t\tdeltaH = heightAndDeltaH.deltaH\n\t\t\tcx -= deltaW / 2 * cos(rotateAngle) + deltaH / 2 * sin(rotateAngle)\n\t\t\tcy -= deltaW / 2 * sin(rotateAngle) - deltaH / 2 * cos(rotateAngle)\n\t\t\tbreak\n\t\t}\n\t\tcase 'tl': {\n\t\t\tdeltaW = -deltaW\n\t\t\tdeltaH = -deltaH\n\t\t\tconst widthAndDeltaW = setWidthAndDeltaW(width, deltaW, minWidth)\n\t\t\twidth = widthAndDeltaW.width\n\t\t\tdeltaW = widthAndDeltaW.deltaW\n\t\t\tconst heightAndDeltaH = setHeightAndDeltaH(height, deltaH, minHeight)\n\t\t\theight = heightAndDeltaH.height\n\t\t\tdeltaH = heightAndDeltaH.deltaH\n\t\t\tcx -= deltaW / 2 * cos(rotateAngle) - deltaH / 2 * sin(rotateAngle)\n\t\t\tcy -= deltaW / 2 * sin(rotateAngle) + deltaH / 2 * cos(rotateAngle)\n\t\t\tbreak\n\t\t}\n\t\tcase 'ct': {\n\t\t\tdeltaW = 0;\n\t\t\tdeltaH = -deltaH;\n\t\t\tconst widthAndDeltaW = setWidthAndDeltaW(width, deltaW, minWidth)\n\t\t\twidth = widthAndDeltaW.width\n\t\t\tdeltaW = widthAndDeltaW.deltaW\n\t\t\tconst heightAndDeltaH = setHeightAndDeltaH(height, deltaH, minHeight)\n\t\t\theight = heightAndDeltaH.height\n\t\t\tdeltaH = heightAndDeltaH.deltaH\n\t\t\tcx -= - deltaH / 2 * sin(rotateAngle)\n\t\t\tcy -= + deltaH / 2 * cos(rotateAngle)\n\t\t\tbreak\n\t\t}\n\t\tcase 'cb': {\n\t\t\tdeltaW = 0;\n\t\t\tconst widthAndDeltaW = setWidthAndDeltaW(width, deltaW, minWidth)\n\t\t\twidth = widthAndDeltaW.width\n\t\t\tdeltaW = widthAndDeltaW.deltaW\n\t\t\tconst heightAndDeltaH = setHeightAndDeltaH(height, deltaH, minHeight)\n\t\t\theight = heightAndDeltaH.height\n\t\t\tdeltaH = heightAndDeltaH.deltaH\n\t\t\tcx -= deltaH / 2 * sin(rotateAngle)\n\t\t\tcy -= - deltaH / 2 * cos(rotateAngle)\n\t\t\tbreak\n\t\t}\n\t\tcase 'cl': {\n\t\t\tdeltaH = 0;\n\t\t\tdeltaW = -deltaW;\n\t\t\tconst widthAndDeltaW = setWidthAndDeltaW(width, deltaW, minWidth)\n\t\t\twidth = widthAndDeltaW.width\n\t\t\tdeltaW = widthAndDeltaW.deltaW\n\t\t\tconst heightAndDeltaH = setHeightAndDeltaH(height, deltaH, minHeight)\n\t\t\theight = heightAndDeltaH.height\n\t\t\tdeltaH = heightAndDeltaH.deltaH\n\t\t\tcx -= deltaW / 2 * cos(rotateAngle) - deltaH / 2 * sin(rotateAngle)\n\t\t\tcy -= deltaW / 2 * sin(rotateAngle) + deltaH / 2 * cos(rotateAngle)\n\t\t\tbreak\n\t\t}\n\t\tcase 'cr': {\n\t\t\tdeltaH = 0;\n\t\t\tconst widthAndDeltaW = setWidthAndDeltaW(width, deltaW, minWidth)\n\t\t\twidth = widthAndDeltaW.width\n\t\t\tdeltaW = widthAndDeltaW.deltaW\n\t\t\tconst heightAndDeltaH = setHeightAndDeltaH(height, deltaH, minHeight)\n\t\t\theight = heightAndDeltaH.height\n\t\t\tdeltaH = heightAndDeltaH.deltaH\n\t\t\tcx += deltaW / 2 * cos(rotateAngle)\n\t\t\tcy += deltaW / 2 * sin(rotateAngle)\n\t\t\tbreak\n\t\t}\n\t}\n\n\treturn {\n\t\tposition: {\n\t\t\tcx,\n\t\t\tcy\n\t\t},\n\t\tsize: {\n\t\t\twidth: width * widthFlag,\n\t\t\theight: height * heightFlag\n\t\t}\n\t}\n}\n\n// Rotate helpers\nexport const getAngle = ({ x: x1, y: y1 }, { x: x2, y: y2 }) => {\n\tconst dot = x1 * x2 + y1 * y2;\n\tconst det = x1 * y2 - y1 * x2;\n\tconst angle = Math.atan2(det, dot) / Math.PI * 180;\n\treturn (angle + 360) % 360;\n};\n\nexport const getNewCoordinates = (rect) => {\n\tconst { x, y, width, height, rotateAngle, node } = rect;\n\tconst cx = x + (width / 2);\n\tconst cy = y + (height / 2);\n\n\tconst tempX = x - cx;\n\tconst tempY = y - cy;\n\tconst cosine = cos(rotateAngle);\n\tconst sine = sin(rotateAngle);\n\n\tconst rotatedX = cx + (tempX * cosine - tempY * sine);\n\tconst rotatedY = cy + (tempX * sine + tempY * cosine);\n\n\treturn { x: rotatedX, y: rotatedY, top: rotatedX, left: rotatedY, width, height, rotateAngle, node };\n};\n\nexport const degToRadian = (deg) => deg * Math.PI / 180;\nconst cos = (deg) => Math.cos(degToRadian(deg));\nconst sin = (deg) => Math.sin(degToRadian(deg));\n\n// Multiple selection helpers\nexport const getMultipleSelectionCoordinates = (allBoxes, activeBoxes) => {\n\tlet selectedBoxes = [];\n\tfor (let box in allBoxes) {\n\t\tif (allBoxes.hasOwnProperty(box) && activeBoxes.includes(box)) {\n\t\t\tselectedBoxes.push(allBoxes[box]);\n\t\t}\n\t}\n\n\tconst x = selectedBoxes.reduce((min, b) => b.x < min ? b.x : min, selectedBoxes[0].x);\n\tconst y = selectedBoxes.reduce((min, b) => b.y < min ? b.y : min, selectedBoxes[0].y);\n\tconst width = selectedBoxes.reduce((max, b) => b.x + b.width > max ? b.x + b.width : max, (selectedBoxes[0].x + selectedBoxes[0].width)) - x;\n\tconst height = selectedBoxes.reduce((max, b) => b.y + b.height > max ? b.y + b.height : max, (selectedBoxes[0].y + selectedBoxes[0].height)) - y;\n\n\treturn { x, y, top: y, left: x, width, height };\n};\n\nexport const getBoxMetadata = () => {};","// Key map for changing the position and size of draggable boxes\n// Key map follows the Mousetrap syntax: https://craig.is/killing/mice\nexport const KEY_MAP = {\n\tMOVE_LEFT_1_PX: 'left',\n\tMOVE_RIGHT_1_PX: 'right',\n\tMOVE_UP_1_PX: 'up',\n\tMOVE_DOWN_1_PX: 'down',\n\tMOVE_LEFT_10_PX: 'shift+left',\n\tMOVE_RIGHT_10_PX: 'shift+right',\n\tMOVE_UP_10_PX: 'shift+up',\n\tMOVE_DOWN_10_PX: 'shift+down'\n};\n\n// Positions for resize handles\nexport const RESIZE_CORNERS = ['tr', 'tl', 'br', 'bl', 'ct', 'cl', 'cb', 'cr'];\n\n// Positions for rotate handles\nexport const ROTATE_HANDLES = ['tr', 'tl', 'br', 'bl'];\n","function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport throttle from 'lodash.throttle';\nimport {\n\tcalculateBoundariesForDrag,\n\tcalculateBoundariesForResize,\n\tdegToRadian,\n\tgetAngle,\n\ttopLeftToCenter,\n\tgetLength,\n\tgetNewCoordinates,\n\tgetNewStyle,\n\tgetOffsetCoordinates, centerToTopLeft,\n} from './utils/helpers';\nimport { RESIZE_CORNERS, ROTATE_HANDLES } from './utils/constants';\nimport styles from './styles.scss';\nconst DRAG_THRESHOLD = 4;\nconst PREVENT_DEFAULT_KEYS = ['ArrowRight', 'ArrowLeft', 'ArrowUp', 'ArrowDown'];\nclass Box extends Component{\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.box = React.createRef();\n\t\tthis.coordinates = React.createRef();\n\t\tthis.height = React.createRef();\n\t\tthis.didDragHappen = false;\n\t\tthis.didResizeHappen = false;\n\t\tthis.selectBox = this.selectBox.bind(this);\n\t\tthis.unHoverBox = this.unHoverBox.bind(this);\n\t\tthis.hoverBox = this.hoverBox.bind(this);\n\t\tthis.onDragStart = this.onDragStart.bind(this);\n\t\tthis.shortcutHandler = this.shortcutHandler.bind(this);\n\t\tthis.onShortcutKeyUp = this.onShortcutKeyUp.bind(this);\n\t\tthis.keyDownHandler = throttle(e => {\n\t\t\tthis.shortcutHandler(e);\n\t\t}, 300);\n\t\tthis.onResizeStart = this.onResizeStart.bind(this);\n\t\tthis.onRotateStart = this.onRotateStart.bind(this);\n\t\tthis.getCoordinatesWrapperWidth = this.getCoordinatesWrapperWidth.bind(this);\n\t\tthis.state = {\n\t\t\tcallKeyEnd: false\n\t\t};\n\t}\n\n\tselectBox(e) {\n\t\t// To make sure AlignmentGuides' selectBox method is not called at the end of drag or resize.\n\t\tif (this.props.didDragOrResizeHappen) {\n\t\t\tthis.props.selectBox(e);\n\t\t}\n\t\tif (this.box && this.box.current) {\n\t\t\tthis.box.current.focus();\n\t\t}\n\t}\n\n\thoverBox(e) {\n\t\tif (e.target.hasAttribute('identifier'))\n\t\t\te.target.classList.add(this.props.toggleHover);\n\t}\n\n\tunHoverBox(e) {\n\t\te.target.classList.remove(this.props.toggleHover);\n\t}\n\n\tonDragStart(e) {\n\t\tif ((this.props.position.drag || this.props.position.drag === undefined) && e.target.id.indexOf('box') !== -1) { // Allow drag only if drag property for the box is true or undefined\n\t\t\te.stopPropagation();\n\t\t\tconst target = this.box.current;\n\t\t\tconst boundingBox = this.props.getBoundingBoxElement();\n\t\t\tconst { position } = this.props;\n\t\t\tlet startingPosition = position.rotateAngle === 0 ? target.getBoundingClientRect().toJSON() : getOffsetCoordinates(target);\n\t\t\tconst boundingBoxPosition = boundingBox.current.getBoundingClientRect().toJSON();\n\n\t\t\tlet data = {\n\t\t\t\tx: startingPosition.x - boundingBoxPosition.x,\n\t\t\t\ty: startingPosition.y - boundingBoxPosition.y,\n\t\t\t\ttop: startingPosition.y - boundingBoxPosition.y,\n\t\t\t\tleft: startingPosition.x - boundingBoxPosition.x,\n\t\t\t\twidth: startingPosition.width,\n\t\t\t\theight: startingPosition.height,\n\t\t\t\tnode: target\n\t\t\t};\n\t\t\tif (position.rotateAngle !== 0) {\n\t\t\t\tdata = {\n\t\t\t\t\tx: startingPosition.x,\n\t\t\t\t\ty: startingPosition.y,\n\t\t\t\t\ttop: startingPosition.y,\n\t\t\t\t\tleft: startingPosition.x,\n\t\t\t\t\twidth: startingPosition.width,\n\t\t\t\t\theight: startingPosition.height,\n\t\t\t\t\tnode: target\n\t\t\t\t};\n\t\t\t}\n\t\t\tthis.didDragHappen = false;\n\n\t\t\t// if a box type is passed (ex: group) send it back to the parent so all boxes in the group can be updated.\n\t\t\tif (this.props.position.type) {\n\t\t\t\tdata.type = this.props.position.type;\n\t\t\t}\n\t\t\tthis.props.setDragOrResizeState && this.props.setDragOrResizeState(true);\n\t\t\tthis.props.onDragStart && this.props.onDragStart(e, data);\n\n\t\t\t// Update the starting position\n\t\t\tstartingPosition = Object.assign({}, data);\n\n\t\t\tconst deltaX = e.clientX - target.offsetLeft;\n\t\t\tconst deltaY = e.clientY - target.offsetTop;\n\n\t\t\tconst onDrag = (e) => {\n\t\t\t\te.stopPropagation();\n\t\t\t\tconst boundingBox = this.props.getBoundingBoxElement();\n\t\t\t\tif (!boundingBox.current) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tconst boundingBoxDimensions = boundingBox.current.getBoundingClientRect().toJSON();\n\t\t\t\tconst boxWidth = this.props.position.width;\n\t\t\t\tconst boxHeight = this.props.position.height;\n\t\t\t\tconst left = e.clientX - deltaX;\n\t\t\t\tconst top = e.clientY - deltaY;\n\t\t\t\tlet currentPosition = this.props.boundToParent ?\n\t\t\t\t\tcalculateBoundariesForDrag(left, top, boxWidth, boxHeight, boundingBoxDimensions) :\n\t\t\t\t\t{\n\t\t\t\t\t\tleft,\n\t\t\t\t\t\ttop,\n\t\t\t\t\t\twidth: this.props.position.width,\n\t\t\t\t\t\theight: this.props.position.height,\n\t\t\t\t\t\tx: left,\n\t\t\t\t\t\ty: top,\n\t\t\t\t\t\tnode: this.box.current\n\t\t\t\t\t};\n\t\t\t\tdata = {\n\t\t\t\t\tx: currentPosition.left,\n\t\t\t\t\ty: currentPosition.top,\n\t\t\t\t\ttop: currentPosition.top,\n\t\t\t\t\tleft: currentPosition.left,\n\t\t\t\t\twidth: this.props.position.width,\n\t\t\t\t\theight: this.props.position.height,\n\t\t\t\t\tnode: this.box.current,\n\t\t\t\t\tdeltaX: currentPosition.left - startingPosition.left,\n\t\t\t\t\tdeltaY: currentPosition.top - startingPosition.top\n\t\t\t\t};\n\t\t\t\tif (this.props.position.type) {\n\t\t\t\t\tdata.type = this.props.position.type;\n\t\t\t\t}\n\t\t\t\tif ((data.deltaX * data.deltaX + data.deltaY * data.deltaY) > DRAG_THRESHOLD) {\n\t\t\t\t\tthis.didDragHappen = true;\n\t\t\t\t\tthis.props.onDrag && this.props.onDrag(e, data);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tconst onDragEnd = (e) => {\n\t\t\t\tif (this.didDragHappen) {\n\t\t\t\t\tthis.props.setDragOrResizeState && this.props.setDragOrResizeState(false);\n\t\t\t\t\tthis.props.onDragEnd && this.props.onDragEnd(e, data);\n\t\t\t\t}\n\t\t\t\tdocument.removeEventListener('mousemove', onDrag);\n\t\t\t\tdocument.removeEventListener('mouseup', onDragEnd);\n\t\t\t};\n\n\t\t\tdocument.addEventListener('mousemove', onDrag);\n\t\t\tdocument.addEventListener('mouseup', onDragEnd);\n\t\t}\n\t}\n\n\tshortcutHandler(e) {\n\t\tif (this.props.preventShortcutEvents) {\n\t\t\treturn;\n\t\t}\n\t\tconst { areMultipleBoxesSelected } = this.props;\n\t\tif (\n\t\t\tthis.props.isSelected && \n\t\t\t(\n\t\t\t\t!areMultipleBoxesSelected || \n\t\t\t\t(\n\t\t\t\t\tthis.props.position && \n\t\t\t\t\tthis.props.position.type === 'group'\n\t\t\t\t)\n\t\t\t) \n\t\t) {  // Only Selected boxes will move on arrow keys\n\t\t\tif (PREVENT_DEFAULT_KEYS.includes(e.key)) {\n\t\t\t\te.preventDefault();\n\t\t\t}\n\t\t\tconst { position } = this.props;\n\n\t\t\tconst DELTA = e.shiftKey ? 10 : 1;\n\t\t\tlet newValues = {};\n\t\t\tlet changedValues = {};\n\n\t\t\tif (e.key === 'ArrowRight') {\n\t\t\t\tif (!this.state.callKeyEnd) {\n\t\t\t\t\tthis.setState({ callKeyEnd: true });\n\t\t\t\t}\n\t\t\t\tnewValues = e.ctrlKey || e.metaKey ? {\n\t\t\t\t\twidth: position.width + DELTA\n\t\t\t\t} : {\n\t\t\t\t\tleft: position.left + DELTA,\n\t\t\t\t\tx: position.x + DELTA\n\t\t\t\t}\n\t\t\t\tchangedValues = e.ctrlKey || e.metaKey ? {\n\t\t\t\t\twidth: DELTA\n\t\t\t\t} : {\n\t\t\t\t\tleft: DELTA,\n\t\t\t\t\tx: DELTA\n\t\t\t\t}\t\t\t\n\t\t\t} else if (e.key === 'ArrowLeft') {\n\t\t\t\tif (!this.state.callKeyEnd) {\n\t\t\t\t\tthis.setState({ callKeyEnd: true });\n\t\t\t\t}\n\t\t\t\tnewValues = e.ctrlKey || e.metaKey ? {\n\t\t\t\t\twidth: position.width - DELTA\n\t\t\t\t} :  {\n\t\t\t\t\tleft: position.left - DELTA,\n\t\t\t\t\tx: position.x - DELTA\n\t\t\t\t};\n\t\t\t\tchangedValues = e.ctrlKey || e.metaKey ? {\n\t\t\t\t\twidth: 0 - DELTA\n\t\t\t\t} :  {\n\t\t\t\t\tleft: 0 - DELTA,\n\t\t\t\t\tx: 0 - DELTA\n\t\t\t\t};\n\t\t\t} else if (e.key === 'ArrowUp') {\n\t\t\t\tif (!this.state.callKeyEnd) {\n\t\t\t\t\tthis.setState({ callKeyEnd: true });\n\t\t\t\t}\n\t\t\t\tnewValues = e.ctrlKey || e.metaKey ? {\n\t\t\t\t\theight: position.height - DELTA\n\t\t\t\t} : {\n\t\t\t\t\ttop: position.top - DELTA,\n\t\t\t\t\ty: position.y - DELTA\n\t\t\t\t};\n\t\t\t\tchangedValues = e.ctrlKey || e.metaKey ? {\n\t\t\t\t\theight: 0 - DELTA\n\t\t\t\t} : {\n\t\t\t\t\ttop: 0 - DELTA,\n\t\t\t\t\ty: 0 - DELTA\n\t\t\t\t};\n\t\t\t}  else if (e.key === 'ArrowDown') {\n\t\t\t\tif (!this.state.callKeyEnd) {\n\t\t\t\t\tthis.setState({ callKeyEnd: true });\n\t\t\t\t}\n\t\t\t\tnewValues = e.ctrlKey || e.metaKey ? {\n\t\t\t\t\theight: position.height + DELTA\n\t\t\t\t} : {\n\t\t\t\t\ttop: position.top + DELTA,\n\t\t\t\t\ty: position.y + DELTA\n\t\t\t\t};\n\t\t\t\tchangedValues = e.ctrlKey || e.metaKey ? {\n\t\t\t\t\theight: DELTA\n\t\t\t\t} : {\n\t\t\t\t\ttop: DELTA,\n\t\t\t\t\ty: DELTA\n\t\t\t\t};\n\t\t\t} \n\n\t\t\tif (this.box && this.box.current)\n\t\t\t\tnewValues.node = this.box.current\n\n\n\t\t\tconst data = Object.assign({}, position, newValues, {\n\t\t\t\tchangedValues // for group shortcut keys\n\t\t\t});\n\t\t\tthis.props.onKeyUp && this.props.onKeyUp(e, data);\n\t\t}\n\t}\n\n\tonShortcutKeyUp(e) {\n\t\tif (this.props.preventShortcutEvents) {\n\t\t\treturn;\n\t\t}\n\t\tif (this.props.isSelected) {  // Only Selected boxes will move on arrow keys\n\t\t\tif (PREVENT_DEFAULT_KEYS.includes(e.key)) {\n\t\t\t\te.preventDefault();\n\t\t\t}\n\t\t\tconst { position } = this.props;\n\t\t\tlet newValues = {};\n\t\t\tif (this.box && this.box.current)\n\t\t\t\tnewValues.node = this.box.current\n\t\t\tconst data = Object.assign({}, position, newValues);\n\t\t\tconst keysAllowed = ['ArrowRight', 'ArrowLeft', 'ArrowUp', 'ArrowDown', 'Meta', 'Control']\n\t\t\tif (keysAllowed.includes(e.key) && this.state.callKeyEnd) {\n\t\t\t\tthis.props.onKeyEnd && this.props.onKeyEnd(e, data);\n\t\t\t\tthis.setState({ callKeyEnd: false });\n\t\t\t}\n\t\t}\n\t}\n\n\tonResizeStart(e) {\n\t\tif (this.props.position.resize || this.props.position.resize === undefined) { // Allow resize only if resize property for the box is true or undefined\n\t\t\te.stopPropagation();\n\t\t\tif (this.box?.current?.style) {\n\t\t\t\tthis.box.current.style.zIndex = 99;\n\t\t\t}\n\t\t\tconst { target, clientX: startX, clientY: startY } = e;\n\t\t\tconst boundingBox = this.props.getBoundingBoxElement();\n\t\t\tconst { position } = this.props;\n\t\t\tconst rotateAngle = position.rotateAngle ? position.rotateAngle : 0;\n\t\t\tconst startingDimensions = getOffsetCoordinates(this.box.current);\n\t\t\tconst boundingBoxPosition = getOffsetCoordinates(boundingBox.current);\n\t\t\tconst { left, top, width, height } = startingDimensions;\n\t\t\tconst { cx, cy } = topLeftToCenter({ left, top, width, height, rotateAngle });\n\t\t\tconst rect = { width, height, cx, cy, rotateAngle };\n\t\t\tlet data = {\n\t\t\t\twidth: startingDimensions.width,\n\t\t\t\theight: startingDimensions.height,\n\t\t\t\tx: startingDimensions.left + boundingBoxPosition.x,\n\t\t\t\ty: startingDimensions.top + boundingBoxPosition.y,\n\t\t\t\tleft: startingDimensions.left + boundingBoxPosition.x,\n\t\t\t\ttop: startingDimensions.top + boundingBoxPosition.y,\n\t\t\t\tnode: this.box.current\n\t\t\t};\n\t\t\t// if (rotateAngle !== 0) {\n\t\t\t// \tdata = {\n\t\t\t// \t\twidth: startingDimensions.width,\n\t\t\t// \t\theight: startingDimensions.height,\n\t\t\t// \t\tx: startingDimensions.left + boundingBoxPosition.x,\n\t\t\t// \t\ty: startingDimensions.top + boundingBoxPosition.y,\n\t\t\t// \t\tleft: startingDimensions.left + boundingBoxPosition.x,\n\t\t\t// \t\ttop: startingDimensions.top + boundingBoxPosition.y,\n\t\t\t// \t\tnode: this.box.current\n\t\t\t// \t};\n\t\t\t// }\n\t\t\tthis.didResizeHappen = false;\n\n\t\t\t// if a box type is passed (ex: group) send it back to the parent so all boxes in the group can be updated.\n\t\t\tif (this.props.position.type) {\n\t\t\t\tdata.type = this.props.position.type;\n\t\t\t}\n\n\t\t\tconst ratio = rect.width / rect.height;\n\t\t\t// used to increase or decrease deltaY accordingly\n\t\t\tconst sign = e.target.id === 'resize-br' || e.target.id === 'resize-tl' ? 1 : -1; \n\n\t\t\tthis.props.setDragOrResizeState && this.props.setDragOrResizeState(true);\n\t\t\tthis.props.onResizeStart && this.props.onResizeStart(e, data);\n\t\t\tconst startingPosition = Object.assign({}, data);\n\t\t\tconst onResize = (e) => {\n\t\t\t\tconst { clientX, clientY } = e;\n\t\t\t\tconst deltaX = clientX - startX;\n\t\t\t\tconst deltaY = e.shiftKey && !e.ctrlKey ? sign * deltaX / ratio : clientY - startY;\n\n\t\t\t\tconst alpha = Math.atan2(deltaY, deltaX);\n\t\t\t\tconst deltaL = getLength(deltaX, deltaY);\n\n\t\t\t\t// const { minWidth, minHeight } = this.props;\n\t\t\t\tconst beta = alpha - degToRadian(rotateAngle);\n\t\t\t\tconst deltaW = deltaL * Math.cos(beta);\n\t\t\t\tconst deltaH = deltaL * Math.sin(beta);\n\n\t\t\t\tconst type = target.id.replace('resize-', '');\n\n\t\t\t\tconst { position: { cx, cy }, size: { width, height } } = getNewStyle(type, rect, deltaW, deltaH, 10, 10); // Use a better way to set minWidth and minHeight\n\t\t\t\tconst tempPosition = centerToTopLeft({ cx, cy, width, height, rotateAngle });\n\n\t\t\t\tdata = {\n\t\t\t\t\twidth: tempPosition.width,\n\t\t\t\t\theight: tempPosition.height,\n\t\t\t\t\tx: tempPosition.left,\n\t\t\t\t\ty: tempPosition.top,\n\t\t\t\t\tleft: tempPosition.left,\n\t\t\t\t\ttop: tempPosition.top,\n\t\t\t\t\trotateAngle,\n\t\t\t\t\tnode: this.box.current\n\t\t\t\t};\n\n\t\t\t\t// if (rotateAngle !== 0) {\n\t\t\t\t// \tdata = {\n\t\t\t\t// \t\twidth: tempPosition.width,\n\t\t\t\t// \t\theight: tempPosition.height,\n\t\t\t\t// \t\tx: tempPosition.left,\n\t\t\t\t// \t\ty: tempPosition.top,\n\t\t\t\t// \t\tleft: tempPosition.left,\n\t\t\t\t// \t\ttop: tempPosition.top,\n\t\t\t\t// \t\trotateAngle,\n\t\t\t\t// \t\tnode: this.box.current\n\t\t\t\t// \t};\n\t\t\t\t// }\n\t\t\t\tthis.didResizeHappen = true;\n\t\t\t\t// Calculate the restrictions if resize goes out of bounds\n\t\t\t\tconst currentPosition = this.props.boundToParent ?\n\t\t\t\t\tcalculateBoundariesForResize(data.left, data.top, tempPosition.width, tempPosition.height, boundingBoxPosition) :\n\t\t\t\t\tObject.assign({}, data);\n\n\t\t\t\tdata = Object.assign({}, data, currentPosition, {\n\t\t\t\t\tx: currentPosition.left,\n\t\t\t\t\ty: currentPosition.top,\n\t\t\t\t\tdeltaX: currentPosition.left - startingPosition.left,\n\t\t\t\t\tdeltaY: currentPosition.top - startingPosition.top,\n\t\t\t\t\tdeltaW: currentPosition.width - startingPosition.width,\n\t\t\t\t\tdeltaH: currentPosition.height - startingPosition.height\n\t\t\t\t});\n\n\t\t\t\tif (this.props.position.type) {\n\t\t\t\t\tdata.type = this.props.position.type;\n\t\t\t\t}\n\t\t\t\tthis.props.onResize && this.props.onResize(e, data);\n\t\t\t};\n\n\t\t\tconst onResizeEnd = (e) => {\n\t\t\t\tif (this.box?.current?.style) {\n\t\t\t\t\tthis.box.current.style.zIndex = this.props.position?.zIndex ? this.props.position.zIndex : 98;\n\t\t\t\t}\n\t\t\t\tif (this.didResizeHappen) {\n\t\t\t\t\tthis.props.setDragOrResizeState && this.props.setDragOrResizeState(false);\n\t\t\t\t\tthis.props.onResizeEnd && this.props.onResizeEnd(e, data);\n\t\t\t\t}\n\t\t\t\tonResize && document.removeEventListener('mousemove', onResize);\n\t\t\t\tonResizeEnd && document.removeEventListener('mouseup', onResizeEnd);\n\t\t\t};\n\n\t\t\tonResize && document.addEventListener('mousemove', onResize);\n\t\t\tonResizeEnd && document.addEventListener('mouseup', onResizeEnd);\n\t\t}\n\t}\n\n\tonRotateStart(e) {\n\t\tif (this.props.position.rotate || this.props.position.rotate === undefined) {\n\t\t\te.stopPropagation();\n\t\t\tconst target = this.box.current;\n\t\t\tconst { clientX, clientY } = e;\n\t\t\tconst { rotateAngle } = this.props.position;\n\t\t\tconst boundingBox = this.props.getBoundingBoxElement();\n\t\t\tconst start = target.getBoundingClientRect().toJSON();\n\t\t\tconst boundingBoxPosition = boundingBox.current.getBoundingClientRect().toJSON();\n\t\t\tconst center = {\n\t\t\t\tx: start.left + start.width / 2,\n\t\t\t\ty: start.top + start.height / 2\n\t\t\t};\n\t\t\tconst startVector = {\n\t\t\t\tx: clientX - center.x,\n\t\t\t\ty: clientY - center.y\n\t\t\t};\n\n\t\t\tconst startAngle = rotateAngle ? rotateAngle : 0;\n\t\t\tlet angle = startAngle ? startAngle : 0;\n\t\t\tlet data = {\n\t\t\t\tx: start.x - boundingBoxPosition.x,\n\t\t\t\ty: start.y - boundingBoxPosition.y,\n\t\t\t\ttop: start.top - boundingBoxPosition.top,\n\t\t\t\tleft: start.left - boundingBoxPosition.left,\n\t\t\t\twidth: start.width,\n\t\t\t\theight: start.height,\n\t\t\t\trotateAngle: angle,\n\t\t\t\tnode: target\n\t\t\t};\n\n\t\t\tconst newCoordinates = getNewCoordinates(data);\n\t\t\tthis.props.onRotateStart && this.props.onRotateStart(e, newCoordinates);\n\n\t\t\tconst onRotate = (e) => {\n\t\t\t\te.stopPropagation();\n\t\t\t\tconst { clientX, clientY } = e;\n\t\t\t\tconst rotateVector = {\n\t\t\t\t\tx: clientX - center.x,\n\t\t\t\t\ty: clientY - center.y\n\t\t\t\t};\n\t\t\t\tangle = getAngle(startVector, rotateVector);\n\t\t\t\t// Snap box during rotation at certain angles - 0, 90, 180, 270, 360\n\t\t\t\tlet rotateAngle = Math.round(startAngle + angle)\n\t\t\t\tif (rotateAngle >= 360) {\n\t\t\t\t\trotateAngle -= 360\n\t\t\t\t} else if (rotateAngle < 0) {\n\t\t\t\t\trotateAngle += 360\n\t\t\t\t}\n\t\t\t\tif (rotateAngle > 356 || rotateAngle < 4) {\n\t\t\t\t\trotateAngle = 0\n\t\t\t\t} else if (rotateAngle > 86 && rotateAngle < 94) {\n\t\t\t\t\trotateAngle = 90\n\t\t\t\t} else if (rotateAngle > 176 && rotateAngle < 184) {\n\t\t\t\t\trotateAngle = 180\n\t\t\t\t} else if (rotateAngle > 266 && rotateAngle < 274) {\n\t\t\t\t\trotateAngle = 270\n\t\t\t\t}\n\t\t\t\tdata = Object.assign({}, data, {\n\t\t\t\t\trotateAngle\n\t\t\t\t});\n\n\t\t\t\tconst newCoordinates = getNewCoordinates(data);\n\t\t\t\tthis.props.onRotate && this.props.onRotate(e, newCoordinates);\n\t\t\t};\n\n\t\t\tconst onRotateEnd = (e) => {\n\t\t\t\tonRotate && document.removeEventListener('mousemove', onRotate);\n\t\t\t\tonRotateEnd && document.removeEventListener('mouseup', onRotateEnd);\n\t\t\t\tthis.props.onRotateEnd && this.props.onRotateEnd(e, data);\n\t\t\t};\n\n\t\t\tonRotate && document.addEventListener('mousemove', onRotate);\n\t\t\tonRotateEnd && document.addEventListener('mouseup', onRotateEnd);\n\t\t}\n\t}\n\n\tgetCoordinatesWrapperWidth() {\n\t\tif (this.props.isSelected && this.coordinates && this.coordinates.current) {\n\t\t\treturn this.coordinates.current.offsetWidth;\n\t\t}\n\t}\n\n\tcomponentDidMount() {\n\t\tif (this.props.areMultipleBoxesSelected && this.props.isSelected) {\n\t\t\tdocument.addEventListener('keydown', this.shortcutHandler);\n\t\t\tdocument.addEventListener('keyup', this.onShortcutKeyUp);\n\t\t}\n\t}\n\n\tcomponentDidUpdate(prevProps) {\n\t\t// Added Events to document to accommodate group position shortcuts\n\t\tif (prevProps.areMultipleBoxesSelected !== this.props.areMultipleBoxesSelected || prevProps.isSelected !== this.props.isSelected) {\n\t\t\tdocument.removeEventListener('keydown', this.shortcutHandler);\n\t\t\tdocument.removeEventListener('keyup', this.onShortcutKeyUp);\n\t\t\t\n\t\t\tif (this.props.areMultipleBoxesSelected && this.props.isSelected) {\n\t\t\t\tdocument.addEventListener('keydown', this.shortcutHandler);\n\t\t\t\tdocument.addEventListener('keyup', this.onShortcutKeyUp);\n\t\t\t}\n\t\t}\n\t}\n\n\tcomponentWillUnmount() {\n\t\tdocument.removeEventListener('keydown', this.shortcutHandler);\n\t\tdocument.removeEventListener('keyup', this.onShortcutKeyUp);\n\t}\n\t\n\trender() {\n\t\tconst { areMultipleBoxesSelected, boxStyle, id, identifier, isSelected, isShiftKeyActive, position, resolution } = this.props;\n\t\tif (!isNaN(position.top) && !isNaN(position.left) && !isNaN(position.width) && !isNaN(position.height)) {\n\t\t\tconst boundingBox = this.props.getBoundingBoxElement();\n\t\t\tconst boundingBoxDimensions = boundingBox.current.getBoundingClientRect();\n\t\t\tconst dashedCentreNodes = position.dashedCentreNodes;\n\t\t\tlet xFactor = 1;\n\t\t\tlet yFactor = 1;\n\n\t\t\tif (resolution && resolution.width && resolution.height) {\n\t\t\t\txFactor = resolution.width / boundingBoxDimensions.width;\n\t\t\t\tyFactor = resolution.height / boundingBoxDimensions.height;\n\t\t\t}\n\n\t\t\tlet boxClassNames = isSelected ? `${this.props.overRideStyles ? this.props.overRideStyles: styles.box} ${this.props.overRideSelected ? this.props.overRideSelected : styles.selected}` : `${this.props.overRideStyles? this.props.overRideStyles : styles.box}`\n\t\t\tboxClassNames = position.type === 'group' ? `${boxClassNames} ${this.props.overRideSelected}` : boxClassNames;\n\t\t\tboxClassNames = isSelected && areMultipleBoxesSelected && position.type !== 'group' ? `${boxClassNames} ${styles.groupElement}` : boxClassNames;\n\t\t\tconst rotateAngle = position.rotateAngle ? position.rotateAngle : 0;\n\t\t\tconst boxStyles = {\n\t\t\t\t...boxStyle,\n\t\t\t\twidth: `${position.width}px`,\n\t\t\t\theight: `${position.height}px`,\n\t\t\t\ttop: `${position.top}px`,\n\t\t\t\tleft: `${position.left}px`,\n\t\t\t\tzIndex: position.zIndex ? position.zIndex : 98,\n\t\t\t\ttransform: `rotate(${rotateAngle}deg)`,\n\t\t\t\tpointerEvents: this.props.isLayerLocked ? 'none' : '',\n\t\t\t};\n\n\t\t\t// if (isSelected) {\n\t\t\t// \tboxStyles.zIndex = 99;\n\t\t\t// }\n\n\t\t\tif (position.type && position.type === 'group' && isShiftKeyActive) {\n\t\t\t\tboxStyles.pointerEvents = 'none';\n\t\t\t}\n\n\t\t\treturn <div\n\t\t\t\tclassName={boxClassNames}\n\t\t\t\tid={id}\n\t\t\t\tonClick={this.selectBox}\n\t\t\t\tonMouseDown={this.props.drag ? this.onDragStart : null} // If this.props.drag is false, remove the mouseDown event handler for drag\n\t\t\t\tonKeyDown={areMultipleBoxesSelected ? null : this.shortcutHandler} // remove event from div when multiple boxes are selected\n\t\t\t\tonKeyUp={areMultipleBoxesSelected ? null : this.onShortcutKeyUp} // remove event from div when multiple boxes are selected\n\t\t\t\tonMouseOver={this.hoverBox}\n\t\t\t\tonMouseOut={this.unHoverBox}\n\t\t\t\tref={this.box}\n\t\t\t\tstyle={boxStyles}\n\t\t\t\tidentifier={identifier}\n\t\t\t\ttabIndex=\"0\"\n\t\t\t\tonFocus={() => {\n\t\t\t\t\tif (this.props.preventShortcutEvents) {\n\t\t\t\t\t\tthis.props.setPreventShortcutEvents(false);\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t{\n\t\t\t\t\t(isSelected && !areMultipleBoxesSelected) || (position.type && position.type === 'group') ?\n\t\t\t\t\t(this.props.didDragOrResizeHappen) ? <span\n\t\t\t\t\t\t\tref={this.coordinates}\n\t\t\t\t\t\t\tclassName={styles.coordinates}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t{`${Math.round(position.x * xFactor)}, ${Math.round(position.y * yFactor)}`}\n\t\t\t\t\t</span> :\n\t\t\t\t\t\tnull :null\n\t\t\t\t}\n\t\t\t\t{\n\t\t\t\t\t(isSelected && !areMultipleBoxesSelected) || (position.type && position.type === 'group') ?\n\t\t\t\t\t(this.props.didDragOrResizeHappen) ? <span\n\t\t\t\t\t\t\tclassName={`${styles.dimensions} `}\n\t\t\t\t\t\t\tstyle={{ width: `${position.width}px`, top: `${position.height + 10}px` }}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t<div className={`${styles.dimensions_style}`}>{`${Math.round(position.width * xFactor)} x ${Math.round(position.height * yFactor)}`}</div>\n\t\t\t\t\t</span> :\n\t\t\t\t\t\tnull :null\n\t\t\t\t}\n\t\t\t\t{\n\t\t\t\t\t(isSelected && !areMultipleBoxesSelected) || (position.type && position.type === 'group') ?\n\t\t\t\t\t\tRESIZE_CORNERS.map(handle => {\n\t\t\t\t\t\t\tconst className = `${styles.resizeCorners} ${styles[`resize-${handle}`]} ` + `${dashedCentreNodes ? styles[`stretchable-resize-${handle}`] : null}`;\n\t\t\t\t\t\t\treturn <div\n\t\t\t\t\t\t\t\tkey={handle}\n\t\t\t\t\t\t\t\tclassName={className}\n\t\t\t\t\t\t\t\tonMouseDown={this.props.resize ? this.onResizeStart : null} // If this.props.resize is false then remove the mouseDown event handler for resize\n\t\t\t\t\t\t\t\tid={`resize-${handle}`}\n\t\t\t\t\t\t\t\tstyle={{pointerEvents: this.props.isLayerLocked ? 'none' : ''}}\n\t\t\t\t\t\t\t/>;\n\t\t\t\t\t\t}) :\n\t\t\t\t\t\tnull\n\t\t\t\t}\n\t\t\t\t{\n\t\t\t\t\tisSelected && !areMultipleBoxesSelected ?\n\t\t\t\t\t\tROTATE_HANDLES.map(handle => {\n\t\t\t\t\t\t\tconst className = `${styles.rotateHandle} ${styles[`rotate-${handle}`]}`;\n\t\t\t\t\t\t\treturn <div\n\t\t\t\t\t\t\t\tkey={handle}\n\t\t\t\t\t\t\t\tclassName={className}\n\t\t\t\t\t\t\t\tonMouseDown={this.props.rotate ? this.onRotateStart : null} // If this.props.rotate is false then remove the mouseDown event handler for rotate\n\t\t\t\t\t\t\t\tid={`rotate-${handle}`}\n\t\t\t\t\t\t\t\tstyle={{pointerEvents: this.props.isLayerLocked ? 'none' : ''}}\n\t\t\t\t\t\t\t/>;\n\t\t\t\t\t\t}) :\n\t\t\t\t\t\tnull\n\t\t\t\t}\n\t\t\t</div>;\n\t\t}\n\n\t\treturn null;\n\t}\n}\n\nBox.propTypes = {\n\tareMultipleBoxesSelected: PropTypes.bool,\n\tboundToParent: PropTypes.bool,\n\tdrag: PropTypes.bool,\n\tgetBoundingBoxElement: PropTypes.func,\n\tid: PropTypes.string,\n\tisSelected: PropTypes.bool,\n\tkeybindings: PropTypes.bool,\n\tonDragStart: PropTypes.func,\n\tonDrag: PropTypes.func,\n\tonDragEnd: PropTypes.func,\n\tonKeyUp: PropTypes.func,\n\tonKeyEnd: PropTypes.func,\n\tonResizeStart: PropTypes.func,\n\tonResize: PropTypes.func,\n\tonResizeEnd: PropTypes.func,\n\tonRotateStart: PropTypes.func,\n\tonRotate: PropTypes.func,\n\tonRotateEnd: PropTypes.func,\n\tposition: PropTypes.object.isRequired,\n\tresize: PropTypes.bool,\n\tresolution: PropTypes.object,\n\trotate: PropTypes.bool\n};\n\nexport default Box;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Box from './Box';\nimport {\n\tcalculateGuidePositions,\n\tgetMultipleSelectionCoordinates,\n\tgetOffsetCoordinates,\n\tproximityListener,\n} from './utils/helpers'\nimport styles from './styles.scss';\n\nclass AlignmentGuides extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.boundingBox = React.createRef();\n\t\tthis.state = {\n\t\t\tactive: '',\n\t\t\tactiveBoxes: [],\n\t\t\tboundingBox: null,\n\t\t\tboxes: {},\n\t\t\tdragging: false,\n\t\t\tguides: {},\n\t\t\tguidesActive: false,\n\t\t\tisShiftKeyActive: false,\n\t\t\tmatch: {},\n\t\t\tresizing: false,\n\t\t\trotating: false,\n\t\t\tactiveBoxSnappedPosition: {},\n\t\t\tpreventShortcutEvents: false\n\t\t};\n\t\tthis.setShiftKeyState = this.setShiftKeyState.bind(this);\n\t\tthis.getBoundingBoxElement = this.getBoundingBoxElement.bind(this);\n\t\tthis.setDragOrResizeState = this.setDragOrResizeState.bind(this);\n\t\tthis.selectBox = this.selectBox.bind(this);\n\t\tthis.unSelectBox = this.unSelectBox.bind(this);\n\t\tthis.dragStartHandler = this.dragStartHandler.bind(this);\n\t\tthis.dragHandler = this.dragHandler.bind(this);\n\t\tthis.dragEndHandler = this.dragEndHandler.bind(this);\n\t\tthis.resizeStartHandler = this.resizeStartHandler.bind(this);\n\t\tthis.resizeHandler = this.resizeHandler.bind(this);\n\t\tthis.resizeEndHandler = this.resizeEndHandler.bind(this);\n\t\tthis.rotateStartHandler = this.rotateStartHandler.bind(this);\n\t\tthis.rotateHandler = this.rotateHandler.bind(this);\n\t\tthis.rotateEndHandler = this.rotateEndHandler.bind(this);\n\t\tthis.keyUpHandler = this.keyUpHandler.bind(this);\n\t\tthis.keyEndHandler = this.keyEndHandler.bind(this);\n\t\tthis.setPreventShortcutEvents = this.setPreventShortcutEvents.bind(this);\n\t\tthis.startingPositions = null;\n\t\tthis.didDragOrResizeHappen = false;\n\t}\n\n\tcomponentDidMount() {\n\t\t// Set the dimensions of the bounding box and the draggable boxes when the component mounts.\n\t\tif (this.boundingBox.current) {\n\t\t\tconst boundingBox = this.boundingBox.current.getBoundingClientRect().toJSON();\n\t\t\tconst boxes = {};\n\t\t\tconst guides = {};\n\t\t\tconst activeBoxes = [];\n\t\t\tlet active = '';\n\n\t\t\t// Adding the guides for the bounding box to the guides object\n\t\t\tguides.boundingBox = {\n\t\t\t\tx: calculateGuidePositions(boundingBox, 'x').map(value => value - boundingBox.left),\n\t\t\t\ty: calculateGuidePositions(boundingBox, 'y').map(value => value - boundingBox.top)\n\t\t\t};\n\n\t\t\tthis.props.boxes.forEach((dimensions, index) => {\n\t\t\t\tboxes[`box${index}`] = dimensions;\n\t\t\t\tguides[`box${index}`] = {\n\t\t\t\t\tx: calculateGuidePositions(dimensions, 'x'),\n\t\t\t\t\ty: calculateGuidePositions(dimensions, 'y')\n\t\t\t\t};\n\t\t\t\tif (dimensions.active) {\n\t\t\t\t\tactiveBoxes.push(`box${index}`);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif (activeBoxes.length > 1) {\n\t\t\t\tboxes['box-ms'] = getMultipleSelectionCoordinates(boxes, activeBoxes);\n\t\t\t\tboxes['box-ms'].type = 'group';\n\t\t\t\tboxes['box-ms'].zIndex = 12;\n\t\t\t\tconst selections = [];\n\t\t\t\tfor (let box in boxes) {\n\t\t\t\t\tif (boxes.hasOwnProperty(box) && activeBoxes.includes(box)) {\n\t\t\t\t\t\tselections.push(boxes[box]);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tboxes['box-ms'].selections = selections;\n\t\t\t\tactive = 'box-ms';\n\t\t\t} else if (activeBoxes.length === 1) {\n\t\t\t\tactive = activeBoxes[0];\n\t\t\t}\n\n\t\t\tdocument.addEventListener('click', this.unSelectBox);\n\t\t\twindow.addEventListener('blur', this.unSelectBox);\n\t\t\tdocument.addEventListener('keydown', this.setShiftKeyState);\n\t\t\tdocument.addEventListener('keydown', this.unSelectBox);\n\t\t\tdocument.addEventListener('keyup', this.setShiftKeyState);\n\n\t\t\tthis.setState({\n\t\t\t\tboundingBox,\n\t\t\t\tboxes,\n\t\t\t\tguides,\n\t\t\t\tactiveBoxes,\n\t\t\t\tactive\n\t\t\t});\n\t\t}\n\t}\n\n\tcomponentWillUnmount() {\n\t\tdocument.removeEventListener('click', this.unSelectBox);\n\t\twindow.removeEventListener('blur', this.unSelectBox);\n\t\tdocument.removeEventListener('keydown', this.setShiftKeyState);\n\t\tdocument.removeEventListener('keydown', this.unSelectBox);\n\t\tdocument.removeEventListener('keyup', this.setShiftKeyState);\n\t}\n\n\tsetShiftKeyState(e) {\n\t\tthis.setState({\n\t\t\tisShiftKeyActive: e.shiftKey\n\t\t});\n\t}\n\n\tgetBoundingBoxElement() {\n\t\treturn this.boundingBox;\n\t}\n\n\tsetDragOrResizeState(state) {\n\t\tthis.didDragOrResizeHappen = state;\n\t}\n\n\tsetPreventShortcutEvents(val) {\n\t\tthis.setState({ preventShortcutEvents: val });\n\t}\n\n\tselectBox(e) {\n\t\tconst boundingBox = this.getBoundingBoxElement();\n\t\tconst boundingBoxPosition = boundingBox.current.getBoundingClientRect().toJSON();\n\t\tif (e.target && e.target.id.indexOf('box') >= 0) {\n\t\t\tconst boxDimensions = e.target.getBoundingClientRect().toJSON();\n\t\t\tlet data = {\n\t\t\t\tx: boxDimensions.x - boundingBoxPosition.x,\n\t\t\t\ty: boxDimensions.y - boundingBoxPosition.y,\n\t\t\t\tleft: boxDimensions.left - boundingBoxPosition.x,\n\t\t\t\ttop: boxDimensions.top - boundingBoxPosition.y,\n\t\t\t\twidth: boxDimensions.width,\n\t\t\t\theight: boxDimensions.height,\n\t\t\t\tnode: e.target,\n\t\t\t\tmetadata: this.state.boxes[e.target.id].metadata\n\t\t\t};\n\t\t\tif (e.shiftKey) {\n\t\t\t\tlet { activeBoxes, boxes } = this.state;\n\t\t\t\tif (activeBoxes.includes(e.target.id)) {\n\t\t\t\t\tactiveBoxes = activeBoxes.filter(activeBox => activeBox !== e.target.id);\n\t\t\t\t} else {\n\t\t\t\t\tactiveBoxes = [\n\t\t\t\t\t\t...activeBoxes,\n\t\t\t\t\t\te.target.id\n\t\t\t\t\t];\n\t\t\t\t}\n\t\t\t\tboxes['box-ms'] = getMultipleSelectionCoordinates(boxes, activeBoxes);\n\t\t\t\tboxes['box-ms'].type = 'group';\n\t\t\t\tboxes['box-ms'].zIndex = 12;\n\t\t\t\tconst selections = [];\n\t\t\t\tfor (let box in boxes) {\n\t\t\t\t\tif (boxes.hasOwnProperty(box) && activeBoxes.includes(box)) {\n\t\t\t\t\t\tselections.push(boxes[box]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tdata = Object.assign({}, boxes['box-ms'], {\n\t\t\t\t\tmetadata: { type: 'group' },\n\t\t\t\t\tselections\n\t\t\t\t});\n\t\t\t\tthis.setState({\n\t\t\t\t\tactive: 'box-ms',\n\t\t\t\t\tactiveBoxes,\n\t\t\t\t\tboxes\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tlet { activeBoxes, boxes } = this.state;\n\t\t\t\tdelete boxes['box-ms'];\n\t\t\t\tthis.setState({\n\t\t\t\t\tactive: e.target.id,\n\t\t\t\t\tactiveBoxes: [\n\t\t\t\t\t\te.target.id\n\t\t\t\t\t],\n\t\t\t\t\tboxes\n\t\t\t\t});\n\t\t\t}\n\t\t\tthis.props.onSelect && this.props.onSelect(e, data);\n\t\t} else if (e.target && e.target.parentNode && e.target.parentNode.id.indexOf('box') >= 0) {\n\t\t\tconst boxDimensions = e.target.parentNode.getBoundingClientRect().toJSON();\n\t\t\tlet data = {\n\t\t\t\tx: boxDimensions.x - boundingBoxPosition.x,\n\t\t\t\ty: boxDimensions.y - boundingBoxPosition.y,\n\t\t\t\tleft: boxDimensions.left - boundingBoxPosition.x,\n\t\t\t\ttop: boxDimensions.top - boundingBoxPosition.y,\n\t\t\t\twidth: boxDimensions.width,\n\t\t\t\theight: boxDimensions.height,\n\t\t\t\tnode: e.target.parentNode,\n\t\t\t\tmetadata: this.state.boxes[e.target.parentNode.id].metadata\n\t\t\t};\n\t\t\tif (e.shiftKey) {\n\t\t\t\tlet { activeBoxes, boxes } = this.state;\n\t\t\t\tif (activeBoxes.includes(e.target.parentNode.id)) {\n\t\t\t\t\tactiveBoxes = activeBoxes.filter(activeBox => activeBox !== e.target.parentNode.id);\n\t\t\t\t} else {\n\t\t\t\t\tactiveBoxes = [\n\t\t\t\t\t\t...activeBoxes,\n\t\t\t\t\t\te.target.id\n\t\t\t\t\t];\n\t\t\t\t}\n\t\t\t\tboxes['box-ms'] = getMultipleSelectionCoordinates(boxes, activeBoxes);\n\t\t\t\tboxes['box-ms'].type = 'group';\n\t\t\t\tboxes['box-ms'].zIndex = 12;\n\t\t\t\tconst selections = [];\n\t\t\t\tfor (let box in boxes) {\n\t\t\t\t\tif (boxes.hasOwnProperty(box) && activeBoxes.includes(box)) {\n\t\t\t\t\t\tselections.push(boxes[box]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tdata = Object.assign({}, boxes['box-ms'], {\n\t\t\t\t\tmetadata: { type: 'group' },\n\t\t\t\t\tselections\n\t\t\t\t});\n\t\t\t\tthis.setState({\n\t\t\t\t\tactive: 'box-ms',\n\t\t\t\t\tactiveBoxes,\n\t\t\t\t\tboxes\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tlet { boxes } = this.state;\n\t\t\t\tdelete boxes['box-ms'];\n\t\t\t\tthis.setState({\n\t\t\t\t\tactive: e.target.parentNode.id,\n\t\t\t\t\tactiveBoxes: [\n\t\t\t\t\t\te.target.parentNode.id\n\t\t\t\t\t],\n\t\t\t\t\tboxes\n\t\t\t\t});\n\t\t\t}\n\t\t\tthis.props.onSelect && this.props.onSelect(e, data);\n\t\t}\n\t}\n\n\tunSelectBox(e) {\n\t\tif (\n\t\t\te.type === 'keydown' ? (e.key === 'Escape' || e.key === 'Esc') :\n\t\t\te.target === window ||\n\t\t\t(\n\t\t\t\te.target &&\n\t\t\t\te.target.id.indexOf('box') === -1 &&\n\t\t\t\te.target.parentNode &&\n\t\t\t\te.target.parentNode.id.indexOf('box') === -1\n\t\t\t)\n\t\t) {\n\t\t\tif (typeof this.props.isValidUnselect === 'function' && this.props.isValidUnselect(e) === false) {\n\t\t\t\tthis.setPreventShortcutEvents(true);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst { boxes } = this.state;\n\t\t\tdelete boxes['box-ms'];\n\t\t\tthis.setState({\n\t\t\t\tactive: '',\n\t\t\t\tactiveBoxes: [],\n\t\t\t\tboxes,\n\t\t\t\tpreventShortcutEvents: false\n\t\t\t});\n\t\t\tthis.props.onUnselect && this.props.onUnselect(e);\n\t\t}\n\t}\n\n\tdragStartHandler(e, data) {\n\t\tthis.setState({\n\t\t\tactive: data.node.id,\n\t\t\tdragging: true\n\t\t});\n\n\t\tlet newData = Object.assign({}, data);\n\t\tif (this.state.boxes[data.node.id].metadata) {\n\t\t\tnewData.metadata = this.state.boxes[data.node.id].metadata;\n\t\t}\n\t\tif (data.type && data.type === 'group') {\n\t\t\tnewData.selections = this.state.activeBoxes.map(box => {\n\t\t\t\treturn Object.assign({}, this.state.boxes[box]);\n\t\t\t});\n\t\t} else if (!e.shiftKey) {\n\t\t\tthis.setState({\n\t\t\t\tactiveBoxes: [\n\t\t\t\t\te.target.parentNode.id\n\t\t\t\t],\n\t\t\t});\n\t\t}\n\n\t\tthis.props.onDragStart && this.props.onDragStart(e, newData);\n\n\t\t// Update starting positions so we can use it to update when group resize happens\n\t\tif (data.type && data.type === 'group') {\n\t\t\tthis.startingPositions = {};\n\t\t\tthis.state.activeBoxes.forEach(box => {\n\t\t\t\tthis.startingPositions[box] = this.state.boxes[box];\n\t\t\t});\n\t\t}\n\t}\n\n\tdragHandler(e, data) {\n\t\tlet newData;\n\t\tif (this.state.dragging) {\n\t\t\tnewData = Object.assign({}, data);\n\t\t\tif (this.state.boxes[this.state.active].metadata) {\n\t\t\t\tnewData.metadata = this.state.boxes[this.state.active].metadata;\n\t\t\t}\n\t\t\tif (data.type && data.type === 'group') {\n\t\t\t\tnewData.selections = this.state.activeBoxes.map(box => {\n\t\t\t\t\treturn Object.assign({}, this.state.boxes[box]);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// this.props.onDrag && this.props.onDrag(e, newData);\n\t\t}\n\n\t\tlet boxes = null;\n\t\tlet guides = null;\n\t\tif (data.type && data.type === 'group') {\n\t\t\tboxes = {};\n\t\t\tfor (let box in this.state.boxes) {\n\t\t\t\tif (this.state.boxes.hasOwnProperty(box)) {\n\t\t\t\t\tif (this.state.activeBoxes.includes(box)) {\n\t\t\t\t\t\tboxes[box] = Object.assign({}, this.state.boxes[box], {\n\t\t\t\t\t\t\tx: this.startingPositions[box].x + data.deltaX,\n\t\t\t\t\t\t\ty: this.startingPositions[box].y + data.deltaY,\n\t\t\t\t\t\t\tleft: this.startingPositions[box].left + data.deltaX,\n\t\t\t\t\t\t\ttop: this.startingPositions[box].top + data.deltaY\n\t\t\t\t\t\t});\n\t\t\t\t\t} else if (box === 'box-ms') {\n\t\t\t\t\t\tboxes[box] = Object.assign({}, data);\n\t\t\t\t\t\tdelete boxes[box].deltaX;\n\t\t\t\t\t\tdelete boxes[box].deltaY;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tboxes[box] = this.state.boxes[box];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tguides = Object.keys(this.state.guides).map(guide => {\n\t\t\t\tif (this.state.activeBoxes.includes(guide)) {\n\t\t\t\t\treturn Object.assign({}, this.state.guides[guide], {\n\t\t\t\t\t\tx: calculateGuidePositions(boxes[guide], 'x'),\n\t\t\t\t\t\ty: calculateGuidePositions(boxes[guide], 'y')\n\t\t\t\t\t})\n\t\t\t\t}\n\n\t\t\t\treturn this.state.guides[guide];\n\t\t\t});\n\t\t} else {\n\t\t\tboxes = Object.assign({}, this.state.boxes, {\n\t\t\t\t[data.node.id]: Object.assign({}, this.state.boxes[data.node.id], {\n\t\t\t\t\tx: data.x,\n\t\t\t\t\ty: data.y,\n\t\t\t\t\tleft: data.left,\n\t\t\t\t\ttop: data.top,\n\t\t\t\t\twidth: data.width,\n\t\t\t\t\theight: data.height\n\t\t\t\t})\n\t\t\t});\n\n\t\t\tguides = Object.assign({}, this.state.guides, {\n\t\t\t\t[data.node.id]: Object.assign({}, this.state.guides[data.node.id], {\n\t\t\t\t\tx: calculateGuidePositions(boxes[data.node.id], 'x'),\n\t\t\t\t\ty: calculateGuidePositions(boxes[data.node.id], 'y')\n\t\t\t\t})\n\t\t\t});\n\t\t}\n\n\t\tthis.setState({\n\t\t\tguidesActive: true,\n\t\t\tboxes,\n\t\t\tguides\n\t\t}, () => {\n\t\t\tif (this.props.snap && this.state.active && this.state.guides && data.type !== 'group') {\n\t\t\t\tconst match = proximityListener(this.state.active, this.state.guides);\n\t\t\t\tlet newActiveBoxLeft = this.state.boxes[this.state.active].left;\n\t\t\t\tlet newActiveBoxTop = this.state.boxes[this.state.active].top;\n\t\t\t\tfor (let axis in match) {\n\t\t\t\t\tconst { activeBoxGuides, matchedArray, proximity } = match[axis];\n\t\t\t\t\tconst activeBoxProximityIndex = proximity.activeBoxIndex;\n\t\t\t\t\tconst matchedBoxProximityIndex = proximity.matchedBoxIndex;\n\n\t\t\t\t\tif (axis === 'x') {\n\t\t\t\t\t\tif (activeBoxGuides[activeBoxProximityIndex] > matchedArray[matchedBoxProximityIndex]) {\n\t\t\t\t\t\t\tnewActiveBoxLeft = this.state.boxes[this.state.active].left - proximity.value;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tnewActiveBoxLeft = this.state.boxes[this.state.active].left + proximity.value;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (activeBoxGuides[activeBoxProximityIndex] > matchedArray[matchedBoxProximityIndex]) {\n\t\t\t\t\t\t\tnewActiveBoxTop = this.state.boxes[this.state.active].top - proximity.value;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tnewActiveBoxTop = this.state.boxes[this.state.active].top + proximity.value;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tconst boxes = Object.assign({}, this.state.boxes, {\n\t\t\t\t\t[this.state.active]: Object.assign({}, this.state.boxes[this.state.active], {\n\t\t\t\t\t\tleft: newActiveBoxLeft,\n\t\t\t\t\t\ttop: newActiveBoxTop\n\t\t\t\t\t})\n\t\t\t\t});\n\t\t\t\tconst guides = Object.assign({}, this.state.guides, {\n\t\t\t\t\t[this.state.active]: Object.assign({}, this.state.guides[this.state.active], {\n\t\t\t\t\t\tx: calculateGuidePositions(boxes[this.state.active], 'x'),\n\t\t\t\t\t\ty: calculateGuidePositions(boxes[this.state.active], 'y')\n\t\t\t\t\t})\n\t\t\t\t})\n\n\t\t\t\tconst activeBox = {\n\t\t\t\t\tleft: this.state.boxes[this.state.active].left,\n\t\t\t\t\ttop: this.state.boxes[this.state.active].top,\n\t\t\t\t\tx: this.state.boxes[this.state.active].x,\n\t\t\t\t\ty: this.state.boxes[this.state.active].y\n\t\t\t\t}\n\n\t\t\t\tObject.keys(guides).map(box => {\n\t\t\t\t\tguides?.[box]?.x.map(position => {\n\t\t\t\t\t\tif (match?.x?.intersection === position) {\n\t\t\t\t\t\t\tactiveBox.left = newActiveBoxLeft;\n\t\t\t\t\t\t\tactiveBox.x = newActiveBoxLeft;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\tguides?.[box]?.y.map(position => {\n\t\t\t\t\t\tif (match?.y?.intersection === position) {\n\t\t\t\t\t\t\tactiveBox.top = newActiveBoxTop;\n\t\t\t\t\t\t\tactiveBox.y = newActiveBoxTop;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\n\t\t\t\tconst newBoxes = Object.assign({}, this.state.boxes, {\n\t\t\t\t\t[this.state.active] : Object.assign({}, this.state.boxes[this.state.active], {\n\t\t\t\t\t\t...activeBox\n\t\t\t\t\t})\n\t\t\t\t});\n\n\n\t\t\t\tnewData = Object.assign({}, newData, {\n\t\t\t\t\t...activeBox\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tthis.setState({\n\t\t\t\t\tboxes: newBoxes,\n\t\t\t\t\tguides,\n\t\t\t\t\tmatch,\n\t\t\t\t\tactiveBoxSnappedPosition: activeBox\n\t\t\t\t});\n\t\t\t}\n\t\t\tthis.state.dragging && this.props.onDrag && this.props.onDrag(e, newData);\n\t\t});\n\t}\n\n\tdragEndHandler(e, data) {\n\t\tthis.setState({\n\t\t\tdragging: false,\n\t\t\tguidesActive: false\n\t\t});\n\n\t\tlet newData = Object.assign({}, data);\n\t\tif (this.state.boxes[this.state.active] && this.state.boxes[this.state.active].metadata) {\n\t\t\tnewData.metadata = this.state.boxes[this.state.active].metadata;\n\t\t}\n\n\t\tif (data.type && data.type === 'group') {\n\t\t\tnewData.selections = this.state.activeBoxes.map(box => {\n\t\t\t\treturn Object.assign({}, this.state.boxes[box]);\n\t\t\t});\n\t\t}\n\n\t\tif (this.props.snap && this.state.active && this.state.guides && data.type !== 'group') {\n\t\t\tnewData = Object.assign({}, newData, {\n\t\t\t\t...this.state.activeBoxSnappedPosition\n\t\t\t});\n\t\t}\n\n\t\tthis.props.onDragEnd && this.props.onDragEnd(e, newData);\n\t}\n\n\tresizeStartHandler(e, data) {\n\t\tthis.setState({\n\t\t\tactive: data.node.id,\n\t\t\tresizing: true\n\t\t});\n\t\tlet newData = Object.assign({}, data);\n\t\tif (this.state.boxes[data.node.id].metadata) {\n\t\t\tnewData.metadata = this.state.boxes[data.node.id].metadata;\n\t\t}\n\n\t\tthis.props.onResizeStart && this.props.onResizeStart(e, newData);\n\n\t\t// Update starting positions so we can use it to update when group resize happens\n\t\tif (data.type && data.type === 'group') {\n\t\t\tthis.startingPositions = {};\n\t\t\tthis.state.activeBoxes.forEach(box => {\n\t\t\t\tthis.startingPositions[box] = this.state.boxes[box];\n\t\t\t});\n\t\t}\n\t}\n\n\tresizeHandler(e, data) {\n\t\tif (this.state.resizing) {\n\t\t\tlet newData = Object.assign({}, data);\n\t\t\tif (this.state.boxes[this.state.active].metadata) {\n\t\t\t\tnewData.metadata = this.state.boxes[this.state.active].metadata;\n\t\t\t}\n\n\t\t\tthis.props.onResize && this.props.onResize(e, newData);\n\t\t}\n\n\t\tlet boxes = null;\n\t\tlet guides = null;\n\t\tif (data.type && data.type === 'group') {\n\t\t\tboxes = {};\n\t\t\tconst boundingBox = this.getBoundingBoxElement();\n\t\t\tconst boundingBoxPosition = getOffsetCoordinates(boundingBox.current);\n\t\t\tfor (let box in this.state.boxes) {\n\t\t\t\tif (this.state.boxes.hasOwnProperty(box)) {\n\t\t\t\t\tif (this.state.activeBoxes.includes(box)) {\n\t\t\t\t\t\t// Adding bounding box's starting position\n\t\t\t\t\t\t// This is because it's added only to the group's box and not the individual members of the group\n\t\t\t\t\t\tboxes[box] = Object.assign({}, this.state.boxes[box], {\n\t\t\t\t\t\t\tx: boundingBoxPosition.x + this.startingPositions[box].x + data.deltaX,\n\t\t\t\t\t\t\ty: boundingBoxPosition.y + this.startingPositions[box].y + data.deltaY,\n\t\t\t\t\t\t\tleft: boundingBoxPosition.left + this.startingPositions[box].left + data.deltaX,\n\t\t\t\t\t\t\ttop: boundingBoxPosition.top + this.startingPositions[box].top + data.deltaY,\n\t\t\t\t\t\t\twidth: this.startingPositions[box].width + data.deltaW,\n\t\t\t\t\t\t\theight: this.startingPositions[box].height + data.deltaH\n\t\t\t\t\t\t});\n\t\t\t\t\t} else if (box === 'box-ms') {\n\t\t\t\t\t\tboxes[box] = Object.assign({}, data);\n\t\t\t\t\t\tdelete boxes[box].deltaX;\n\t\t\t\t\t\tdelete boxes[box].deltaY;\n\t\t\t\t\t\tdelete boxes[box].deltaW;\n\t\t\t\t\t\tdelete boxes[box].deltaH;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tboxes[box] = this.state.boxes[box];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tguides = Object.keys(this.state.guides).map(guide => {\n\t\t\t\tif (this.state.activeBoxes.includes(guide)) {\n\t\t\t\t\treturn Object.assign({}, this.state.guides[guide], {\n\t\t\t\t\t\tx: calculateGuidePositions(boxes[guide], 'x'),\n\t\t\t\t\t\ty: calculateGuidePositions(boxes[guide], 'y')\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\tboxes = Object.assign({}, this.state.boxes, {\n\t\t\t\t[data.node.id]: Object.assign({}, this.state.boxes[data.node.id], {\n\t\t\t\t\tx: data.x,\n\t\t\t\t\ty: data.y,\n\t\t\t\t\tleft: data.left,\n\t\t\t\t\ttop: data.top,\n\t\t\t\t\twidth: data.width,\n\t\t\t\t\theight: data.height\n\t\t\t\t})\n\t\t\t});\n\t\t\tguides = Object.assign({}, this.state.guides, {\n\t\t\t\t[data.node.id]: Object.assign({}, this.state.guides[data.node.id], {\n\t\t\t\t\tx: calculateGuidePositions(boxes[data.node.id], 'x'),\n\t\t\t\t\ty: calculateGuidePositions(boxes[data.node.id], 'y')\n\t\t\t\t})\n\t\t\t});\n\t\t}\n\n\t\tthis.setState({\n\t\t\tboxes,\n\t\t\tguides\n\t\t});\n\t}\n\n\tresizeEndHandler(e, data) {\n\t\tif (this.state.resizing) {\n\t\t\tlet newData = Object.assign({}, data);\n\t\t\tif (this.state.boxes[this.state.active].metadata) {\n\t\t\t\tnewData.metadata = this.state.boxes[this.state.active].metadata;\n\t\t\t}\n\n\t\t\tif (data.type && data.type === 'group') {\n\t\t\t\tnewData.selections = this.state.activeBoxes.map(box => {\n\t\t\t\t\treturn Object.assign({}, this.state.boxes[box]);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tthis.props.onResizeEnd && this.props.onResizeEnd(e, newData);\n\t\t}\n\n\t\tthis.setState({\n\t\t\tresizing: false,\n\t\t\tguidesActive: false\n\t\t});\n\t}\n\n\trotateStartHandler(e, data) {\n\t\tthis.setState({\n\t\t\tactive: data.node.id,\n\t\t\trotating: true\n\t\t});\n\t\tthis.props.onRotateStart && this.props.onRotateStart(e, data);\n\t}\n\n\trotateHandler(e, data) {\n\t\tconst boxes = Object.assign({}, this.state.boxes, {\n\t\t\t[this.state.active]: Object.assign({}, this.state.boxes[this.state.active], {\n\t\t\t\t...this.state.boxes[this.state.active],\n\t\t\t\tx: data.x,\n\t\t\t\ty: data.y,\n\t\t\t\trotateAngle: data.rotateAngle\n\t\t\t})\n\t\t});\n\n\t\tthis.setState({\n\t\t\tboxes\n\t\t});\n\n\t\tthis.props.onRotate && this.props.onRotate(e, data);\n\t}\n\n\trotateEndHandler(e, data) {\n\t\tlet newData = Object.assign({}, data);\n\t\tif (this.state.boxes[this.state.active].metadata) {\n\t\t\tnewData.metadata = this.state.boxes[this.state.active].metadata;\n\t\t}\n\t\tthis.props.onRotateEnd && this.props.onRotateEnd(e, newData);\n\t}\n\n\tkeyUpHandler(e, data) {\n\t\tlet newData = Object.assign({}, data);\n\t\tif (this.state.boxes[data.node.id].metadata) {\n\t\t\tnewData.metadata = this.state.boxes[data.node.id].metadata;\n\t\t}\n\n\t\tlet boxes = null;\n\t\tlet guides = null;\n\t\tif (data.type && data.type === 'group') {\n\t\t\tboxes = {};\n\t\t\tfor (let box in this.state.boxes) {\n\t\t\t\tif (this.state.boxes.hasOwnProperty(box)) {\n\t\t\t\t\tif (this.state.activeBoxes.includes(box)) {\n\t\t\t\t\t\tboxes[box] = Object.assign({}, this.state.boxes[box], {\n\t\t\t\t\t\t\tx: this.state.boxes[box].x + (data.changedValues.x || 0),\n\t\t\t\t\t\t\ty: this.state.boxes[box].y + (data.changedValues.y || 0),\n\t\t\t\t\t\t\tleft: this.state.boxes[box].left + (data.changedValues.left || 0),\n\t\t\t\t\t\t\ttop: this.state.boxes[box].top + (data.changedValues.top || 0),\n\t\t\t\t\t\t\theight: this.state.boxes[box].height + (data.changedValues.height || 0),\n\t\t\t\t\t\t\twidth: this.state.boxes[box].width + (data.changedValues.width || 0)\n\t\t\t\t\t\t});\n\t\t\t\t\t}  else if (box === 'box-ms') {\n\t\t\t\t\t\tboxes[box] = Object.assign({}, data);\n\t\t\t\t\t\tdelete boxes[box].deltaX;\n\t\t\t\t\t\tdelete boxes[box].deltaY;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tboxes[box] = this.state.boxes[box];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tguides = Object.keys(this.state.guides).map(guide => {\n\t\t\t\tif (this.state.activeBoxes.includes(guide)) {\n\t\t\t\t\treturn Object.assign({}, this.state.guides[guide], {\n\t\t\t\t\t\tx: calculateGuidePositions(boxes[guide], 'x'),\n\t\t\t\t\t\ty: calculateGuidePositions(boxes[guide], 'y')\n\t\t\t\t\t})\n\t\t\t\t}\n\n\t\t\t\treturn this.state.guides[guide];\n\t\t\t});\n\t\t} else {\n\t\t\tboxes = Object.assign({}, this.state.boxes, {\n\t\t\t\t[data.node.id]: Object.assign({}, this.state.boxes[data.node.id], {\n\t\t\t\t\tx: data.x,\n\t\t\t\t\ty: data.y,\n\t\t\t\t\tleft: data.left,\n\t\t\t\t\ttop: data.top,\n\t\t\t\t\twidth: data.width,\n\t\t\t\t\theight: data.height\n\t\t\t\t})\n\t\t\t});\n\n\t\t\tguides = Object.assign({}, this.state.guides, {\n\t\t\t\t[data.node.id]: Object.assign({}, this.state.guides[data.node.id], {\n\t\t\t\t\tx: calculateGuidePositions(boxes[data.node.id], 'x'),\n\t\t\t\t\ty: calculateGuidePositions(boxes[data.node.id], 'y')\n\t\t\t\t})\n\t\t\t});\n\t\t}\n\n\t\tthis.setState({\n\t\t\tboxes,\n\t\t\tguides,\n\t\t\tresizing: false,\n\t\t\tguidesActive: false\n\t\t}, () => {\n\t\t\tif (data.type && data.type === 'group') {\n\t\t\t\tnewData.selections = this.state.activeBoxes.map(box => {\n\t\t\t\t\treturn Object.assign({}, this.state.boxes[box]);\n\t\t\t\t});\n\t\t\t}\n\t\n\t\t\tthis.props.onKeyUp && this.props.onKeyUp(e, newData);\n\t\t});\n\t}\n\n\tkeyEndHandler(e, data) {\n\t\tlet newData = Object.assign({}, data);\n\t\tif (this.state.boxes[this.state.active].metadata) {\n\t\t\tnewData.metadata = this.state.boxes[this.state.active].metadata;\n\t\t}\n\n\t\tif (data.type && data.type === 'group') {\n\t\t\tnewData.selections = this.state.activeBoxes.map(box => {\n\t\t\t\treturn Object.assign({}, this.state.boxes[box]);\n\t\t\t});\n\t\t}\n\n\t\tthis.props.onKeyEnd && this.props.onKeyEnd(e, newData);\n\t\t\n\n\t\tthis.setState({\n\t\t\tresizing: false,\n\t\t\tdragging: false,\n\t\t\tguidesActive: false\n\t\t});\n\t}\n\n\trender() {\n\t\tconst { active, boxes, activeBoxes, guides } = this.state;\n\t\tconst areMultipleBoxesSelected = activeBoxes.length > 1;\n\n\t\t// Create the draggable boxes from the position data\n\t\tconst draggableBoxes = Object.keys(boxes).map(box => {\n\t\t\tconst position = boxes[box];\n\t\t\tconst id = boxes[box].id || box;\n\t\t\tconst identifier = boxes[box].identifier;  // option index for caption\n\t\t\tconst isLayerLocked = boxes[box].isLayerLocked; \n\t\t\tconst isSelected = (active === id || activeBoxes.includes(id));\n\t\t\treturn <Box\n\t\t\t\t{...this.props}\n\t\t\t\tareMultipleBoxesSelected={areMultipleBoxesSelected}\n\t\t\t\tboundingBox={this.state.boundingBox}\n\t\t\t\tdidDragOrResizeHappen={this.didDragOrResizeHappen}\n\t\t\t\tdragging={this.state.dragging}\n\t\t\t\tgetBoundingBoxElement={this.getBoundingBoxElement}\n\t\t\t\tid={id}\n\t\t\t\tidentifier={identifier}\n\t\t\t\tisSelected={isSelected}\n\t\t\t\tisShiftKeyActive={this.state.isShiftKeyActive}\n\t\t\t\tkey={id}\n\t\t\t\tonDragStart={this.dragStartHandler}\n\t\t\t\tonDrag={this.dragHandler}\n\t\t\t\tonDragEnd={this.dragEndHandler}\n\t\t\t\tonKeyUp={this.keyUpHandler}\n\t\t\t\tonKeyEnd={this.keyEndHandler}\n\t\t\t\tonResizeStart={this.resizeStartHandler}\n\t\t\t\tonResize={this.resizeHandler}\n\t\t\t\tonResizeEnd={this.resizeEndHandler}\n\t\t\t\tonRotateStart={this.rotateStartHandler}\n\t\t\t\tonRotate={this.rotateHandler}\n\t\t\t\tonRotateEnd={this.rotateEndHandler}\n\t\t\t\tposition={position}\n\t\t\t\tresizing={this.state.resizing}\n\t\t\t\trotating={this.state.rotating}\n\t\t\t\tselectBox={this.selectBox}\n\t\t\t\tsetDragOrResizeState={this.setDragOrResizeState}\n\t\t\t\tisLayerLocked={isLayerLocked}\n\t\t\t\tpreventShortcutEvents={this.state.preventShortcutEvents}\n\t\t\t\tsetPreventShortcutEvents={this.setPreventShortcutEvents}\n\t\t\t\ttoggleHover={this.props.toggleHover}\n\t\t\t\toverRideStyles={this.props.overrideHover}\n\t\t\t\toverRideSelected = {this.props.overrideSelected}\n\t\t\t/>;\n\t\t});\n\n\t\t// Create a guide(s) when the following conditions are met:\n\t\t// 1. A box aligns with another (top, center or bottom)\n\t\t// 2. An edge of a box touches any of the edges of another box\n\t\t// 3. A box aligns vertically or horizontally with the bounding box\n\t\t// TODO: Use a functional component to generate the guides for both axis instead of duplicating code.\n\t\tlet xAxisGuides = null;\n\t\tlet yAxisGuides = null;\n\t\tif (guides) {\n\t\t\txAxisGuides = Object.keys(guides).reduce((result, box) => {\n\t\t\t\tconst guideClassNames = this.state.guidesActive ? `${styles.guide} ${styles.xAxis} ${styles.active}` : `${styles.guide} ${styles.xAxis}`;\n\t\t\t\tlet xAxisGuidesForCurrentBox = null;\n\t\t\t\tif (guides[box] && guides[box].x) {\n\t\t\t\t\txAxisGuidesForCurrentBox = guides[box].x.map((position, index) => {\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tthis.state.active &&\n\t\t\t\t\t\t\tthis.state.active === box &&\n\t\t\t\t\t\t\tthis.state.match &&\n\t\t\t\t\t\t\tthis.state.match.x &&\n\t\t\t\t\t\t\tthis.state.match.x.intersection &&\n\t\t\t\t\t\t\tthis.state.match.x.intersection === position\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\treturn <div key={`${position}-${index}`} className={guideClassNames} style={{ left: position }} />;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\treturn result.concat(xAxisGuidesForCurrentBox);\n\t\t\t}, []);\n\n\t\t\tyAxisGuides = Object.keys(guides).reduce((result, box) => {\n\t\t\t\tconst guideClassNames = this.state.guidesActive ? `${styles.guide} ${styles.yAxis} ${styles.active}` : `${styles.guide} ${styles.yAxis}`;\n\t\t\t\tlet yAxisGuidesForCurrentBox = null;\n\t\t\t\tif (guides[box] && guides[box].y) {\n\t\t\t\t\tyAxisGuidesForCurrentBox = guides[box].y.map((position, index) => {\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tthis.state.active &&\n\t\t\t\t\t\t\tthis.state.active === box &&\n\t\t\t\t\t\t\tthis.state.match &&\n\t\t\t\t\t\t\tthis.state.match.y &&\n\t\t\t\t\t\t\tthis.state.match.y.intersection &&\n\t\t\t\t\t\t\tthis.state.match.y.intersection === position\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\treturn <div key={`${position}-${index}`} className={guideClassNames} style={{ top: position }} />\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\treturn result.concat(yAxisGuidesForCurrentBox);\n\t\t\t}, []);\n\t\t}\n\n\t\treturn <div ref={this.boundingBox} className={`${styles.boundingBox} ${this.props.className}`} style={this.props.style}>\n\t\t\t{draggableBoxes}\n\t\t\t{xAxisGuides}\n\t\t\t{yAxisGuides}\n\t\t</div>;\n\t}\n}\n\n// Typechecking props for AlignmentGuides component\nAlignmentGuides.propTypes = {\n\tboundToParent: PropTypes.bool,\n\tboxes: PropTypes.array.isRequired,\n\tboxStyle: PropTypes.object,\n\tclassName: PropTypes.string,\n\tdrag: PropTypes.bool,\n\tkeybindings: PropTypes.bool,\n\tonDragStart: PropTypes.func,\n\tonDrag: PropTypes.func,\n\tonDragEnd: PropTypes.func,\n\tonKeyUp: PropTypes.func,\n\tonKeyEnd: PropTypes.func,\n\tonResizeStart: PropTypes.func,\n\tonResize: PropTypes.func,\n\tonResizeEnd: PropTypes.func,\n\tonRotateStart: PropTypes.func,\n\tonRotate: PropTypes.func,\n\tonRotateEnd: PropTypes.func,\n\tonSelect: PropTypes.func,\n\tonUnselect: PropTypes.func,\n\tresize: PropTypes.bool,\n\trotate: PropTypes.bool,\n\tresolution: PropTypes.object,\n\tsnap: PropTypes.bool,\n\tstyle: PropTypes.object\n};\n\n// Default values for props\nAlignmentGuides.defaultProps = {\n\tboundToParent: true,\n\tboxes: [],\n\tdrag: true,\n\tresize: true,\n\trotate: true,\n\tsnap: true\n};\n\nexport default AlignmentGuides;","'use strict';\n\n/*\n* React Alignment Guides v1.0.0-rc.3\n*/\n\n// import React from 'react';\n// import ReactDOM from 'react-dom';\nimport AlignmentGuides from './AlignmentGuides';\n\nexport default AlignmentGuides;\n\n// ReactDOM.render(\n// \t<AlignmentGuides />,\n// \tdocument.getElementById('root')\n// );"],"names":["global","calculateGuidePositions","dimensions","axis","start","left","middle","parseInt","width","end","top","height","proximityListener","active","allGuides","xAxisGuidesForActiveBox","x","yAxisGuidesForActiveBox","y","xAxisAllGuides","getAllGuidesForGivenAxisExceptActiveBox","yAxisAllGuides","xAxisMatchedGuides","checkValueProximities","yAxisMatchedGuides","allMatchedGuides","proximity","activeBoxGuides","guidesForActiveBoxAlongGivenAxis","result","Object","keys","map","box","currentBoxGuidesAlongGivenAxis","filter","guides","undefined","activeBoxGuidesInOneAxis","allOtherGuidesInOneAxis","intersection","matchedArray","snapThreshold","index","length","index2","index3","diff","Math","abs","value","activeBoxIndex","matchedBoxIndex","calculateBoundariesForDrag","bounds","boundingBox","calculateBoundariesForResize","widthDifference","heightDifference","getOffsetCoordinates","node","offsetLeft","offsetTop","offsetWidth","offsetHeight","getLength","sqrt","topLeftToCenter","rotateAngle","cx","cy","centerToTopLeft","setWidthAndDeltaW","deltaW","minWidth","expectedWidth","setHeightAndDeltaH","deltaH","minHeight","expectedHeight","getNewStyle","type","rect","widthFlag","heightFlag","widthAndDeltaW","heightAndDeltaH","cos","sin","position","size","getAngle","x1","y1","x2","y2","dot","det","angle","atan2","PI","getNewCoordinates","tempX","tempY","cosine","sine","rotatedX","rotatedY","degToRadian","deg","getMultipleSelectionCoordinates","allBoxes","activeBoxes","selectedBoxes","hasOwnProperty","includes","push","reduce","min","b","max","RESIZE_CORNERS","ROTATE_HANDLES","DRAG_THRESHOLD","PREVENT_DEFAULT_KEYS","Box","props","React","createRef","coordinates","didDragHappen","didResizeHappen","selectBox","bind","unHoverBox","hoverBox","onDragStart","shortcutHandler","onShortcutKeyUp","keyDownHandler","throttle","e","onResizeStart","onRotateStart","getCoordinatesWrapperWidth","state","callKeyEnd","didDragOrResizeHappen","current","focus","target","hasAttribute","classList","add","toggleHover","remove","drag","id","indexOf","stopPropagation","getBoundingBoxElement","startingPosition","getBoundingClientRect","toJSON","boundingBoxPosition","data","setDragOrResizeState","assign","deltaX","clientX","deltaY","clientY","onDrag","boundingBoxDimensions","boxWidth","boxHeight","currentPosition","boundToParent","onDragEnd","document","removeEventListener","addEventListener","preventShortcutEvents","areMultipleBoxesSelected","isSelected","key","preventDefault","DELTA","shiftKey","newValues","changedValues","setState","ctrlKey","metaKey","onKeyUp","keysAllowed","onKeyEnd","resize","style","zIndex","startX","startY","startingDimensions","ratio","sign","onResize","alpha","deltaL","beta","replace","tempPosition","onResizeEnd","rotate","center","startVector","startAngle","newCoordinates","onRotate","rotateVector","round","onRotateEnd","prevProps","boxStyle","identifier","isShiftKeyActive","resolution","isNaN","dashedCentreNodes","xFactor","yFactor","boxClassNames","overRideStyles","styles","overRideSelected","selected","groupElement","boxStyles","transform","pointerEvents","isLayerLocked","setPreventShortcutEvents","dimensions_style","handle","className","resizeCorners","rotateHandle","Component","propTypes","PropTypes","bool","func","string","keybindings","object","isRequired","AlignmentGuides","boxes","dragging","guidesActive","match","resizing","rotating","activeBoxSnappedPosition","setShiftKeyState","unSelectBox","dragStartHandler","dragHandler","dragEndHandler","resizeStartHandler","resizeHandler","resizeEndHandler","rotateStartHandler","rotateHandler","rotateEndHandler","keyUpHandler","keyEndHandler","startingPositions","forEach","selections","window","val","boxDimensions","metadata","activeBox","onSelect","parentNode","isValidUnselect","onUnselect","newData","guide","snap","newActiveBoxLeft","newActiveBoxTop","activeBoxProximityIndex","matchedBoxProximityIndex","newBoxes","draggableBoxes","overrideHover","overrideSelected","xAxisGuides","yAxisGuides","guideClassNames","xAxis","xAxisGuidesForCurrentBox","concat","yAxis","yAxisGuidesForCurrentBox","array","defaultProps"],"mappings":"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"}