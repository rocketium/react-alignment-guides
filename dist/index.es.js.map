{"version":3,"file":"index.es.js","sources":["../src/utils/helpers.js","../src/utils/constants.js","../node_modules/style-inject/dist/style-inject.es.js","../src/Box.js","../src/AlignmentGuides.js","../src/index.js"],"sourcesContent":["export const calculateGuidePositions = (dimensions, axis) => {\n\tif (axis === 'x') {\n\t\tconst start = dimensions.left;\n\t\tconst middle = dimensions.left + parseInt(dimensions.width / 2, 10);\n\t\tconst end = dimensions.left + dimensions.width;\n\n\t\treturn [ start, middle, end ];\n\t} else {\n\t\tconst start = dimensions.top;\n\t\tconst middle = dimensions.top + parseInt(dimensions.height / 2, 10);\n\t\tconst end = dimensions.top + dimensions.height;\n\n\t\treturn [ start, middle, end ];\n\t}\n};\n\nexport const proximityListener = (active, allGuides) => {\n\tconst xAxisGuidesForActiveBox = allGuides[active].x;\n\tconst yAxisGuidesForActiveBox = allGuides[active].y;\n\n\tconst xAxisAllGuides = getAllGuidesForGivenAxisExceptActiveBox(allGuides, xAxisGuidesForActiveBox, 'x');\n\tconst yAxisAllGuides = getAllGuidesForGivenAxisExceptActiveBox(allGuides, yAxisGuidesForActiveBox, 'y');\n\tconst xAxisMatchedGuides = checkValueProximities(xAxisGuidesForActiveBox, xAxisAllGuides);\n\tconst yAxisMatchedGuides = checkValueProximities(yAxisGuidesForActiveBox, yAxisAllGuides);\n\n\tconst allMatchedGuides = {};\n\n\tif (xAxisMatchedGuides.proximity) {\n\t\tallMatchedGuides.x = {\n\t\t\t...xAxisMatchedGuides,\n\t\t\tactiveBoxGuides: xAxisGuidesForActiveBox\n\t\t};\n\t}\n\n\tif (yAxisMatchedGuides.proximity) {\n\t\tallMatchedGuides.y = {\n\t\t\t...yAxisMatchedGuides,\n\t\t\tactiveBoxGuides: yAxisGuidesForActiveBox,\n\t\t};\n\t}\n\n\treturn allMatchedGuides;\n};\n\nexport const getAllGuidesForGivenAxisExceptActiveBox = (allGuides, guidesForActiveBoxAlongGivenAxis, axis) => {\n\tconst result = Object.keys(allGuides).map(box => {\n\t\tif (allGuides && allGuides[box]) {\n\t\t\tconst currentBoxGuidesAlongGivenAxis = allGuides[box][axis];\n\t\t\tif (currentBoxGuidesAlongGivenAxis !== guidesForActiveBoxAlongGivenAxis) {\n\t\t\t\treturn currentBoxGuidesAlongGivenAxis;\n\t\t\t}\n\t\t}\n\t});\n\n\treturn result.filter(guides => guides !== undefined);\n};\n\nexport const checkValueProximities = (activeBoxGuidesInOneAxis, allOtherGuidesInOneAxis) => {\n\tlet proximity = null;\n\tlet intersection = null;\n\tlet matchedArray = [];\n\tconst snapThreshold = 5;\n\tfor (let index = 0; index < allOtherGuidesInOneAxis.length; index += 1) {\n\t\tlet index2 = 0;\n\t\tlet index3 = 0;\n\n\t\twhile (index2 < activeBoxGuidesInOneAxis.length && index3 < allOtherGuidesInOneAxis[index].length) {\n\t\t\tconst diff = Math.abs(activeBoxGuidesInOneAxis[index2] - allOtherGuidesInOneAxis[index][index3]);\n\t\t\tif (diff <= snapThreshold) {\n\t\t\t\tproximity = { value: diff, activeBoxIndex: index2, matchedBoxIndex: index3 };\n\t\t\t\tmatchedArray = allOtherGuidesInOneAxis[index];\n\t\t\t\tintersection = allOtherGuidesInOneAxis[index][index3];\n\t\t\t}\n\n\t\t\tif (activeBoxGuidesInOneAxis[index2] < allOtherGuidesInOneAxis[index][index3]) {\n\t\t\t\tindex2 += 1;\n\t\t\t} else {\n\t\t\t\tindex3 += 1;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn { matchedArray, proximity, intersection };\n};\n\nexport const calculateBoundariesForDrag = (left, top, width, height, bounds) => {\n\tconst boundingBox = { ...bounds };\n\tif (left >= 0 && left <= boundingBox.width - width && top >= 0 && top <= boundingBox.height - height) {\n\t\treturn {\n\t\t\tleft,\n\t\t\ttop\n\t\t};\n\t} else if (left >= 0 && left <= boundingBox.width - width) {\n\t\treturn {\n\t\t\tleft,\n\t\t\ttop: top < 0 ? 0 : (boundingBox.height - height)\n\t\t};\n\t} else if (top >= 0 && top <= boundingBox.height - height) {\n\t\treturn {\n\t\t\tleft: left < 0 ? 0 : (boundingBox.width - width),\n\t\t\ttop\n\t\t};\n\t} else {\n\t\treturn {\n\t\t\tleft: left < 0 ? 0 : (boundingBox.width - width),\n\t\t\ttop: top < 0 ? 0 : (boundingBox.height - height)\n\t\t};\n\t}\n};\n\n// Calculate boundaries for boxes given an output resolution\nexport const calculateBoundariesForResize = (left, top, width, height, bounds) => {\n\tconst boundingBox = { ...bounds };\n\tlet widthDifference = 0;\n\tlet heightDifference = 0;\n\tif (left >= 0 && left + width <= boundingBox.width && top >= 0 && top + height <= boundingBox.height) {\n\t\treturn {\n\t\t\tleft,\n\t\t\ttop,\n\t\t\twidth,\n\t\t\theight\n\t\t};\n\t} else if (left < 0 && top < 0) {\n\t\treturn {\n\t\t\tleft: 0,\n\t\t\ttop: 0,\n\t\t\twidth: width + left <= boundingBox.width ? width + left : boundingBox.width,\n\t\t\theight: height + top <= boundingBox.height ? height + top : boundingBox.height\n\t\t};\n\t} else if (left < 0) {\n\t\treturn {\n\t\t\tleft: 0,\n\t\t\ttop,\n\t\t\twidth: width + left <= boundingBox.width ? width + left : boundingBox.width,\n\t\t\theight: height + top <= boundingBox.height ? height : boundingBox.height - top\n\t\t};\n\t} else if (top < 0) {\n\t\treturn {\n\t\t\tleft,\n\t\t\ttop: 0,\n\t\t\twidth: width + left <= boundingBox.width ? width : boundingBox.width - left,\n\t\t\theight: height + top <= boundingBox.height ? height + top : boundingBox.height\n\t\t};\n\t} else if (left >= 0 && left + width <= boundingBox.width) {\n\t\theightDifference = (top + height) - boundingBox.height;\n\t\treturn {\n\t\t\tleft,\n\t\t\ttop: top < 0 ? 0 : top,\n\t\t\twidth,\n\t\t\theight: height - heightDifference\n\t\t};\n\t} else if (top >= 0 && top + height <= boundingBox.height) {\n\t\twidthDifference = (left + width) - boundingBox.width;\n\t\treturn {\n\t\t\tleft: left < 0 ? 0 : left,\n\t\t\ttop,\n\t\t\twidth: width - widthDifference,\n\t\t\theight\n\t\t};\n\t} else {\n\t\twidthDifference = (left + width) - boundingBox.width;\n\t\theightDifference = (top + height) - boundingBox.height;\n\t\treturn {\n\t\t\tleft: left < 0 ? 0 : left,\n\t\t\ttop: top < 0 ? 0 : top,\n\t\t\twidth: width - widthDifference,\n\t\t\theight: height - heightDifference\n\t\t};\n\t}\n};\n\nexport const getOffsetCoordinates = (node) => {\n\treturn {\n\t\tx: node.offsetLeft,\n\t\ty: node.offsetTop,\n\t\ttop: node.offsetTop,\n\t\tleft: node.offsetLeft,\n\t\twidth: node.offsetWidth,\n\t\theight: node.offsetHeight\n\t};\n};\n\nexport const getLength = (x, y) => Math.sqrt(x * x + y * y);\n\nexport const topLeftToCenter = ({ left, top, width, height, rotateAngle }) => ({\n\tcx: left + width / 2,\n\tcy: top + height / 2,\n\twidth,\n\theight,\n\trotateAngle\n});\n\nexport const centerToTopLeft = ({ cx, cy, width, height, rotateAngle }) => ({\n\ttop: cy - height / 2,\n\tleft: cx - width / 2,\n\twidth,\n\theight,\n\trotateAngle\n});\n\nconst setWidthAndDeltaW = (width, deltaW, minWidth) => {\n\tconst expectedWidth = width + deltaW\n\tif (expectedWidth > minWidth) {\n\t\twidth = expectedWidth\n\t} else {\n\t\tdeltaW = minWidth - width\n\t\twidth = minWidth\n\t}\n\treturn { width, deltaW }\n}\n\nconst setHeightAndDeltaH = (height, deltaH, minHeight) => {\n\tconst expectedHeight = height + deltaH\n\tif (expectedHeight > minHeight) {\n\t\theight = expectedHeight\n\t} else {\n\t\tdeltaH = minHeight - height\n\t\theight = minHeight\n\t}\n\treturn { height, deltaH }\n}\n\nexport const getNewStyle = (type, rect, deltaW, deltaH, minWidth, minHeight) => {\n\tlet { width, height, cx, cy, rotateAngle } = rect;\n\tconst widthFlag = width < 0 ? -1 : 1;\n\tconst heightFlag = height < 0 ? -1 : 1;\n\twidth = Math.abs(width)\n\theight = Math.abs(height)\n\tswitch (type) {\n\t\tcase 'tr': {\n\t\t\tdeltaH = -deltaH\n\t\t\tconst widthAndDeltaW = setWidthAndDeltaW(width, deltaW, minWidth)\n\t\t\twidth = widthAndDeltaW.width\n\t\t\tdeltaW = widthAndDeltaW.deltaW\n\t\t\tconst heightAndDeltaH = setHeightAndDeltaH(height, deltaH, minHeight)\n\t\t\theight = heightAndDeltaH.height\n\t\t\tdeltaH = heightAndDeltaH.deltaH\n\t\t\tcx += deltaW / 2 * cos(rotateAngle) + deltaH / 2 * sin(rotateAngle)\n\t\t\tcy += deltaW / 2 * sin(rotateAngle) - deltaH / 2 * cos(rotateAngle)\n\t\t\tbreak\n\t\t}\n\t\tcase 'br': {\n\t\t\tconst widthAndDeltaW = setWidthAndDeltaW(width, deltaW, minWidth)\n\t\t\twidth = widthAndDeltaW.width\n\t\t\tdeltaW = widthAndDeltaW.deltaW\n\t\t\tconst heightAndDeltaH = setHeightAndDeltaH(height, deltaH, minHeight)\n\t\t\theight = heightAndDeltaH.height\n\t\t\tdeltaH = heightAndDeltaH.deltaH\n\t\t\tcx += deltaW / 2 * cos(rotateAngle) - deltaH / 2 * sin(rotateAngle)\n\t\t\tcy += deltaW / 2 * sin(rotateAngle) + deltaH / 2 * cos(rotateAngle)\n\t\t\tbreak\n\t\t}\n\t\tcase 'bl': {\n\t\t\tdeltaW = -deltaW\n\t\t\tconst widthAndDeltaW = setWidthAndDeltaW(width, deltaW, minWidth)\n\t\t\twidth = widthAndDeltaW.width\n\t\t\tdeltaW = widthAndDeltaW.deltaW\n\t\t\tconst heightAndDeltaH = setHeightAndDeltaH(height, deltaH, minHeight)\n\t\t\theight = heightAndDeltaH.height\n\t\t\tdeltaH = heightAndDeltaH.deltaH\n\t\t\tcx -= deltaW / 2 * cos(rotateAngle) + deltaH / 2 * sin(rotateAngle)\n\t\t\tcy -= deltaW / 2 * sin(rotateAngle) - deltaH / 2 * cos(rotateAngle)\n\t\t\tbreak\n\t\t}\n\t\tcase 'tl': {\n\t\t\tdeltaW = -deltaW\n\t\t\tdeltaH = -deltaH\n\t\t\tconst widthAndDeltaW = setWidthAndDeltaW(width, deltaW, minWidth)\n\t\t\twidth = widthAndDeltaW.width\n\t\t\tdeltaW = widthAndDeltaW.deltaW\n\t\t\tconst heightAndDeltaH = setHeightAndDeltaH(height, deltaH, minHeight)\n\t\t\theight = heightAndDeltaH.height\n\t\t\tdeltaH = heightAndDeltaH.deltaH\n\t\t\tcx -= deltaW / 2 * cos(rotateAngle) - deltaH / 2 * sin(rotateAngle)\n\t\t\tcy -= deltaW / 2 * sin(rotateAngle) + deltaH / 2 * cos(rotateAngle)\n\t\t\tbreak\n\t\t}\n\t\tcase 'ct': {\n\t\t\tdeltaW = 0;\n\t\t\tdeltaH = -deltaH;\n\t\t\tconst widthAndDeltaW = setWidthAndDeltaW(width, deltaW, minWidth)\n\t\t\twidth = widthAndDeltaW.width\n\t\t\tdeltaW = widthAndDeltaW.deltaW\n\t\t\tconst heightAndDeltaH = setHeightAndDeltaH(height, deltaH, minHeight)\n\t\t\theight = heightAndDeltaH.height\n\t\t\tdeltaH = heightAndDeltaH.deltaH\n\t\t\tcx -= - deltaH / 2 * sin(rotateAngle)\n\t\t\tcy -= + deltaH / 2 * cos(rotateAngle)\n\t\t\tbreak\n\t\t}\n\t\tcase 'cb': {\n\t\t\tdeltaW = 0;\n\t\t\tconst widthAndDeltaW = setWidthAndDeltaW(width, deltaW, minWidth)\n\t\t\twidth = widthAndDeltaW.width\n\t\t\tdeltaW = widthAndDeltaW.deltaW\n\t\t\tconst heightAndDeltaH = setHeightAndDeltaH(height, deltaH, minHeight)\n\t\t\theight = heightAndDeltaH.height\n\t\t\tdeltaH = heightAndDeltaH.deltaH\n\t\t\tcx -= deltaH / 2 * sin(rotateAngle)\n\t\t\tcy -= - deltaH / 2 * cos(rotateAngle)\n\t\t\tbreak\n\t\t}\n\t\tcase 'cl': {\n\t\t\tdeltaH = 0;\n\t\t\tdeltaW = -deltaW;\n\t\t\tconst widthAndDeltaW = setWidthAndDeltaW(width, deltaW, minWidth)\n\t\t\twidth = widthAndDeltaW.width\n\t\t\tdeltaW = widthAndDeltaW.deltaW\n\t\t\tconst heightAndDeltaH = setHeightAndDeltaH(height, deltaH, minHeight)\n\t\t\theight = heightAndDeltaH.height\n\t\t\tdeltaH = heightAndDeltaH.deltaH\n\t\t\tcx -= deltaW / 2 * cos(rotateAngle) - deltaH / 2 * sin(rotateAngle)\n\t\t\tcy -= deltaW / 2 * sin(rotateAngle) + deltaH / 2 * cos(rotateAngle)\n\t\t\tbreak\n\t\t}\n\t\tcase 'cr': {\n\t\t\tdeltaH = 0;\n\t\t\tconst widthAndDeltaW = setWidthAndDeltaW(width, deltaW, minWidth)\n\t\t\twidth = widthAndDeltaW.width\n\t\t\tdeltaW = widthAndDeltaW.deltaW\n\t\t\tconst heightAndDeltaH = setHeightAndDeltaH(height, deltaH, minHeight)\n\t\t\theight = heightAndDeltaH.height\n\t\t\tdeltaH = heightAndDeltaH.deltaH\n\t\t\tcx += deltaW / 2 * cos(rotateAngle)\n\t\t\tcy += deltaW / 2 * sin(rotateAngle)\n\t\t\tbreak\n\t\t}\n\t}\n\n\treturn {\n\t\tposition: {\n\t\t\tcx,\n\t\t\tcy\n\t\t},\n\t\tsize: {\n\t\t\twidth: width * widthFlag,\n\t\t\theight: height * heightFlag\n\t\t}\n\t}\n}\n\n// Rotate helpers\nexport const getAngle = ({ x: x1, y: y1 }, { x: x2, y: y2 }) => {\n\tconst dot = x1 * x2 + y1 * y2;\n\tconst det = x1 * y2 - y1 * x2;\n\tconst angle = Math.atan2(det, dot) / Math.PI * 180;\n\treturn (angle + 360) % 360;\n};\n\nexport const getNewCoordinates = (rect) => {\n\tconst { x, y, width, height, rotateAngle, node } = rect;\n\tconst cx = x + (width / 2);\n\tconst cy = y + (height / 2);\n\n\tconst tempX = x - cx;\n\tconst tempY = y - cy;\n\tconst cosine = cos(rotateAngle);\n\tconst sine = sin(rotateAngle);\n\n\tconst rotatedX = cx + (tempX * cosine - tempY * sine);\n\tconst rotatedY = cy + (tempX * sine + tempY * cosine);\n\n\treturn { x: rotatedX, y: rotatedY, top: rotatedX, left: rotatedY, width, height, rotateAngle, node };\n};\n\nexport const degToRadian = (deg) => deg * Math.PI / 180;\nconst cos = (deg) => Math.cos(degToRadian(deg));\nconst sin = (deg) => Math.sin(degToRadian(deg));\n\n// Multiple selection helpers\nexport const getMultipleSelectionCoordinates = (allBoxes, activeBoxes) => {\n\tlet selectedBoxes = [];\n\tfor (let box in allBoxes) {\n\t\tif (allBoxes.hasOwnProperty(box) && activeBoxes.includes(box)) {\n\t\t\tselectedBoxes.push(allBoxes[box]);\n\t\t}\n\t}\n\tif (selectedBoxes.length === 0) {\n\t\treturn {\n\t\t\tx: 0,\n\t\t\ty: 0,\n\t\t\ttop: 0,\n\t\t\tleft: 0,\n\t\t\twidth: 0,\n\t\t\theight: 0\n\t\t};\n\t}\n\n\n\tconst x = selectedBoxes.reduce((min, b) => b.x < min ? b.x : min, selectedBoxes[0].x);\n\tconst y = selectedBoxes.reduce((min, b) => b.y < min ? b.y : min, selectedBoxes[0].y);\n\tconst width = selectedBoxes.reduce((max, b) => b.x + b.width > max ? b.x + b.width : max, (selectedBoxes[0].x + selectedBoxes[0].width)) - x;\n\tconst height = selectedBoxes.reduce((max, b) => b.y + b.height > max ? b.y + b.height : max, (selectedBoxes[0].y + selectedBoxes[0].height)) - y;\n\n\treturn { x, y, top: y, left: x, width, height };\n};\n\nexport const getGroupCoordinates = (allBoxes, groupedBoxes) => {\n\tlet selectedBoxes = [];\n\tfor (let box in allBoxes) {\n\t\tif (allBoxes.hasOwnProperty(box) && groupedBoxes.includes(allBoxes?.[box]?.metadata?.captionIndex)) {\n\t\t\tselectedBoxes.push(allBoxes[box]);\n\t\t}\n\t}\n\tif (selectedBoxes.length === 0) {\n\t\treturn {\n\t\t\tx: 0,\n\t\t\ty: 0,\n\t\t\ttop: 0,\n\t\t\tleft: 0,\n\t\t\twidth: 0,\n\t\t\theight: 0\n\t\t};\n\t}\n\n\n\tconst x = selectedBoxes.reduce((min, b) => b.x < min ? b.x : min, selectedBoxes[0].x);\n\tconst y = selectedBoxes.reduce((min, b) => b.y < min ? b.y : min, selectedBoxes[0].y);\n\tconst width = selectedBoxes.reduce((max, b) => b.x + b.width > max ? b.x + b.width : max, (selectedBoxes[0].x + selectedBoxes[0].width)) - x;\n\tconst height = selectedBoxes.reduce((max, b) => b.y + b.height > max ? b.y + b.height : max, (selectedBoxes[0].y + selectedBoxes[0].height)) - y;\n\n\treturn { x, y, top: y, left: x, width, height };\n};\nexport const getBoxMetadata = () => {};\n\nconst getResizeSVGCursor = (angle) => {\n\treturn `data:image/svg+xml;utf8,<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"32px\" height=\"32px\" viewBox=\"0 0 32 32\" ><path d=\"M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z\" stroke-linejoin=\"round\" stroke-width=\"1.2\" fill=\"black\" stroke=\"white\" style=\"transform:rotate(${angle}deg);transform-origin: 16px 16px\"></path></svg>`;\n}\n\nexport const getResizeCursorCSS = (handle, degree = 0) => {\n\tlet angle = degree;\n\n\tif (handle === 'cr' || handle === 'cl') {\n\t\tangle += 90;\n\t} else if (handle === 'tr' || handle === 'bl') {\n\t\tangle += 45;\n\t} else if (handle === 'br' || handle === 'tl') {\n\t\tangle -= 45;\n\t}\n\n\tconst cursor = getResizeSVGCursor(angle);\n\n\treturn `url('${cursor}') 16 16, auto`;\n}\nexport const checkGroupChildElementsLocked = (captions) => {\n\tlet isLocked = true;\n\tcaptions?.forEach(caption => {\n\t\tif (!caption.isLayerLocked) {\n\t\t\tisLocked = false;\n\t\t\treturn isLocked;\n\t\t}\n\t});\n\treturn isLocked;\n}","// Key map for changing the position and size of draggable boxes\n// Key map follows the Mousetrap syntax: https://craig.is/killing/mice\nexport const KEY_MAP = {\n\tMOVE_LEFT_1_PX: 'left',\n\tMOVE_RIGHT_1_PX: 'right',\n\tMOVE_UP_1_PX: 'up',\n\tMOVE_DOWN_1_PX: 'down',\n\tMOVE_LEFT_10_PX: 'shift+left',\n\tMOVE_RIGHT_10_PX: 'shift+right',\n\tMOVE_UP_10_PX: 'shift+up',\n\tMOVE_DOWN_10_PX: 'shift+down',\n}\n\n// Positions for resize handles\nexport const RESIZE_CORNERS = ['tr', 'tl', 'br', 'bl', 'ct', 'cl', 'cb', 'cr']\nexport const RESIZE_CORNERS_FOR_NO_HEIGHT = ['tr', 'tl']\nexport const RESIZE_CORNERS_FOR_NO_WIDTH = ['tl', 'bl']\nexport const RESIZE_SIDES = ['ct', 'cl', 'cb', 'cr']\n\n// Positions for rotate handles\nexport const ROTATE_HANDLES = ['tr', 'tl', 'br', 'bl']\n\nexport const GROUP_BOX_PREFIX = 'box-ms-'\n","function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nconst throttle = require('lodash.throttle');\nimport {\n\tcalculateBoundariesForDrag,\n\tcalculateBoundariesForResize,\n\tdegToRadian,\n\tgetAngle,\n\ttopLeftToCenter,\n\tgetLength,\n\tgetNewCoordinates,\n\tgetNewStyle,\n\tgetOffsetCoordinates,\n\tcenterToTopLeft,\n\tgetResizeCursorCSS,\n} from './utils/helpers';\nimport { RESIZE_CORNERS, RESIZE_CORNERS_FOR_NO_HEIGHT, GROUP_BOX_PREFIX, RESIZE_CORNERS_FOR_NO_WIDTH, RESIZE_SIDES, ROTATE_HANDLES } from './utils/constants';\nimport styles from './styles.scss';\nconst DRAG_THRESHOLD = 4;\nconst DEFAULT_SIZE = 10;\nconst DIMENSION_ZERO_OFFSET = -12.5;\nconst PREVENT_DEFAULT_KEYS = ['ArrowRight', 'ArrowLeft', 'ArrowUp', 'ArrowDown'];\n\nclass Box extends Component{\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.box = React.createRef();\n\t\tthis.coordinates = React.createRef();\n\t\tthis.height = React.createRef();\n\t\tthis.callSelectBox = false;\n\t\tthis.didDragHappen = false;\n\t\tthis.didResizeHappen = false;\n\t\tthis.selectBox = this.selectBox.bind(this);\n\t\tthis.unHoverBox = this.unHoverBox.bind(this);\n\t\tthis.hoverBox = this.hoverBox.bind(this);\n\t\tthis.onDragStart = this.onDragStart.bind(this);\n\t\tthis.shortcutHandler = this.shortcutHandler.bind(this);\n\t\tthis.onShortcutKeyUp = this.onShortcutKeyUp.bind(this);\n\t\tthis.keyDownHandler = throttle(e => {\n\t\t\tthis.shortcutHandler(e);\n\t\t}, 300);\n\t\tthis.onResizeStart = this.onResizeStart.bind(this);\n\t\tthis.onRotateStart = this.onRotateStart.bind(this);\n\t\tthis.getCoordinatesWrapperWidth = this.getCoordinatesWrapperWidth.bind(this);\n\t\tthis.handleDoubleClick = this.handleDoubleClick.bind(this);\n\t\tthis.endCropMode = this.endCropMode.bind(this);\n\t\tthis.dragOverBox = this.dragOverBox.bind(this);\n\t\tthis.unDragOverBox = this.unDragOverBox.bind(this);\n\t\tthis.onDropElementBox = this.onDropElementBox.bind(this);\n\t\tthis.filterControls = this.filterControls.bind(this);\n\t\tthis.state = {\n\t\t\tcallKeyEnd: false\n\t\t};\n\t}\n\n\tendCropMode( data ) {\n\t\tconst {position, metadata} = this.props;\n\t\tdata.newBoxData = {\n\t\t\tx: position.left + data.boxTranslateX,\n\t\t\ty: position.top + data.boxTranslateY,\n\t\t\ttop: position.top + data.boxTranslateY,\n\t\t\tleft: position.left + data.boxTranslateX,\n\t\t\twidth: position.width + data.boxDeltaWidth,\n\t\t\theight: position.height + data.boxDeltaHeight,\n\t\t\tnode: this.box.current,\n\t\t\tmetadata: metadata,\n\t\t\tdeltaX: data.boxTranslateX, //currentPosition.left - startingPosition.left,\n\t\t\tdeltaY: data.boxTranslateY, // currentPosition.top - startingPosition.top\t\t\t\t\t\t\n\t\t}\n\t\tthis.props.updateBoxAfterCrop(data);\n\t}\n\n\thandleDoubleClick() {\n\n\t\tif (this.props.dragDisabled) {\n\t\t\tthis.props.cropDisabledCallback();\n\t\t} else {\n\t\t\tthis.props.onDoubleClickElement(this.props.identifier);\t\t\t\n\t\t}\n\t};\n\n\tselectBox(e) {\n\t\t// To make sure AlignmentGuides' selectBox method is not called at the end of drag or resize.\n\t\tif (this.callSelectBox && e.currentTarget.hasAttribute('identifier') || ( this.callSelectBox && e.target.id.indexOf('box-ms') >= 0)) {\n\t\t\tthis.props.selectBox(e);\n\t\t}\n\t\tif (this.box && this.box.current) {\n\t\t\tthis.box.current.focus();\n\t\t}\n\t}\n\n\thoverBox(e) {\n\t\tif (this.props.cropActiveForElement !== undefined)\n\t\t\treturn;\n\t\tif (e.currentTarget.hasAttribute('identifier'))\n\t\t\te.currentTarget.classList.add(this.props.toggleHover);\n\t}\n\n\tunHoverBox(e) {\n\t\te.currentTarget.classList.remove(this.props.toggleHover);\n\t}\n\n\tdragOverBox(e) {\n\t\tif (this.props.cropActiveForElement !== undefined)\n\t\t\treturn;\n\n\t\tif (e.currentTarget.hasAttribute('identifier'))\n\t\t\te.currentTarget.classList.add(this.props.dragToggleHoverBgStyle);\n\t}\n\n\tonDropElementBox() {\n\t\tif (this.props.onDragOver) {\n\t\t\tthis.props.onDragOver(Number.isInteger(this.props.metadata?.captionIndex) ?  this.props.metadata?.captionIndex : null);\n\t\t}\n\t}\n\n\tunDragOverBox(e) {\n\t\te.currentTarget.classList.remove(this.props.dragToggleHoverBgStyle);\n\t}\n\n\tonDragStart(e) {\n\t\tif ((this.props.position.drag || this.props.position.drag === undefined) && e.target.id.indexOf('box') !== -1) { // Allow drag only if drag property for the box is true or undefined\n\t\t\te.stopPropagation();\n\t\t\tconst target = this.box.current;\n\t\t\tconst boundingBox = this.props.getBoundingBoxElement();\n\t\t\tconst { position } = this.props;\n\t\t\tlet startingPosition = position.rotateAngle === 0 ? target.getBoundingClientRect().toJSON() : getOffsetCoordinates(target);\n\t\t\tconst boundingBoxPosition = boundingBox.current.getBoundingClientRect().toJSON();\n\n\t\t\tlet data = {\n\t\t\t\tx: startingPosition.x - boundingBoxPosition.x,\n\t\t\t\ty: startingPosition.y - boundingBoxPosition.y,\n\t\t\t\ttop: startingPosition.y - boundingBoxPosition.y,\n\t\t\t\tleft: startingPosition.x - boundingBoxPosition.x,\n\t\t\t\twidth: startingPosition.width,\n\t\t\t\theight: startingPosition.height,\n\t\t\t\tnode: target,\n\t\t\t\trotateAngle: position.rotateAngle\n\t\t\t};\n\t\t\tif (position.rotateAngle !== 0) {\n\t\t\t\tdata = {\n\t\t\t\t\tx: startingPosition.x,\n\t\t\t\t\ty: startingPosition.y,\n\t\t\t\t\ttop: startingPosition.y,\n\t\t\t\t\tleft: startingPosition.x,\n\t\t\t\t\twidth: startingPosition.width,\n\t\t\t\t\theight: startingPosition.height,\n\t\t\t\t\tnode: target, \n\t\t\t\t\trotateAngle: position.rotateAngle\n\t\t\t\t};\n\t\t\t}\n\t\t\tthis.didDragHappen = false;\n\n\t\t\t// if a box type is passed (ex: group) send it back to the parent so all boxes in the group can be updated.\n\t\t\tif (this.props.position.type) {\n\t\t\t\tdata.type = this.props.position.type;\n\t\t\t}\n\t\t\tthis.props.onDragStart && this.props.onDragStart(e, data);\n\n\t\t\t// Update the starting position\n\t\t\tstartingPosition = Object.assign({}, data);\n\n\t\t\tconst deltaX = e.clientX - target.offsetLeft;\n\t\t\tconst deltaY = e.clientY - target.offsetTop;\n\t\t\tthis.callSelectBox = true;\n\n\t\t\tconst onDrag = (e) => {\n\t\t\t\te.stopPropagation();\n\t\t\t\t!this.props.didDragOrResizeHappen && this.props.setDragOrResizeState && this.props.setDragOrResizeState(true);\n\t\t\t\tconst boundingBox = this.props.getBoundingBoxElement();\n\t\t\t\tif (!boundingBox.current) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tconst boundingBoxDimensions = boundingBox.current.getBoundingClientRect().toJSON();\n\t\t\t\tconst boxWidth = this.props.position.width;\n\t\t\t\tconst boxHeight = this.props.position.height;\n\t\t\t\tconst left = e.clientX - deltaX;\n\t\t\t\tconst top = e.clientY - deltaY;\n\t\t\t\tlet currentPosition = this.props.boundToParent ?\n\t\t\t\t\tcalculateBoundariesForDrag(left, top, boxWidth, boxHeight, boundingBoxDimensions) :\n\t\t\t\t\t{\n\t\t\t\t\t\tleft,\n\t\t\t\t\t\ttop,\n\t\t\t\t\t\twidth: this.props.position.width,\n\t\t\t\t\t\theight: this.props.position.height,\n\t\t\t\t\t\tx: left,\n\t\t\t\t\t\ty: top,\n\t\t\t\t\t\tnode: this.box.current\n\t\t\t\t\t};\n\t\t\t\tdata = {\n\t\t\t\t\tx: currentPosition.left,\n\t\t\t\t\ty: currentPosition.top,\n\t\t\t\t\ttop: currentPosition.top,\n\t\t\t\t\tleft: currentPosition.left,\n\t\t\t\t\twidth: this.props.position.width,\n\t\t\t\t\theight: this.props.position.height,\n\t\t\t\t\tnode: this.box.current,\n\t\t\t\t\tdeltaX: currentPosition.left - startingPosition.left,\n\t\t\t\t\tdeltaY: currentPosition.top - startingPosition.top,\n\t\t\t\t\trotateAngle: position.rotateAngle\n\n\t\t\t\t};\n\t\t\t\tif (this.props.position.type) {\n\t\t\t\t\tdata.type = this.props.position.type;\n\t\t\t\t}\n\t\t\t\tif ((data.deltaX * data.deltaX + data.deltaY * data.deltaY) > DRAG_THRESHOLD) {\n\t\t\t\t\tthis.didDragHappen = true;\n\t\t\t\t\tif (this.props.dragDisabled !== true) {\n\t\t\t\t\t\tthis.props.onDrag && this.props.onDrag(e, data);\n\t\t\t\t\t} else if (typeof this.props.dragDisabledCallback === 'function') {\n\t\t\t\t\t\tthis.props.dragDisabledCallback();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tconst onDragEnd = (e) => {\n\t\t\t\tdata.rotateAngle = position.rotateAngle ;\n\t\t\t\tif (this.didDragHappen) {\n\t\t\t\t\tthis.props.didDragOrResizeHappen && this.props.setDragOrResizeState && this.props.setDragOrResizeState(false);\n\t\t\t\t\tthis.callSelectBox = false;\n\t\t\t\t\tif (this.props.dragDisabled !== true) {\n\t\t\t\t\t\tthis.props.onDragEnd && this.props.onDragEnd(e, data);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tdocument.removeEventListener('mousemove', onDrag);\n\t\t\t\tdocument.removeEventListener('mouseup', onDragEnd);\n\t\t\t};\n\n\t\t\tdocument.addEventListener('mousemove', onDrag);\n\t\t\tdocument.addEventListener('mouseup', onDragEnd);\n\t\t}\n\t}\n\n\tshortcutHandler(e) {\n\t\tif (this.props.preventShortcutEvents || !PREVENT_DEFAULT_KEYS.includes(e.key)) {\n\t\t\treturn;\n\t\t}\n\t\tconst { areMultipleBoxesSelected } = this.props;\n\t\tif (\n\t\t\tthis.props.isSelected && \n\t\t\t(\n\t\t\t\t!areMultipleBoxesSelected || \n\t\t\t\t(\n\t\t\t\t\tthis.props.position && \n\t\t\t\t\tthis.props.position.type === 'group'\n\t\t\t\t)\n\t\t\t) \n\t\t) {  // Only Selected boxes will move on arrow keys\n\t\t\tif (PREVENT_DEFAULT_KEYS.includes(e.key)) {\n\t\t\t\te.preventDefault();\n\t\t\t}\n\t\t\tconst { position } = this.props;\n\n\t\t\tlet DELTA = e.shiftKey ? 10 : 1;\n\n\t\t\tif ((e.ctrlKey || e.metaKey) && position?.isWidthZero && (e.key === 'ArrowRight' || e.key === 'ArrowLeft')) {\n\t\t\t\tDELTA = 0;\n\t\t\t} else if ((e.ctrlKey || e.metaKey) && position?.isHeightZero && (e.key === 'ArrowBottom' || e.key === 'ArrowTop')) {\n\t\t\t\tDELTA = 0;\n\t\t\t}\n\n\t\t\tlet newValues = {};\n\t\t\tlet changedValues = {};\n\n\t\t\tif (e.key === 'ArrowRight') {\n\t\t\t\tif (!this.state.callKeyEnd) {\n\t\t\t\t\tthis.setState({ callKeyEnd: true });\n\t\t\t\t}\n\t\t\t\tnewValues = e.ctrlKey || e.metaKey ? {\n\t\t\t\t\twidth: position.width + DELTA,\n\t\t\t\t\tmovingSides: ['bottom', 'right'], \n\t\t\t\t} : {\n\t\t\t\t\tleft: position.left + DELTA,\n\t\t\t\t\tx: position.x + DELTA\n\t\t\t\t}\n\t\t\t\tchangedValues = e.ctrlKey || e.metaKey ? {\n\t\t\t\t\twidth: DELTA\n\t\t\t\t} : {\n\t\t\t\t\tleft: DELTA,\n\t\t\t\t\tx: DELTA\n\t\t\t\t}\t\t\t\n\t\t\t} else if (e.key === 'ArrowLeft') {\n\t\t\t\tif (!this.state.callKeyEnd) {\n\t\t\t\t\tthis.setState({ callKeyEnd: true });\n\t\t\t\t}\n\t\t\t\tnewValues = e.ctrlKey || e.metaKey ? {\n\t\t\t\t\twidth: position.width - DELTA,\n\t\t\t\t\tmovingSides: ['bottom', 'right'], \n\t\t\t\t} :  {\n\t\t\t\t\tleft: position.left - DELTA,\n\t\t\t\t\tx: position.x - DELTA\n\t\t\t\t};\n\t\t\t\tchangedValues = e.ctrlKey || e.metaKey ? {\n\t\t\t\t\twidth: 0 - DELTA\n\t\t\t\t} :  {\n\t\t\t\t\tleft: 0 - DELTA,\n\t\t\t\t\tx: 0 - DELTA\n\t\t\t\t};\n\t\t\t} else if (e.key === 'ArrowUp') {\n\t\t\t\tif (!this.state.callKeyEnd) {\n\t\t\t\t\tthis.setState({ callKeyEnd: true });\n\t\t\t\t}\n\t\t\t\tnewValues = e.ctrlKey || e.metaKey ? {\n\t\t\t\t\theight: position.height - DELTA,\n\t\t\t\t\tmovingSides: ['bottom', 'right'], \n\t\t\t\t} : {\n\t\t\t\t\ttop: position.top - DELTA,\n\t\t\t\t\ty: position.y - DELTA\n\t\t\t\t};\n\t\t\t\tchangedValues = e.ctrlKey || e.metaKey ? {\n\t\t\t\t\theight: 0 - DELTA\n\t\t\t\t} : {\n\t\t\t\t\ttop: 0 - DELTA,\n\t\t\t\t\ty: 0 - DELTA\n\t\t\t\t};\n\t\t\t}  else if (e.key === 'ArrowDown') {\n\t\t\t\tif (!this.state.callKeyEnd) {\n\t\t\t\t\tthis.setState({ callKeyEnd: true });\n\t\t\t\t}\n\t\t\t\tnewValues = e.ctrlKey || e.metaKey ? {\n\t\t\t\t\theight: position.height + DELTA,\n\t\t\t\t\tmovingSides: ['bottom', 'right'], \n\t\t\t\t} : {\n\t\t\t\t\ttop: position.top + DELTA,\n\t\t\t\t\ty: position.y + DELTA\n\t\t\t\t};\n\t\t\t\tchangedValues = e.ctrlKey || e.metaKey ? {\n\t\t\t\t\theight: DELTA\n\t\t\t\t} : {\n\t\t\t\t\ttop: DELTA,\n\t\t\t\t\ty: DELTA\n\t\t\t\t};\n\t\t\t} \n\n\t\t\tif (this.box && this.box.current)\n\t\t\t\tnewValues.node = this.box.current\n\n\n\t\t\tconst data = Object.assign({}, position, newValues, {\n\t\t\t\tchangedValues, // for group shortcut keys\n\t\t\t});\n\t\t\tif (this.props.dragDisabled === true) {\n\t\t\t\tif (typeof this.props.dragDisabledCallback === 'function') {\n\t\t\t\t\tthis.props.dragDisabledCallback();\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.props.onKeyUp && this.props.onKeyUp(e, data);\n\t\t}\n\t}\n\n\tonShortcutKeyUp(e) {\n\t\tif (this.props.preventShortcutEvents) {\n\t\t\treturn;\n\t\t}\n\t\tif (this.props.isSelected) {  // Only Selected boxes will move on arrow keys\n\t\t\tif (PREVENT_DEFAULT_KEYS.includes(e.key)) {\n\t\t\t\te.preventDefault();\n\t\t\t}\n\t\t\tconst { position } = this.props;\n\t\t\tlet newValues = {};\n\t\t\tif (this.box && this.box.current)\n\t\t\t\tnewValues.node = this.box.current\n\t\t\tconst data = Object.assign({}, position, newValues, {\n\t\t\t\tmovingSides: ['bottom', 'right'],\n\t\t\t});\n\t\t\tconst keysAllowed = ['ArrowRight', 'ArrowLeft', 'ArrowUp', 'ArrowDown', 'Meta', 'Control'];\n\t\t\tif (this.props.dragDisabled === true) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (keysAllowed.includes(e.key) && this.state.callKeyEnd) {\n\t\t\t\tthis.props.onKeyEnd && this.props.onKeyEnd(e, data);\n\t\t\t\tthis.setState({ callKeyEnd: false });\n\t\t\t}\n\t\t}\n\t}\n\n\tgetMovingSides(currentResizeHandle) {\n\t\tswitch (currentResizeHandle) {\n\t\t\tcase 'resize-tl': {\n\t\t\t\treturn ['top', 'left'];\n\t\t\t}\n\t\t\tcase 'resize-ct': {\n\t\t\t\treturn ['top'];\n\t\t\t}\n\t\t\tcase 'resize-tr': {\n\t\t\t\treturn ['top', 'right'];\n\t\t\t}\n\t\t\tcase 'resize-cl': {\n\t\t\t\treturn ['left'];\n\t\t\t}\n\t\t\tcase 'resize-cr': {\n\t\t\t\treturn ['right'];\n\t\t\t}\n\t\t\tcase 'resize-bl': {\n\t\t\t\treturn ['bottom', 'left'];\n\t\t\t}\n\t\t\tcase 'resize-cb': {\n\t\t\t\treturn ['bottom'];\n\t\t\t}\n\t\t\tcase 'resize-br': {\n\t\t\t\treturn ['bottom', 'right'];\n\t\t\t}\n\t\t\tdefault: {\n\t\t\t\treturn [];\n\t\t\t}\n\t\t}\n\t}\n\n\tonResizeStart(e) {\n\t\tconst boundingBox = this.props.getBoundingBoxElement();\n\t\tif (this.props.position.resize || this.props.position.resize === undefined && this.box.current && boundingBox && boundingBox.current) { // Allow resize only if resize property for the box is true or undefined\n\t\t\te.stopPropagation();\n\t\t\tif (this.box?.current?.style) {\n\t\t\t\tthis.box.current.style.zIndex = 99;\n\t\t\t}\n\t\t\tconst { target, clientX: startX, clientY: startY } = e;\n\t\t\tconst { position } = this.props;\n\t\t\tconst rotateAngle = position.rotateAngle ? position.rotateAngle : 0;\n\t\t\tconst startingDimensions = getOffsetCoordinates(this.box.current);\n\t\t\tconst boundingBoxPosition = getOffsetCoordinates(boundingBox.current);\n\t\t\tconst { left, top, width, height } = startingDimensions;\n\t\t\tconst { cx, cy } = topLeftToCenter({ left, top, width, height, rotateAngle });\n\t\t\tconst rect = { width, height, cx, cy, rotateAngle };\n\t\t\tlet data = {\n\t\t\t\twidth: startingDimensions.width,\n\t\t\t\theight: startingDimensions.height,\n\t\t\t\tx: startingDimensions.left + boundingBoxPosition.x,\n\t\t\t\ty: startingDimensions.top + boundingBoxPosition.y,\n\t\t\t\tleft: startingDimensions.left + boundingBoxPosition.x,\n\t\t\t\ttop: startingDimensions.top + boundingBoxPosition.y,\n\t\t\t\tnode: this.box.current\n\t\t\t};\n\t\t\t// if (rotateAngle !== 0) {\n\t\t\t// \tdata = {\n\t\t\t// \t\twidth: startingDimensions.width,\n\t\t\t// \t\theight: startingDimensions.height,\n\t\t\t// \t\tx: startingDimensions.left + boundingBoxPosition.x,\n\t\t\t// \t\ty: startingDimensions.top + boundingBoxPosition.y,\n\t\t\t// \t\tleft: startingDimensions.left + boundingBoxPosition.x,\n\t\t\t// \t\ttop: startingDimensions.top + boundingBoxPosition.y,\n\t\t\t// \t\tnode: this.box.current\n\t\t\t// \t};\n\t\t\t// }\n\t\t\tthis.didResizeHappen = false;\n\n\t\t\t// if a box type is passed (ex: group) send it back to the parent so all boxes in the group can be updated.\n\t\t\tif (this.props.position.type) {\n\t\t\t\tdata.type = this.props.position.type;\n\t\t\t}\n\n\t\t\tconst ratio = rect.width / rect.height;\n\t\t\t// used to increase or decrease deltaY accordingly\n\t\t\tconst sign = e.target.id === 'resize-br' || e.target.id === 'resize-tl' ? 1 : -1; \n\t\t\tthis.callSelectBox = true;\n\n\t\t\tthis.props.onResizeStart && this.props.onResizeStart(e, data);\n\t\t\tconst startingPosition = Object.assign({}, data);\n\t\t\tconst movingSides = this.getMovingSides(e.target && e.target.getAttribute('id'));\n\n\t\t\tlet movingSidesObj = {};\n\t\t\tmovingSides.forEach(side => movingSidesObj[side] = true);\n\t\t\tconst resizeAroundCenter = e.altKey;\n\n\t\t\tconst onResize = (e) => {\n\t\t\t\t!this.props.didDragOrResizeHappen && this.props.setDragOrResizeState && this.props.setDragOrResizeState(true);\n\t\t\t\tconst { clientX, clientY } = e;\n\n\t\t\t\tlet deltaX = this.props.position?.isWidthZero ? 0 : clientX - startX;\n\t\t\t\tlet deltaY = this.props.position?.isHeightZero ? 0 : clientY - startY; //!e.shiftKey && !e.ctrlKey ? sign * deltaX / ratio : clientY - startY;\n\n\t\t\t\tif ((movingSidesObj.right || movingSidesObj.left) &&\n\t\t\t\t\t(movingSidesObj.top || movingSidesObj.bottom)\n\t\t\t\t) {\n\t\t\t\t\tif (!e.shiftKey && !e.ctrlKey && ( !this.props.position?.isWidthZero && !this.props.position?.isHeightZero )) {\n\t\t\t\t\t\tdeltaY = sign * deltaX / ratio;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tconst alpha = Math.atan2(deltaY, deltaX);\n\t\t\t\tconst deltaL = getLength(deltaX, deltaY);\n\n\t\t\t\t// const { minWidth, minHeight } = this.props;\n\t\t\t\tconst beta = alpha - degToRadian(rotateAngle);\n\t\t\t\tlet deltaW = deltaL * Math.cos(beta);\n\t\t\t\tlet deltaH = deltaL * Math.sin(beta);\n\n\t\t\t\tconst type = target.id.replace('resize-', '');\n\n\t\t\t\tif (resizeAroundCenter) {\n\t\t\t\t\tif (movingSidesObj.right || movingSidesObj.left) deltaW = deltaW * 2;\n\t\t\t\t\tif (movingSidesObj.top || movingSidesObj.bottom) deltaH = deltaH * 2;\n\t\t\t\t}\n\n\t\t\t\tconst { position: { cx, cy }, size: { width, height } } = getNewStyle(type, rect, deltaW, deltaH, this.props.position?.isWidthZero ? 0 : 10, this.props.position?.isHeightZero ? 0 : 10); // Use a better way to set minWidth and minHeight\n\t\t\t\tconst tempPosition = centerToTopLeft({ cx, cy, width, height, rotateAngle });\n\n\t\t\t\tif (resizeAroundCenter) {\n\t\t\t\t\tif (movingSidesObj.right || movingSidesObj.left) tempPosition.left = tempPosition.left - (deltaW / 2);\n\t\t\t\t\tif (movingSidesObj.top || movingSidesObj.bottom) tempPosition.top = tempPosition.top - (deltaH / 2);\n\t\t\t\t}\n\n\t\t\t\tdata = {\n\t\t\t\t\twidth: this.props.position?.isWidthZero ? 0 : tempPosition.width,\n\t\t\t\t\theight: this.props.position?.isHeightZero ? 0 : tempPosition.height,\n\t\t\t\t\tx: tempPosition.left,\n\t\t\t\t\ty: tempPosition.top,\n\t\t\t\t\tleft: tempPosition.left,\n\t\t\t\t\ttop: tempPosition.top,\n\t\t\t\t\trotateAngle,\n\t\t\t\t\tnode: this.box.current,\n\t\t\t\t\tmovingSides\n\t\t\t\t};\n\n\t\t\t\tthis.didResizeHappen = true;\n\t\t\t\t// Calculate the restrictions if resize goes out of bounds\n\t\t\t\tconst currentPosition = this.props.boundToParent ?\n\t\t\t\t\tcalculateBoundariesForResize(data.left, data.top, tempPosition.width, tempPosition.height, boundingBoxPosition) :\n\t\t\t\t\tObject.assign({}, data);\n\n\t\t\t\tdata = Object.assign({}, data, currentPosition, {\n\t\t\t\t\tx: currentPosition.left,\n\t\t\t\t\ty: currentPosition.top,\n\t\t\t\t\tdeltaX: currentPosition.left - startingPosition.left,\n\t\t\t\t\tdeltaY: currentPosition.top - startingPosition.top,\n\t\t\t\t\tdeltaW: currentPosition.width - startingPosition.width,\n\t\t\t\t\tdeltaH: currentPosition.height - startingPosition.height\n\t\t\t\t});\n\n\t\t\t\tif (this.props.position.type) {\n\t\t\t\t\tdata.type = this.props.position.type;\n\t\t\t\t}\n\t\t\t\tif (this.props.dragDisabled !== true) {\n\t\t\t\t\tthis.props.onResize && this.props.onResize(e, data);\n\t\t\t\t} else if (typeof this.props.dragDisabledCallback === 'function') {\n\t\t\t\t\tthis.props.dragDisabledCallback();\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tconst onResizeEnd = (e) => {\n\t\t\t\tif (this.box?.current?.style) {\n\t\t\t\t\tthis.box.current.style.zIndex = this.props.position?.zIndex ? this.props.position.zIndex : 98;\n\t\t\t\t}\n\t\t\t\tif (this.didResizeHappen) {\n\t\t\t\t\tthis.callSelectBox = false;\n\t\t\t\t\tthis.props.didDragOrResizeHappen && this.props.setDragOrResizeState && this.props.setDragOrResizeState(false);\n\t\t\t\t\tif (this.props.dragDisabled !== true) {\n\t\t\t\t\t\tthis.props.onResizeEnd && this.props.onResizeEnd(e, data);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tonResize && document.removeEventListener('mousemove', onResize);\n\t\t\t\tonResizeEnd && document.removeEventListener('mouseup', onResizeEnd);\n\t\t\t};\n\n\t\t\tonResize && document.addEventListener('mousemove', onResize);\n\t\t\tonResizeEnd && document.addEventListener('mouseup', onResizeEnd);\n\t\t}\n\t}\n\n\tonRotateStart(e) {\n\t\tif (this.props.position.rotate || this.props.position.rotate === undefined) {\n\t\t\te.stopPropagation();\n\t\t\tconst target = this.box.current;\n\t\t\tconst { clientX, clientY } = e;\n\t\t\tconst { rotateAngle } = this.props.position;\n\t\t\tconst boundingBox = this.props.getBoundingBoxElement();\n\t\t\tconst start = target.getBoundingClientRect().toJSON();\n\t\t\tconst boundingBoxPosition = boundingBox.current.getBoundingClientRect().toJSON();\n\t\t\tconst center = {\n\t\t\t\tx: start.left + start.width / 2,\n\t\t\t\ty: start.top + start.height / 2\n\t\t\t};\n\t\t\tconst startVector = {\n\t\t\t\tx: clientX - center.x,\n\t\t\t\ty: clientY - center.y\n\t\t\t};\n\n\t\t\tconst startAngle = rotateAngle ? rotateAngle : 0;\n\t\t\tlet angle = startAngle ? startAngle : 0;\n\t\t\tlet data = {\n\t\t\t\tx: start.x - boundingBoxPosition.x,\n\t\t\t\ty: start.y - boundingBoxPosition.y,\n\t\t\t\ttop: start.top - boundingBoxPosition.top,\n\t\t\t\tleft: start.left - boundingBoxPosition.left,\n\t\t\t\twidth: start.width,\n\t\t\t\theight: start.height,\n\t\t\t\trotateAngle: angle,\n\t\t\t\tnode: target\n\t\t\t};\n\n\t\t\tconst newCoordinates = getNewCoordinates(data);\n\t\t\tthis.props.onRotateStart && this.props.onRotateStart(e, newCoordinates);\n\n\t\t\tconst onRotate = (e) => {\n\t\t\t\te.stopPropagation();\n\t\t\t\tconst { clientX, clientY } = e;\n\t\t\t\tconst rotateVector = {\n\t\t\t\t\tx: clientX - center.x,\n\t\t\t\t\ty: clientY - center.y\n\t\t\t\t};\n\t\t\t\tangle = getAngle(startVector, rotateVector);\n\t\t\t\t// Snap box during rotation at certain angles - 0, 90, 180, 270, 360\n\t\t\t\tlet rotateAngle = Math.round(startAngle + angle)\n\t\t\t\tif (rotateAngle >= 360) {\n\t\t\t\t\trotateAngle -= 360\n\t\t\t\t} else if (rotateAngle < 0) {\n\t\t\t\t\trotateAngle += 360\n\t\t\t\t}\n\t\t\t\tif (rotateAngle > 356 || rotateAngle < 4) {\n\t\t\t\t\trotateAngle = 0\n\t\t\t\t} else if (rotateAngle > 86 && rotateAngle < 94) {\n\t\t\t\t\trotateAngle = 90\n\t\t\t\t} else if (rotateAngle > 176 && rotateAngle < 184) {\n\t\t\t\t\trotateAngle = 180\n\t\t\t\t} else if (rotateAngle > 266 && rotateAngle < 274) {\n\t\t\t\t\trotateAngle = 270\n\t\t\t\t}\n\t\t\t\tdata = Object.assign({}, data, {\n\t\t\t\t\trotateAngle\n\t\t\t\t});\n\n\t\t\t\tconst newCoordinates = getNewCoordinates(data);\n\t\t\t\tif (this.props.dragDisabled !== true) {\n\t\t\t\t\tthis.props.onRotate && this.props.onRotate(e, newCoordinates);\n\t\t\t\t} else if (typeof this.props.dragDisabledCallback === 'function') {\n\t\t\t\t\tthis.props.dragDisabledCallback();\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tconst onRotateEnd = (e) => {\n\t\t\t\tonRotate && document.removeEventListener('mousemove', onRotate);\n\t\t\t\tonRotateEnd && document.removeEventListener('mouseup', onRotateEnd);\n\t\t\t\tif (this.props.dragDisabled !== true) {\n\t\t\t\t\tthis.props.onRotateEnd && this.props.onRotateEnd(e, data);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tonRotate && document.addEventListener('mousemove', onRotate);\n\t\t\tonRotateEnd && document.addEventListener('mouseup', onRotateEnd);\n\t\t}\n\t}\n\n\tgetCoordinatesWrapperWidth() {\n\t\tif (this.props.isSelected && this.coordinates && this.coordinates.current) {\n\t\t\treturn this.coordinates.current.offsetWidth;\n\t\t}\n\t}\n\n\tfilterControls(control, index) {\n\t\tif (this.props.position?.isHeightZero) {\n\t\t\treturn RESIZE_CORNERS_FOR_NO_HEIGHT.includes(control);\n\t\t} else if (this.props.position?.isWidthZero) {\n\t\t\treturn RESIZE_CORNERS_FOR_NO_WIDTH.includes(control);\n\t\t}\n\t\treturn true;\n\t}\n\n\tcomponentDidMount() {\n\t\tif (this.props.areMultipleBoxesSelected && this.props.isSelected) {\n\t\t\tdocument.addEventListener('keydown', this.shortcutHandler);\n\t\t\tdocument.addEventListener('keyup', this.onShortcutKeyUp);\n\t\t}\n\t}\n\n\tcomponentDidUpdate(prevProps) {\n\t\t// Added Events to document to accommodate group position shortcuts\n\t\tif (prevProps.areMultipleBoxesSelected !== this.props.areMultipleBoxesSelected || prevProps.isSelected !== this.props.isSelected) {\n\t\t\tdocument.removeEventListener('keydown', this.shortcutHandler);\n\t\t\tdocument.removeEventListener('keyup', this.onShortcutKeyUp);\n\t\t\t\n\t\t\tif (this.props.areMultipleBoxesSelected && this.props.isSelected) {\n\t\t\t\tdocument.addEventListener('keydown', this.shortcutHandler);\n\t\t\t\tdocument.addEventListener('keyup', this.onShortcutKeyUp);\n\t\t\t}\n\t\t}\n\t}\n\n\tcomponentWillUnmount() {\n\t\tdocument.removeEventListener('keydown', this.shortcutHandler);\n\t\tdocument.removeEventListener('keyup', this.onShortcutKeyUp);\n\t}\n\t\n\trender() {\n\t\tconst { areMultipleBoxesSelected, boxStyle, id, identifier, isSelected, isShiftKeyActive, position, resolution, cropActiveForElement} = this.props;\n\t\tif (!isNaN(position.top) && !isNaN(position.left) && !isNaN(position.width) && !isNaN(position.height)) {\n\t\t\tconst boundingBox = this.props.getBoundingBoxElement();\n\t\t\tconst boundingBoxDimensions = boundingBox.current.getBoundingClientRect();\n\t\t\tconst dashedCentreNodes = position.dashedCentreNodes;\n\t\t\tlet xFactor = 1;\n\t\t\tlet yFactor = 1;\n\n\t\t\tif (resolution && resolution.width && resolution.height) {\n\t\t\t\txFactor = resolution.width / boundingBoxDimensions.width;\n\t\t\t\tyFactor = resolution.height / boundingBoxDimensions.height;\n\t\t\t}\n\n\t\t\tconst isCropModeActive = cropActiveForElement === identifier;\n\t\t\t\n\t\t\tlet boxClassNames = `\n\t\t\t\t${(position.isWidthZero || position.isHeightZero) ? styles.hideBorders : ''}\n\t\t\t\t${\n\t\t\t\t\tisSelected ? `${this.props.overRideSelected ? this.props.overRideSelected : styles.selected} ${this.props.overRideStyles ? this.props.overRideStyles: styles.box}` : `${this.props.overRideStyles? this.props.overRideStyles : styles.box}`\n\t\t\t\t}\n\t\t\t`\n\t\t\tboxClassNames = position.type === 'group' && this.props.isSelected ? `${boxClassNames} ${this.props.overRideSelected}` : boxClassNames;\n\t\t\tboxClassNames = isSelected && areMultipleBoxesSelected && position.type !== 'group' ? `${boxClassNames} ${styles.groupElement}` : boxClassNames;\n\t\t\tconst rotateAngle = position.rotateAngle ? position.rotateAngle : 0;\n\t\t\tconst boxStyles = {\n\t\t\t\t...boxStyle,\n\t\t\t\twidth: `${position.width}px`,\n\t\t\t\theight: `${position.height}px`,\n\t\t\t\ttop: `${position.top}px`,\n\t\t\t\tleft: `${position.left}px`,\n\t\t\t\tzIndex: position.zIndex ? position.zIndex : 98,\n\t\t\t\ttransform: isCropModeActive ? '' : `translate(${position.isWidthZero ? -5 : 0}px, ${position.isHeightZero ? -5 : 0}px) rotate(${rotateAngle}deg)`,\n\t\t\t\tpointerEvents: this.props.isLayerLocked ? 'none' : '',\n\t\t\t};\n\n\t\t\tif (position.isWidthZero || position.isHeightZero) {\n\t\t\t\tboxStyles.display = 'flex';\n\t\t\t\tboxStyles.justifyContent = 'center';\n\t\t\t\tboxStyles.alignItems = 'center';\n\t\t\t\tboxStyles.width = `${position.isWidthZero ? DEFAULT_SIZE : position.width}px`;\n\t\t\t\tboxStyles.height = `${position.isHeightZero ? DEFAULT_SIZE : position.height}px`;\n\t\t\t}\n\n\t\t\t// if (isSelected) {\n\t\t\t// \tboxStyles.zIndex = 99;\n\t\t\t// }\n\n\t\t\tif (position.type && position.type === 'group' && isShiftKeyActive ) {\n\t\t\t\tif (!areMultipleBoxesSelected) {\n\t\t\t\t\tboxStyles.pointerEvents = 'none';\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}\n\n\t\t\tif (cropActiveForElement !== undefined && !isCropModeActive)\n\t\t\t\treturn null;\n\n\t\t\treturn <div\n\t\t\t\tclassName={boxClassNames}\n\t\t\t\tid={id}\n\t\t\t\tonClick={this.selectBox}\n\t\t\t\tonMouseDown={this.props.drag ? this.onDragStart : null} // If this.props.drag is false, remove the mouseDown event handler for drag\n\t\t\t\tonKeyDown={areMultipleBoxesSelected ? null : this.shortcutHandler} // remove event from div when multiple boxes are selected\n\t\t\t\tonKeyUp={areMultipleBoxesSelected ? null : this.onShortcutKeyUp} // remove event from div when multiple boxes are selected\n\t\t\t\tonMouseOver={this.hoverBox}\n\t\t\t\tonMouseOut={this.unHoverBox}\n\t\t\t\tonDragOver={this.dragOverBox}\n\t\t\t\tonDragLeave={this.unDragOverBox}\n\t\t\t\tonDrop={this.onDropElementBox}\n\t\t\t\tref={this.box}\n\t\t\t\tstyle={boxStyles}\n\t\t\t\tidentifier={identifier}\n\t\t\t\ttabIndex=\"0\"\n\t\t\t\tonDoubleClick={this.handleDoubleClick}\n\t\t\t\tonFocus={() => {\n\t\t\t\t\tif (this.props.preventShortcutEvents) {\n\t\t\t\t\t\tthis.props.setPreventShortcutEvents(false);\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t{(position.isWidthZero || position.isHeightZero) && <div \n\t\t\t\tclassName={`${isSelected ? styles.zeroDimensionBoxSelected : ''} ${styles.zeroDimensionBox}`}\n\t\t\t\tstyle={{\n\t\t\t\t\twidth: `${position.isWidthZero ? 0 : position.width}px`,\n\t\t\t\t\theight: `${position.isHeightZero ? 0 : position.height}px`,\n\t\t\t\t\ttop: `${position.top}px`,\n\t\t\t\t\tleft: `${position.left}px`,\n\t\t\t\t\tzIndex: position.zIndex ? position.zIndex : 98,\n\t\t\t\t\tpointerEvents: 'none',\n\t\t\t\t}}></div>}\n\t\t\t\t{<>\n\t\t\t\t\t{\n\t\t\t\t\t\t(isSelected && !areMultipleBoxesSelected) || (isSelected &&  position.type && position.type === 'group') ?\n\t\t\t\t\t\t(this.props.didDragOrResizeHappen) ? <span\n\t\t\t\t\t\t\t\tref={this.coordinates}\n\t\t\t\t\t\t\t\tclassName={styles.coordinates}\n\t\t\t\t\t\t\t\tstyle={{transform: `rotate(-${this.props.position?.rotateAngle}deg)`}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{`${Math.round(position.x * xFactor)}, ${Math.round(position.y * yFactor)}`}\n\t\t\t\t\t\t</span> :\n\t\t\t\t\t\t\tnull :null\n\t\t\t\t\t}\n\t\t\t\t\t{\n\t\t\t\t\t\t(isSelected && !areMultipleBoxesSelected) || (isSelected && position.type && position.type === 'group') ?\n\t\t\t\t\t\t(this.props.didDragOrResizeHappen) ? <span\n\t\t\t\t\t\t\t\tclassName={`${styles.dimensions} `}\n\t\t\t\t\t\t\t\tstyle={{ width: `${position.width}px`, top: `${position.height + 10}px`, minWidth:'66px', transform: `rotate(-${this.props.position?.rotateAngle}deg)` }}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div className={`${styles.dimensions_style}`}>{`${Math.round(position.width * xFactor)} x ${Math.round(position.height * yFactor)}`}</div>\n\t\t\t\t\t\t</span> :\n\t\t\t\t\t\t\tnull :null\n\t\t\t\t\t}\n\t\t\t\t\t{\n\t\t\t\t\t\t(isSelected && !areMultipleBoxesSelected) || (position.type && position.type === 'group' && isSelected) ?\n\t\t\t\t\t\t\tRESIZE_CORNERS.filter(this.filterControls).map(handle => {\n\t\t\t\t\t\t\t\tlet visibleHandle = handle;\n\t\t\t\t\t\t\t\tconst additionalStyles = {};\n\t\t\t\t\t\t\t\tif (position.isHeightZero) {\n\t\t\t\t\t\t\t\t\tif (handle.includes('r')) {\n\t\t\t\t\t\t\t\t\t\tvisibleHandle = 'cr';\n\t\t\t\t\t\t\t\t\t} else if (handle.includes('l')) {\n\t\t\t\t\t\t\t\t\t\tvisibleHandle = 'cl';\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t// additionalStyles.bottom = 0;\n\t\t\t\t\t\t\t\t\tadditionalStyles.top = 0;\n\t\t\t\t\t\t\t\t} else if (position.isWidthZero) {\n\t\t\t\t\t\t\t\t\tif (handle.includes('t')) {\n\t\t\t\t\t\t\t\t\t\tvisibleHandle = 'ct';\n\t\t\t\t\t\t\t\t\t} else if (handle.includes('b')) {\n\t\t\t\t\t\t\t\t\t\tvisibleHandle = 'cb';\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t// additionalStyles.right = 0;\n\t\t\t\t\t\t\t\t\tadditionalStyles.left = 0;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tconst className = `${styles.resizeCorners} ${styles[`resize-${handle}`]} ` + `${dashedCentreNodes ? styles[`stretchable-resize-${handle}`] : null}`;\n\t\t\t\t\t\t\t\treturn <div\n\t\t\t\t\t\t\t\t\tkey={handle}\n\t\t\t\t\t\t\t\t\tclassName={className}\n\t\t\t\t\t\t\t\t\tonMouseDown={\n\t\t\t\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\t\t\t\t(!position.isHeightZero  && !position.isWidthZero) ||\n\t\t\t\t\t\t\t\t\t\t\t!RESIZE_SIDES.includes(handle)\n\t\t\t\t\t\t\t\t\t\t) && this.props.resize ? this.onResizeStart : null\n\t\t\t\t\t\t\t\t\t} // If this.props.resize is false then remove the mouseDown event handler for resize\n\t\t\t\t\t\t\t\t\tid={`resize-${handle}`}\n\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\t...additionalStyles,\n\t\t\t\t\t\t\t\t\t\tpointerEvents: this.props.isLayerLocked ? 'none' : '', \n\t\t\t\t\t\t\t\t\t\tcursor: getResizeCursorCSS(visibleHandle, this.props.position?.rotateAngle)\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>;\n\t\t\t\t\t\t\t}) :\n\t\t\t\t\t\t\tnull\n\t\t\t\t\t}\n\t\t\t\t\t{\n\t\t\t\t\t\tisSelected && !areMultipleBoxesSelected ?\n\t\t\t\t\t\t\tROTATE_HANDLES.filter(this.filterControls).map(handle => {\n\t\t\t\t\t\t\t\tconst className = `${styles.rotateHandle} ${styles[`rotate-${handle}`]}`;\n\t\t\t\t\t\t\t\treturn <div\n\t\t\t\t\t\t\t\t\tkey={handle}\n\t\t\t\t\t\t\t\t\tclassName={className}\n\t\t\t\t\t\t\t\t\tonMouseDown={this.props.rotate ? this.onRotateStart : null} // If this.props.rotate is false then remove the mouseDown event handler for rotate\n\t\t\t\t\t\t\t\t\tid={`rotate-${handle}`}\n\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\tpointerEvents: this.props.isLayerLocked ? 'none' : '',\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>;\n\t\t\t\t\t\t\t}) :\n\t\t\t\t\t\t\tnull\n\t\t\t\t\t}\n\t\t\t\t</>}\n\t\t\t</div>\n\t\t}\n\n\t\treturn null;\n\t}\n}\n\nBox.propTypes = {\n\tareMultipleBoxesSelected: PropTypes.bool,\n\tboundToParent: PropTypes.bool,\n\tdrag: PropTypes.bool,\n\tgetBoundingBoxElement: PropTypes.func,\n\tid: PropTypes.string,\n\tisSelected: PropTypes.bool,\n\tkeybindings: PropTypes.bool,\n\tonDragStart: PropTypes.func,\n\tonDrag: PropTypes.func,\n\tonDragEnd: PropTypes.func,\n\tonKeyUp: PropTypes.func,\n\tonKeyEnd: PropTypes.func,\n\tonResizeStart: PropTypes.func,\n\tonResize: PropTypes.func,\n\tonResizeEnd: PropTypes.func,\n\tonRotateStart: PropTypes.func,\n\tonRotate: PropTypes.func,\n\tonRotateEnd: PropTypes.func,\n\tposition: PropTypes.object.isRequired,\n\tresize: PropTypes.bool,\n\tresolution: PropTypes.object,\n\trotate: PropTypes.bool\n};\n\nexport default Box;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Box from './Box';\nimport {\n\tcalculateGuidePositions,\n\tgetMultipleSelectionCoordinates,\n\tgetOffsetCoordinates,\n\tproximityListener,\n\tgetGroupCoordinates,\n\tcheckGroupChildElementsLocked\n} from './utils/helpers'\nimport styles from './styles.scss';\nimport {GROUP_BOX_PREFIX} from './utils/constants';\nlet mousedown = false;\nlet last_mousex = 0;\nlet last_mousey = 0;\nlet posX = 0;\nlet posY = 0;\n// let rect2 = null;\n\nclass AlignmentGuides extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.boundingBox = React.createRef();\n\t\tthis.state = {\n\t\t\tactive: '', // stores the active box to be shown on preview\n\t\t\tactiveBoxes: [], // store all captions box which are currently selected in multiple selection state\n\t\t\tboundingBox: null,\n\t\t\tboxes: {}, // store all data of each caption\n\t\t\tdragging: false,\n\t\t\tguides: {},\n\t\t\tguidesActive: false,\n\t\t\tisShiftKeyActive: false,\n\t\t\tmatch: {},\n\t\t\tresizing: false,\n\t\t\trotating: false,\n\t\t\tactiveBoxSnappedPosition: {},\n\t\t\tpreventShortcutEvents: false,\n\t\t\tactiveCaptionGroupCaptions: [], // this is to store all the captions selected while selecting 1 group or multiple groups\n\t\t\tcaptionGroupsToIndexMap:{} //  we store all the group and its map to the caption index that are inside it as it's selection\n\t\t};\n\t\tthis.setShiftKeyState = this.setShiftKeyState.bind(this);\n\t\tthis.getBoundingBoxElement = this.getBoundingBoxElement.bind(this);\n\t\tthis.setDragOrResizeState = this.setDragOrResizeState.bind(this);\n\t\tthis.selectBox = this.selectBox.bind(this);\n\t\tthis.unSelectBox = this.unSelectBox.bind(this);\n\t\tthis.dragStartHandler = this.dragStartHandler.bind(this);\n\t\tthis.dragHandler = this.dragHandler.bind(this);\n\t\tthis.dragEndHandler = this.dragEndHandler.bind(this);\n\t\tthis.resizeStartHandler = this.resizeStartHandler.bind(this);\n\t\tthis.resizeHandler = this.resizeHandler.bind(this);\n\t\tthis.resizeEndHandler = this.resizeEndHandler.bind(this);\n\t\tthis.rotateStartHandler = this.rotateStartHandler.bind(this);\n\t\tthis.rotateHandler = this.rotateHandler.bind(this);\n\t\tthis.rotateEndHandler = this.rotateEndHandler.bind(this);\n\t\tthis.keyUpHandler = this.keyUpHandler.bind(this);\n\t\tthis.keyEndHandler = this.keyEndHandler.bind(this);\n\t\tthis.setPreventShortcutEvents = this.setPreventShortcutEvents.bind(this);\n\t\tthis.startingPositions = null;\n\t\tthis.didDragOrResizeHappen = false;\n\t\tthis.didResizeHappen = false;\n\t\tthis.didRotateHappen = false;\n\t\tthis.mouseDragHandler = this.mouseDragHandler.bind(this);\n\t\tthis.boxSelectByDrag  = this.boxSelectByDrag.bind(this);\n\t\tthis.createRectByDrag  = this.createRectByDrag.bind(this);\n\t\tthis.updateBoxAfterCrop = this.updateBoxAfterCrop.bind(this);\n\t\tthis.addGuidelinesForSnapping = this.addGuidelinesForSnapping.bind(this);\n\t\tthis.getReorderedBoxes = this.getReorderedBoxes.bind(this);\n\t}\n\n\tcomponentDidMount() {\n\t\t// Set the dimensions of the bounding box and the draggable boxes when the component mounts.\n\t\tif (this.boundingBox.current) {\n\t\t\tconst boundingBox = this.boundingBox.current.getBoundingClientRect().toJSON();\n\t\t\tconst boxes = {};\n\t\t\tconst guides = {};\n\t\t\tconst activeBoxes = [];\n\t\t\tlet active = '';\n\t\t\tconst captionGroupsToIndexMap = {};\n\n\t\t\t// Adding the guides for the bounding box to the guides object\n\t\t\tguides.boundingBox = {\n\t\t\t\tx: calculateGuidePositions(boundingBox, 'x').map(value => value - boundingBox.left),\n\t\t\t\ty: calculateGuidePositions(boundingBox, 'y').map(value => value - boundingBox.top)\n\t\t\t};\n\n\t\t\tthis.props.boxes.forEach((dimensions, index) => {\n\t\t\t\tboxes[`box${index}`] = Object.assign({}, dimensions, {\n\t\t\t\t\tisHeightZero: !isNaN(Number(dimensions?.height)) ? Math.round(dimensions?.height) <= 0 : undefined,\n\t\t\t\t\tisWidthZero: !isNaN(Number(dimensions?.width)) ? Math.round(dimensions?.width) <= 0 : undefined,\n\t\t\t\t});\n\t\t\t\tguides[`box${index}`] = {\n\t\t\t\t\tx: calculateGuidePositions(dimensions, 'x'),\n\t\t\t\t\ty: calculateGuidePositions(dimensions, 'y')\n\t\t\t\t};\n\t\t\t\tif (dimensions.active) {\n\t\t\t\t\tactiveBoxes.push(`box${index}`);\n\t\t\t\t}\n\n\t\t\t\tif (dimensions?.metadata?.url) {\n\t\t\t\t\tconst img = new Image();\n\t\t\t\t\timg.src = dimensions.metadata.url;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif (activeBoxes.length > 1) {\n\t\t\t\tboxes['box-ms'] = getMultipleSelectionCoordinates(boxes, activeBoxes);\n\t\t\t\tboxes['box-ms'].type = 'group';\n\t\t\t\tboxes['box-ms'].zIndex = 12;\n\t\t\t\tconst selections = [];\n\t\t\t\tfor (let box in boxes) {\n\t\t\t\t\tif (boxes.hasOwnProperty(box) && activeBoxes.includes(box)) {\n\t\t\t\t\t\tselections.push(boxes[box]);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tboxes['box-ms'].selections = selections;\n\t\t\t\tactive = 'box-ms';\n\t\t\t} else if (activeBoxes.length === 1) {\n\t\t\t\tactive = activeBoxes[0];\n\t\t\t}\n\t\t\t// Checking if Groups are present and if the length of array of group > 0 then we create grouped boxes.\n\t\t\tif (this.props?.groups?.length > 0) {\n\t\t\t\t// for each group we are creating a new box starting with 'box-ms-'\n\t\t\t\tthis.props.groups.forEach((groupArray, index) => {\n\t\t\t\t\tboxes[`${GROUP_BOX_PREFIX}${index}`] = getGroupCoordinates(boxes, groupArray);\n\t\t\t\t\tboxes[`${GROUP_BOX_PREFIX}${index}`].type = 'group';\n\t\t\t\t\tboxes[`${GROUP_BOX_PREFIX}${index}`].zIndex = 12;\n\t\t\t\t\tconst selections = [];\n\t\t\t\t\tconst selectedIndexes = [];\n\t\t\t\t\tlet allElementsInsideGroupAreSelected = true;\n\t\t\t\t\t// Checking for all the boxes present inside that group and storing them in selections\n\t\t\t\t\tfor (let box in boxes) {\n\t\t\t\t\t\tif (boxes.hasOwnProperty(box) && groupArray.includes(boxes?.[box]?.metadata?.captionIndex)) {\n\t\t\t\t\t\t\tselections.push(boxes[box]);\n\t\t\t\t\t\t\tselectedIndexes.push(box);\n\t\t\t\t\t\t\tif (boxes[box].active !== true) {\n\t\t\t\t\t\t\t\tallElementsInsideGroupAreSelected = false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (allElementsInsideGroupAreSelected) {\n\t\t\t\t\t\tselectedIndexes.forEach(val => {\n\t\t\t\t\t\t\tactiveBoxes.splice(activeBoxes.indexOf(val), 1);\n\t\t\t\t\t\t});\n\t\t\t\t\t\tactiveBoxes.push(`${GROUP_BOX_PREFIX}${index}`);\n\t\t\t\t\t}\n\t\t\t\t\tboxes[`${GROUP_BOX_PREFIX}${index}`].metadata = {type:'group'};\n\t\t\t\t\tboxes[`${GROUP_BOX_PREFIX}${index}`].selections = selections;\n\t\t\t\t\tboxes[`${GROUP_BOX_PREFIX}${index}`].identifier = `${GROUP_BOX_PREFIX}${index}`;\n\t\t\t\t\tboxes[`${GROUP_BOX_PREFIX}${index}`].isLayerLocked = checkGroupChildElementsLocked(selections);\n\t\t\t\t\t// storing all the indexes inside a particular group to map it later if we need\n\t\t\t\t\tcaptionGroupsToIndexMap[`${GROUP_BOX_PREFIX}${index}`] = groupArray;\n\t\t\t\t\t// active = `box-ms-${index}`;\n\t\t\t\t});\n\t\t\t\tdelete boxes['box-ms'];\n\t\t\t}\n\t\t\tif (activeBoxes.length > 1) {\n\t\t\t\tboxes['box-ms'] = getMultipleSelectionCoordinates(boxes, activeBoxes);\n\t\t\t\tboxes['box-ms'].type = 'group';\n\t\t\t\tboxes['box-ms'].zIndex = 12;\n\t\t\t\tconst selections = [];\n\t\t\t\tfor (let box in boxes) {\n\t\t\t\t\tif (boxes.hasOwnProperty(box) && activeBoxes.includes(box)) {\n\t\t\t\t\t\tselections.push(boxes[box]);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tboxes['box-ms'].selections = selections;\n\t\t\t\tactive = 'box-ms';\n\t\t\t} else if (activeBoxes.length === 1) {\n\t\t\t\tactive = activeBoxes[0];\n\t\t\t}\n\t\t\t// adding guidelines for snapping\n\t\t\tthis.addGuidelinesForSnapping(guides);\n\n\t\t\tdocument.addEventListener('click', this.unSelectBox);\n\t\t\twindow.addEventListener('blur', this.unSelectBox);\n\t\t\tdocument.addEventListener('keydown', this.setShiftKeyState);\n\t\t\tdocument.addEventListener('keydown', this.unSelectBox);\n\t\t\tdocument.addEventListener('keyup', this.setShiftKeyState);\n\t\t\tdocument.addEventListener('contextmenu', this.selectBox);\n\n\t\t\tthis.setState({\n\t\t\t\tboundingBox,\n\t\t\t\tboxes,\n\t\t\t\tguides,\n\t\t\t\tactiveBoxes,\n\t\t\t\tactive,\n\t\t\t\tcaptionGroupsToIndexMap,\n\t\t\t});\n\t\t}\n\t\tif (this.props.isStylingPanelEnabled) {\n\t\t\tthis.mouseDragHandler();\n\t\t}\n\t}\n\n\tcomponentWillUnmount() {\n\t\tdocument.removeEventListener('click', this.unSelectBox);\n\t\twindow.removeEventListener('blur', this.unSelectBox);\n\t\tdocument.removeEventListener('keydown', this.setShiftKeyState);\n\t\tdocument.removeEventListener('keydown', this.unSelectBox);\n\t\tdocument.removeEventListener('keyup', this.setShiftKeyState);\n\t\tdocument.removeEventListener('contextmenu', this.selectBox);\n\t}\n\n\tcomponentDidUpdate(prevProps, prevState) {\n\t\tconst captionGroupsToIndexMap = {};\n\t\tif (this.state.activeBoxes.length > 0) {\n\t\t\tconst activeBoxWithoutLock = this.state.activeBoxes.filter(activeBox => {\n\t\t\t\treturn !this.state.boxes[activeBox] || !this.state.boxes[activeBox].isLayerLocked;\n\t\t\t});\n\t\t\tif (JSON.stringify(this.state.activeBoxes) !== JSON.stringify(activeBoxWithoutLock)) {\n\t\t\t\tthis.setState({\n\t\t\t\t\tactiveBoxes: activeBoxWithoutLock\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tif (this.props?.groups !== prevProps.groups) {\n\t\t\tlet {boxes} = this.state;\n\t\t\tboxes = Object.fromEntries(\n\t\t\t\tObject.entries(boxes)\n\t\t\t\t\t.filter(([key]) => !key.startsWith(`${GROUP_BOX_PREFIX}`))\n\t\t\t);\n\t\t\tif (this.props?.groups?.length === 0) {\n\t\t\t\tthis.setState({\n\t\t\t\t\tboxes\n\t\t\t\t});\n\t\t\t} else if (this.props?.groups?.length > 0) {\n\t\t\t\tlet active = this.state.active;\n\t\t\t\tthis.props?.groups?.forEach((groupArray, index) => {\n\t\t\t\t\tboxes[`${GROUP_BOX_PREFIX}${index}`] = getGroupCoordinates(boxes, groupArray);\n\t\t\t\t\tboxes[`${GROUP_BOX_PREFIX}${index}`].type = 'group';\n\t\t\t\t\tboxes[`${GROUP_BOX_PREFIX}${index}`].zIndex = 12;\n\t\t\t\t\tconst selections = [];\n\t\t\t\t\tfor (let box in boxes) {\n\t\t\t\t\t\tif (boxes.hasOwnProperty(box) && groupArray.includes(boxes?.[box]?.metadata?.captionIndex)) {\n\t\t\t\t\t\t\tselections.push(boxes[box]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tboxes[`${GROUP_BOX_PREFIX}${index}`].metadata = {type:'group'};\n\t\t\t\t\tboxes[`${GROUP_BOX_PREFIX}${index}`].selections = selections;\n\t\t\t\t\tboxes[`${GROUP_BOX_PREFIX}${index}`].identifier = `${GROUP_BOX_PREFIX}${index}`;\n\t\t\t\t\tboxes[`${GROUP_BOX_PREFIX}${index}`].groupedCaptions = groupArray;\n\t\t\t\t\tboxes[`${GROUP_BOX_PREFIX}${index}`].isLayerLocked = checkGroupChildElementsLocked(selections);\n\t\t\t\t\tcaptionGroupsToIndexMap[`${GROUP_BOX_PREFIX}${index}`] = groupArray;\n\t\t\t\t\t// To check if we added new group, then we select it as active\n\t\t\t\t\tif (this.props.groups?.length > prevProps.groups?.length) {\n\t\t\t\t\t\tactive = `${GROUP_BOX_PREFIX}${index}`;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tdelete boxes['box-ms'];\n\t\t\t\t\n\t\t\t\tthis.setState({\n\t\t\t\t\tboxes,\n\t\t\t\t\tcaptionGroupsToIndexMap,\n\t\t\t\t\tactive\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\t// adding user guides for snapping\n\t\tif (\n\t\t\tthis.props.xFactor !== prevProps.xFactor ||\n\t\t\tthis.props.yFactor !== prevProps.yFactor ||\n\t\t\tthis.props.userXGuides !== prevProps.userXGuides ||\n\t\t\tthis.props.userYGuides !== prevProps.userYGuides\n\t\t) {\n\t\t\tconst guides = this.state.guides\n\t\t\tthis.addGuidelinesForSnapping(guides)\n\t\t\tthis.setState({\n\t\t\t\tguides,\n\t\t\t})\n\t\t}\n\t}\n\n\t// keeping the z-index of group box with the last element in group\n\tgetReorderedBoxes(boxes, captionGroupsToIndexMap) {\n\t\tconst selectionBoxesWithHigherIndex = {};\n\n\t\tconst reversedKeys = Object.keys(boxes).reverse();\n\t\tObject.keys(captionGroupsToIndexMap).forEach(group => {\n\t\t\tif (boxes[group]) {\n\t\t\t\tfor (let i=0; i<reversedKeys.length; i++) {\n\t\t\t\t\tif (captionGroupsToIndexMap[group].includes(boxes[reversedKeys[i]].identifier)) {\n\t\t\t\t\t\tselectionBoxesWithHigherIndex[reversedKeys[i]] = group;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tconst reorderedBoxes = [];\n\t\tObject.keys(boxes).forEach(key => {\n\t\t\tif (!key.startsWith(GROUP_BOX_PREFIX)) {\n\t\t\t\treorderedBoxes.push(boxes[key]);\n\t\t\t\treorderedBoxes[reorderedBoxes.length - 1].id = key;\n\t\t\t}\n\t\t\tif (selectionBoxesWithHigherIndex[key]) {\n\t\t\t\treorderedBoxes.push(boxes[selectionBoxesWithHigherIndex[key]]);\n\t\t\t\treorderedBoxes[reorderedBoxes.length - 1].id = selectionBoxesWithHigherIndex[key];\n\t\t\t}\n\t\t});\n\n\t\treturn reorderedBoxes;\n\t}\n\n\taddGuidelinesForSnapping(guides) {\n\t\tconst xFactor = this.props.xFactor || 1\n\t\tconst yFactor = this.props.yFactor || 1\n\t\tconst userXGuidesPos = this.props.userXGuides\n\t\t\t? Object.keys(this.props.userXGuides).map((guideId) =>\n\t\t\t\t\tMath.round(this.props.userXGuides[guideId] / xFactor)\n\t\t\t\t)\n\t\t\t: []\n\t\tconst userYGuidesPos = this.props.userYGuides\n\t\t\t? Object.keys(this.props.userYGuides).map((guideId) =>\n\t\t\t\t\tMath.round(this.props.userYGuides[guideId] / yFactor)\n\t\t\t\t)\n\t\t\t: []\n\t\tguides.userGuides = {\n\t\t\tx: userXGuidesPos.sort((x, y) => x - y),\n\t\t\ty: userYGuidesPos.sort((x, y) => x - y),\n\t\t}\n\t}\n\n\tsetShiftKeyState(e) {\n\t\tthis.setState({\n\t\t\tisShiftKeyActive: e.shiftKey\n\t\t});\n\t}\n\n\tgetBoundingBoxElement() {\n\t\treturn this.boundingBox;\n\t}\n\n\tsetDragOrResizeState(state) {\n\t\tif (this.props.onDragOrResize) {\n\t\tthis.props.onDragOrResize(state);\n\t\t}\n\t\tthis.didDragOrResizeHappen = state;\n\t}\n\n\tsetPreventShortcutEvents(val) {\n\t\tthis.setState({ preventShortcutEvents: val });\n\t}\n\n\tupdateBoxAfterCrop(data) {\n\t\tconst boxes = Object.assign({}, this.state.boxes, {\n\t\t\t[data.newBoxData.node.id]: Object.assign({}, this.state.boxes[data.newBoxData.node.id], {\n\t\t\t\tx: data.newBoxData.x,\n\t\t\t\ty: data.newBoxData.y,\n\t\t\t\tleft: data.newBoxData.left,\n\t\t\t\ttop: data.newBoxData.top,\n\t\t\t\twidth: data.newBoxData.width,\n\t\t\t\theight: data.newBoxData.height\n\t\t\t})\n\t\t});\n\n\t\tconst guides = Object.assign({}, this.state.guides, {\n\t\t\t[data.newBoxData.node.id]: Object.assign({}, this.state.guides[data.newBoxData.node.id], {\n\t\t\t\tx: calculateGuidePositions(boxes[data.newBoxData.node.id], 'x'),\n\t\t\t\ty: calculateGuidePositions(boxes[data.newBoxData.node.id], 'y')\n\t\t\t})\n\t\t});\n\n\t\tthis.props.onCropEnd(data);\n\n\t\t// this.setState({\n\t\t// \tboxes,\n\t\t// \tguides\n\t\t// }, () => {\n\t\t\t\n\t\t// })\n\t}\n\n\tselectBox(e) {\n\t\tconst boundingBox = this.getBoundingBoxElement();\n\t\tconst boundingBoxPosition = boundingBox.current.getBoundingClientRect().toJSON();\n\t\tif (e.target && e.target.id?.indexOf('box') >= 0) {\n\t\t\tconst boxDimensions = e.target.getBoundingClientRect().toJSON();\n\t\t\tlet data = {\n\t\t\t\tx: boxDimensions.x - boundingBoxPosition.x,\n\t\t\t\ty: boxDimensions.y - boundingBoxPosition.y,\n\t\t\t\tleft: boxDimensions.left - boundingBoxPosition.x,\n\t\t\t\ttop: boxDimensions.top - boundingBoxPosition.y,\n\t\t\t\twidth: boxDimensions.width,\n\t\t\t\theight: boxDimensions.height,\n\t\t\t\tnode: e.target,\n\t\t\t\tmetadata: this.state.boxes[e.target.id].metadata\n\t\t\t};\n\t\t\tif (e.shiftKey || e.metaKey || e.ctrlKey || (e.type === 'contextmenu' && this.state.activeBoxes.length > 1) || ( e.target?.id?.indexOf(GROUP_BOX_PREFIX) >= 0 && this.props?.groups?.length > 0)) { // Here we are checking if the selected elements are greater than one or if any group is selected\n\t\t\t\tlet { activeBoxes, boxes, activeCaptionGroupCaptions } = this.state;\n\t\t\t\tif (activeBoxes.includes(e.target.id)) {\n\t\t\t\t\tif (e.unselect || !this.isDragHappening) {\n\t\t\t\t\t\tactiveBoxes = activeBoxes.filter(activeBox => activeBox !== e.target.id);\n\t\t\t\t\t}\n\t\t\t\t} else if (e.target.id !== 'box-ms') {\n\t\t\t\t\tif (e.target.id.startsWith(GROUP_BOX_PREFIX) && !e.shiftKey) {\n\t\t\t\t\t\tdelete boxes['box-ms'];\n\t\t\t\t\t\tactiveBoxes = [\n\t\t\t\t\t\t\te.target.id\n\t\t\t\t\t\t];\n\t\t\t\t\t} else {\n\t\t\t\t\t\tactiveBoxes = [\n\t\t\t\t\t\t\t...activeBoxes,\n\t\t\t\t\t\t\te.target.id\n\t\t\t\t\t\t];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (activeBoxes.length === 0) {\n\t\t\t\t\tlet { boxes } = this.state;\n\t\t\t\t\tdelete boxes['box-ms'];\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\tactiveBoxes: [],\n\t\t\t\t\t\tactiveCaptionGroupCaptions: [],\n\t\t\t\t\t\tboxes\n\t\t\t\t\t});\n\t\t\t\t} else if (this.props?.groups?.length > 0 && e.target.id.includes(GROUP_BOX_PREFIX)) { // Checking if the selected box is a group and then according to the selected box, we update the selections\n\t\t\t\t\tlet { boxes, active} = this.state;\n\t\t\t\t\tconst selections = boxes[e.target.id]?.selections;\n\n\n\t\t\t\t\t// testing if shift pressed and selecting 2 groups together. How it works. \n\t\t\t\t\tif (this.state.activeCaptionGroupCaptions.length > 1 && this.state.isShiftKeyActive) {\n\t\t\t\t\t\t\n\t\t\t\t\t\t// first take all the previous selected data. \n\t\t\t\t\t\t// store all the selections in an array, then add more.\n\t\t\t\t\t\tlet allCaptionsForMultipleSelections = [...this.state.activeCaptionGroupCaptions];\n\t\t\t\t\t\tboxes[e.target.id]?.selections?.forEach(selection => {\n\t\t\t\t\t\t\tconst currentBox = Object.keys(this.state.boxes).find(key => this.state.boxes[key].identifier === selection.metadata.captionIndex);\n\t\t\t\t\t\t\tallCaptionsForMultipleSelections.push(currentBox);\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\t// create new temp box to store both of the groups together\n\n\t\t\t\t\t\tboxes['box-ms'] = getMultipleSelectionCoordinates(boxes, allCaptionsForMultipleSelections);\n\t\t\t\t\t\tboxes['box-ms'].type = 'group';\n\t\t\t\t\t\tboxes['box-ms'].zIndex = 12;\n\t\t\t\t\t\tif (boxes['box-ms'].width === 0 && boxes['box-ms'].height === 0) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst selections = [];\n\t\t\t\t\t\tfor (let box in boxes) {\n\t\t\t\t\t\t\tif (boxes.hasOwnProperty(box) && allCaptionsForMultipleSelections.includes(box)) {\n\t\t\t\t\t\t\t\tselections.push(boxes[box]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (selections.length > 1) {\n\t\t\t\t\t\t\tdata = Object.assign({}, boxes['box-ms'], {\n\t\t\t\t\t\t\t\tmetadata: { type: 'group' },\n\t\t\t\t\t\t\t\tselections\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\tboxes['box-ms'] = data; // new temp box.\n\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\tboxes, // stores all the caption data \n\t\t\t\t\t\t\tactive: 'box-ms', // determine which box comes as active in preview, should be string always\n\t\t\t\t\t\t\tactiveBoxes: ['box-ms'], // we store all selected elements in a multiple selection in this state\n\t\t\t\t\t\t\tactiveCaptionGroupCaptions: allCaptionsForMultipleSelections // store all the captions from all the groups that are currently selected\n\t\t\t\t\t\t});\n\t\t\t\t\t} else if (this.state.activeBoxes.length > 0 && this.state.isShiftKeyActive) {\n\t\t\t\t\t\t// when single element was selected and then we are selecting group\n\t\t\t\t\t\tlet allCaptionsForMultipleSelections = [...this.state.activeBoxes];\n\t\t\t\t\t\tboxes[e.target.id]?.selections?.forEach(selection => {\n\t\t\t\t\t\t\tconst currentBox = Object.keys(this.state.boxes).find(key => this.state.boxes[key].identifier === selection.metadata.captionIndex);\n\t\t\t\t\t\t\tallCaptionsForMultipleSelections.push(currentBox);\n\t\t\t\t\t\t});\n\t\t\t\t\t\tboxes['box-ms'] = getMultipleSelectionCoordinates(boxes, allCaptionsForMultipleSelections);\n\t\t\t\t\t\tboxes['box-ms'].type = 'group';\n\t\t\t\t\t\tboxes['box-ms'].zIndex = 12;\n\t\t\t\t\t\tif (boxes['box-ms'].width === 0 && boxes['box-ms'].height === 0) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst selections = [];\n\t\t\t\t\t\tfor (let box in boxes) {\n\t\t\t\t\t\t\tif (boxes.hasOwnProperty(box) && activeBoxes.includes(box)) {\n\t\t\t\t\t\t\t\tselections.push(boxes[box]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (selections.length > 1) {\n\t\t\t\t\t\t\tdata = Object.assign({}, boxes['box-ms'], {\n\t\t\t\t\t\t\t\tmetadata: { type: 'group' },\n\t\t\t\t\t\t\t\tselections\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\tboxes['box-ms'] = data;\n\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\tactive: 'box-ms',\n\t\t\t\t\t\t\tactiveBoxes: ['box-ms'],\n\t\t\t\t\t\t\tboxes,\n\t\t\t\t\t\t\tactiveCaptionGroupCaptions: allCaptionsForMultipleSelections\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconst tempActiveBoxes =[];\n\t\t\t\t\t\tif (selections?.length > 1) {\n\t\t\t\t\t\t\tselections?.forEach(select => {\n\t\t\t\t\t\t\t\tconst currentBox = Object.keys(this.state.boxes).find(key => this.state.boxes[key].identifier === select.metadata.captionIndex);\n\t\t\t\t\t\t\t\ttempActiveBoxes.push(currentBox);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\tboxes[e.target.id] = getMultipleSelectionCoordinates(boxes, active);\n\t\t\t\t\t\tboxes[e.target.id].type = 'group';\n\t\t\t\t\t\tboxes[e.target.id].zIndex = 12;\n\t\t\t\t\t\tboxes[e.target.id].identifier = e.target.id;\n\t\t\t\t\t\tif (boxes[e.target.id].width === 0 && boxes[e.target.id].height === 0) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (selections?.length > 0) {\n\t\t\t\t\t\t\tdata = Object.assign({}, boxes[e.target.id], {\n\t\t\t\t\t\t\t\tmetadata: { type: 'group' },\n\t\t\t\t\t\t\t\tselections,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\tboxes[e.target.id].metadata = { type: 'group' };\n\t\t\t\t\t\tboxes[e.target.id].selections = selections;\n\n\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\t...this.state,\n\t\t\t\t\t\t\tactive: active,\n\t\t\t\t\t\t\tactiveBoxes: [active],\n\t\t\t\t\t\t\tboxes,\n\t\t\t\t\t\t\tactiveCaptionGroupCaptions: tempActiveBoxes\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\n\n\t\t\t\t\t\n\t\t\t\t} else {\n\t\t\t\t\tboxes['box-ms'] = getMultipleSelectionCoordinates(boxes, activeBoxes);\n\t\t\t\t\tboxes['box-ms'].type = 'group';\n\t\t\t\t\tboxes['box-ms'].zIndex = 12;\n\t\t\t\t\tif (boxes['box-ms'].width === 0 && boxes['box-ms'].height === 0) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tconst selections = [];\n\t\t\t\t\tfor (let box in boxes) {\n\t\t\t\t\t\tif (boxes.hasOwnProperty(box) && activeBoxes.includes(box)) {\n\t\t\t\t\t\t\tselections.push(boxes[box]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (selections.length > 1) {\n\t\t\t\t\t\tdata = Object.assign({}, boxes['box-ms'], {\n\t\t\t\t\t\t\tmetadata: { type: 'group' },\n\t\t\t\t\t\t\tselections\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\tactive: 'box-ms',\n\t\t\t\t\t\tactiveBoxes,\n\t\t\t\t\t\tboxes\n\t\t\t\t\t}, () => {\n\t\t\t\t\t\tthis.startingPositions = {};\n\t\t\t\t\t\tthis.state.activeBoxes.forEach(box => {\n\t\t\t\t\t\t\tthis.startingPositions[box] = this.state.boxes[box];\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tlet { activeBoxes, boxes } = this.state;\n\t\t\t\tdelete boxes['box-ms'];\n\t\t\t\tthis.setState({\n\t\t\t\t\tactive: e.target.id,\n\t\t\t\t\tactiveBoxes: [\n\t\t\t\t\t\te.target.id\n\t\t\t\t\t],\n\t\t\t\t\tboxes\n\t\t\t\t});\n\t\t\t}\n\t\t\tif (e.type === 'contextmenu') {\n\t\t\t\treturn this.props.onSecondaryClick && this.props.onSecondaryClick(e, data);\n\t\t\t}\n\t\t\tthis.props.onSelect && this.props.onSelect(e, data);\n\t\t} else if (e.target?.parentNode?.id?.indexOf('box') >= 0) {\n\t\t\tif (e.target.parentNode.id === '' || e.target.parentNode.id.startsWith('box-ms')) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst boxDimensions = e.target.parentNode.getBoundingClientRect().toJSON();\n\t\t\tlet data = {\n\t\t\t\tx: boxDimensions.x - boundingBoxPosition.x,\n\t\t\t\ty: boxDimensions.y - boundingBoxPosition.y,\n\t\t\t\tleft: boxDimensions.left - boundingBoxPosition.x,\n\t\t\t\ttop: boxDimensions.top - boundingBoxPosition.y,\n\t\t\t\twidth: boxDimensions.width,\n\t\t\t\theight: boxDimensions.height,\n\t\t\t\tnode: e.target.parentNode,\n\t\t\t\tmetadata: this.state.boxes[e.target.parentNode.id].metadata\n\t\t\t};\n\t\t\tif (e.shiftKey || e.metaKey || e.ctrlKey || (e.type === 'contextmenu' && this.state.activeBoxes.length > 1)) {\n\t\t\t\tlet { activeBoxes, boxes } = this.state;\n\t\t\t\tif (activeBoxes.includes(e.target.parentNode.id)) {\n\t\t\t\t\tactiveBoxes = activeBoxes.filter(activeBox => activeBox !== e.target.parentNode.id);\n\t\t\t\t} else if (e.target.id !== 'box-ms') {\n\t\t\t\t\tactiveBoxes = [\n\t\t\t\t\t\t...activeBoxes,\n\t\t\t\t\t\te.target.id\n\t\t\t\t\t];\n\t\t\t\t}\n\t\t\t\tboxes['box-ms'] = getMultipleSelectionCoordinates(boxes, activeBoxes);\n\t\t\t\tboxes['box-ms'].type = 'group';\n\t\t\t\tboxes['box-ms'].zIndex = 12;\n\t\t\t\tconst selections = [];\n\t\t\t\tfor (let box in boxes) {\n\t\t\t\t\tif (boxes.hasOwnProperty(box) && activeBoxes.includes(box)) {\n\t\t\t\t\t\tselections.push(boxes[box]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tdata = Object.assign({}, boxes['box-ms'], {\n\t\t\t\t\tmetadata: { type: 'group' },\n\t\t\t\t\tselections\n\t\t\t\t});\n\t\t\t\tthis.setState({\n\t\t\t\t\tactive: 'box-ms',\n\t\t\t\t\tactiveBoxes,\n\t\t\t\t\tboxes\n\t\t\t\t}, () => {\n\t\t\t\t\tthis.startingPositions = {};\n\t\t\t\t\tthis.state.activeBoxes.forEach(box => {\n\t\t\t\t\t\tthis.startingPositions[box] = this.state.boxes[box];\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tlet { boxes } = this.state;\n\t\t\t\tdelete boxes['box-ms'];\n\t\t\t\tthis.setState({\n\t\t\t\t\tactive: e.target.parentNode.id,\n\t\t\t\t\tactiveBoxes: [\n\t\t\t\t\t\te.target.parentNode.id\n\t\t\t\t\t],\n\t\t\t\t\tboxes\n\t\t\t\t});\n\t\t\t}\n\t\t\tif (e.type === 'contextmenu') {\n\t\t\t\treturn this.props.onSecondaryClick && this.props.onSecondaryClick(e, data);\n\t\t\t}\n\t\t\tthis.props.onSelect && this.props.onSelect(e, data);\n\t\t}\n\t}\n\n\tunSelectBox(e) {\n\t\tif (\n\t\t\tthis.didDragHappen &&\n\t\t\t!(e.type === 'keydown' && (e.key === 'Escape' || e.key === 'Esc'))\n\t\t) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.didResizeHappen || this.didRotateHappen) {\n\t\t\tthis.didResizeHappen = false;\n\t\t\tthis.didRotateHappen = false;\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.props.isEscUnselectActive && (e.type === 'keydown' && (e.key === 'Escape' || e.key === 'Esc'))) {\n\t\t\tthis.setState({\n\t\t\t\t...this.state,\n\t\t\t\tactiveBoxes: [],\n\t\t\t\tactiveCaptionGroupCaptions: [],\n\t\t\t})\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tif (this.props.isDragging || (e.type === 'keydown' && (e.shiftKey || e.altKey || e.ctrlKey || e.metaKey || e.keyCode === 13))) {\n\t\t\treturn;\n\t\t}\n\n\t\t// prevent de-selection on pressing custom keycodes (configured as props)\n\t\tif (\n\t\t\te.type === 'keydown' &&\n\t\t\tArray.isArray(this.props.preventDeselectionKeyCodes) &&\n\t\t\tthis.props.preventDeselectionKeyCodes.includes(e.keyCode)\n\t\t) {\n\t\t\treturn;\n\t\t}\n\t\t\t\t\n\t\tif (\n\t\t\t(e.type === 'keydown' && (e.key === 'Escape' || e.key === 'Esc')) ||\n\t\t\te.target === window ||\n\t\t\t(\n\t\t\t\te.target &&\n\t\t\t\te.target.id?.indexOf('box') === -1 &&\n\t\t\t\te.target.parentNode &&\n\t\t\t\te.target.parentNode.id?.indexOf('box') === -1\n\t\t\t)\n\t\t) {\n\t\t\tif (typeof this.props.isValidUnselect === 'function' && this.props.isValidUnselect(e) === false) {\n\t\t\t\tthis.setPreventShortcutEvents(true);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst { boxes } = this.state;\n\t\t\tdelete boxes['box-ms'];\n\t\t\tthis.setState({\n\t\t\t\tactive: '',\n\t\t\t\tactiveBoxes: [],\n\t\t\t\tboxes,\n\t\t\t\tpreventShortcutEvents: false,\n\t\t\t\tactiveCaptionGroupCaptions: [],\n\t\t\t});\n\t\t\tthis.props.onUnselect && this.props.onUnselect(e);\n\t\t}\n\t}\n\n\tdragStartHandler(e, data) {\n\t\tthis.setState({\n\t\t\tactive: data.node.id,\n\t\t\tdragging: true\n\t\t});\n\n\t\tlet newData = Object.assign({}, data);\n\t\tif (this.state.boxes?.[data.node.id]?.metadata && data.node?.id?.indexOf(GROUP_BOX_PREFIX) < 0 && (this.state.activeCaptionGroupCaptions.length <= 0 && this.state.active !== 'box-ms')) { // Just updating if the group is present then we skip metadata as we use to to update single captions\n\t\t\tnewData.metadata = this.state.boxes[data.node.id].metadata;\n\t\t}\n\t\tif (data.type && data.type === 'group') {\n\t\t\tif (this.state.activeCaptionGroupCaptions.length > 0 && this.state.active === 'box-ms' && data.node?.id === 'box-ms') { // so here we don't have all the boxes in activeBoxes for group so now we store it in captionGroupsToIndexMap and we traverse it\n\t\t\t\tnewData.selections = this.state.activeCaptionGroupCaptions?.map(box => {\n\t\t\t\t\treturn Object.assign({}, this.state.boxes[box]);\n\t\t\t\t});\n\t\t\t} else if (data.node?.id?.indexOf(GROUP_BOX_PREFIX) >= 0) { // so here we don't have all the boxes in activeBoxes for group so now we store it in captionGroupsToIndexMap and we traverse it\n\t\t\t\tnewData.selections = this.state.captionGroupsToIndexMap?.[data.node.id]?.map(index => {\n\t\t\t\t\tconst currentBox = Object.keys(this.state.boxes).find(key => this.state.boxes[key].identifier === index);\n\t\t\t\t\treturn Object.assign({}, this.state.boxes[currentBox]);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tnewData.selections = this.state.activeBoxes.map(box => {\n\t\t\t\t\treturn Object.assign({}, this.state.boxes[box]);\n\t\t\t\t});\n\t\t\t}\n\t\t} else if (!(e.shiftKey || e.metaKey || e.ctrlKey)) {\n\t\t\tthis.setState({\n\t\t\t\tactiveBoxes: [\n\t\t\t\t\te.target.parentNode.id\n\t\t\t\t],\n\t\t\t});\n\t\t}\n\n\t\tthis.props.onDragStart && this.props.onDragStart(e, newData);\n\n\t\t// Update starting positions so we can use it to update when group resize happens\n\t\tif (data.type && data.type === 'group') {\n\t\t\tthis.startingPositions = {};\n\t\t\tif (this.state.active === 'box-ms' && data.node?.id === 'box-ms') { // so here we don't have all the boxes in activeBoxes for group so now we store it in captionGroupsToIndexMap and we traverse it\n\t\t\t\tif (this.state.activeBoxes.length > 1) { // if one element and group is selected\n\t\t\t\t\tthis.state.activeBoxes.forEach(box => {\n\t\t\t\t\t\tif (box.startsWith(GROUP_BOX_PREFIX) || box === 'box-ms') { // if more than 1 group is selected\n\t\t\t\t\t\t\tthis.state.activeCaptionGroupCaptions?.forEach(activeBox => {\n\t\t\t\t\t\t\t\tthis.startingPositions[activeBox] = this.state.boxes[activeBox];\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.startingPositions[box] = this.state.boxes[box];\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t} else if (this.state.activeBoxes.length === 1 && this.state.activeBoxes[0] !== 'box-ms' && this.state.activeBoxes[0].indexOf(GROUP_BOX_PREFIX) < 0) {\n\t\t\t\t\tthis.startingPositions = {};\n\t\t\t\t\tconst boxKey = this.state.activeBoxes[0];\n\t\t\t\t\tthis.startingPositions[boxKey] = Object.assign({}, this.state.boxes[boxKey]);\n\t\t\t\t} else { // if multiple selection and only groups selected\n\t\t\t\t\tthis.state.activeCaptionGroupCaptions.forEach(box => {\n\t\t\t\t\t\tthis.startingPositions[box] = this.state.boxes[box];\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t} else if (data.node?.id?.indexOf(GROUP_BOX_PREFIX) >= 0) {\n\t\t\t\tthis.state.captionGroupsToIndexMap[data.node.id].forEach(index => {\n\t\t\t\t\tconst currentBox = Object.keys(this.state.boxes).find(key => this.state.boxes[key].identifier === index);\n\t\t\t\t\tthis.startingPositions[currentBox] = this.state.boxes[currentBox];\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tthis.state.activeBoxes.forEach(activeBox => {\n\t\t\t\t\tthis.startingPositions[activeBox] = this.state.boxes[activeBox];\n\t\t\t\t});\n\t\t\t}\n\t\t} else {\n\t\t\tthis.startingPositions = {};\n\t\t\tthis.startingPositions[data.node.id] = Object.assign({}, this.state.boxes[data.node.id]);\n\t\t}\n\t}\n\n\tdragHandler(e, data) {\n\t\tlet newData;\n\t\tif (this.state.dragging) {\n\t\t\tnewData = Object.assign({}, data);\n\t\t\tif ((this.state.boxes?.[this.state.active]?.metadata && this.state.active?.indexOf(GROUP_BOX_PREFIX) < 0) && (this.state.activeCaptionGroupCaptions.length <= 0 && this.state.active !== 'box-ms')) {\n\t\t\t\tnewData.metadata = this.state.boxes[this.state.active].metadata;\n\t\t\t}\n\t\t\tif (data.type && data.type === 'group') {\n\t\t\t\tnewData.selections = [];\n\n\t\t\t\tif (this.state.active === 'box-ms' && data.node?.id === 'box-ms') { // so here we don't have all the boxes in activeBoxes for group so now we store it in captionGroupsToIndexMap and we traverse it\n\t\t\t\t\tif (this.state.activeBoxes.length > 1) { // if one element and group is selected\n\t\t\t\t\t\tthis.state.activeBoxes.forEach(box => {\n\t\t\t\t\t\t\tif (box.startsWith(GROUP_BOX_PREFIX) || box === 'box-ms') {\n\t\t\t\t\t\t\t\tthis.state.activeCaptionGroupCaptions?.forEach(activeBox => {\n\t\t\t\t\t\t\t\t\tconst currentBox = Object.assign({}, this.state.boxes[activeBox], {\n\t\t\t\t\t\t\t\t\t\tdeltaX: data.deltaX,\n\t\t\t\t\t\t\t\t\t\tdeltaY: data.deltaY,\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\tnewData.selections.push(currentBox);\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tconst currentBox = Object.assign({}, this.state.boxes[box], {\n\t\t\t\t\t\t\t\t\tdeltaX: data.deltaX,\n\t\t\t\t\t\t\t\t\tdeltaY: data.deltaY,\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tnewData.selections.push(currentBox);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t} else if (this.state.activeBoxes.length === 1 && this.state.activeBoxes[0] !== 'box-ms' && this.state.activeBoxes[0].indexOf(GROUP_BOX_PREFIX) < 0) {\n\t\t\t\t\t\tconst currentBox = Object.assign({}, this.state.boxes[this.state.activeBoxes[0]], {\n\t\t\t\t\t\t\tdeltaX: data.deltaX,\n\t\t\t\t\t\t\tdeltaY: data.deltaY,\n\t\t\t\t\t\t});\n\t\t\t\t\t\tnewData.selections.push(currentBox);\n\t\t\t\t\t} else { // if multiple selection and only groups selected\n\t\t\t\t\t\tthis.state.activeCaptionGroupCaptions.forEach(activeBox => {\n\t\t\t\t\t\t\tconst currentBox = Object.assign({}, this.state.boxes[activeBox], {\n\t\t\t\t\t\t\t\tdeltaX: data.deltaX,\n\t\t\t\t\t\t\t\tdeltaY: data.deltaY,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tnewData.selections.push(currentBox);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t} else if (data.node?.id?.indexOf(GROUP_BOX_PREFIX) >= 0) {\n\t\t\t\t\tthis.state.captionGroupsToIndexMap[data.node.id].forEach(captionIndex => {\n\t\t\t\t\t\tconst currentBoxKey = Object.keys(this.state.boxes).find(key => this.state.boxes[key].identifier === captionIndex);\n\t\t\t\t\t\tconst currentBox = Object.assign({}, this.state.boxes[currentBoxKey], {\n\t\t\t\t\t\t\tdeltaX: data.deltaX,\n\t\t\t\t\t\t\tdeltaY: data.deltaY,\n\t\t\t\t\t\t});\n\t\t\t\t\t\tnewData.selections.push(currentBox);\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tthis.state.activeBoxes.forEach(activeBox => {\n\t\t\t\t\t\tconst currentBox = Object.assign({}, this.state.boxes[activeBox], {\n\t\t\t\t\t\t\tdeltaX: data.deltaX,\n\t\t\t\t\t\t\tdeltaY: data.deltaY,\n\t\t\t\t\t\t});\n\t\t\t\t\t\tnewData.selections.push(currentBox);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// this.props.onDrag && this.props.onDrag(e, newData);\n\t\t}\n\n\t\tlet boxes = null;\n\t\tlet guides = null;\n\t\tlet hoverGroupedData = [];\n\n\t\tif (this.state.active === 'box-ms' && data.node?.id === 'box-ms') { // so here we don't have all the boxes in activeBoxes for group so now we store it in captionGroupsToIndexMap and we traverse it\n\t\t\tif (this.state.activeBoxes.length > 1) { // if one element and group is selected\n\t\t\t\tthis.state.activeBoxes.forEach(box => {\n\t\t\t\t\tif (box.startsWith(GROUP_BOX_PREFIX) || box === 'box-ms') {\n\t\t\t\t\t\tthis.state.activeCaptionGroupCaptions?.forEach(activeBox => {\n\t\t\t\t\t\t\thoverGroupedData.push(activeBox);\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\thoverGroupedData.push(box);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else if (this.state.activeBoxes.length === 1 && this.state.activeBoxes[0] !== 'box-ms' && this.state.activeBoxes[0].indexOf(GROUP_BOX_PREFIX) < 0) {\n\t\t\t\thoverGroupedData.push(this.state.activeBoxes[0]);\n\t\t\t} else { // if multiple selection and only groups selected\n\t\t\t\tthis.state.activeCaptionGroupCaptions.forEach(activeBox => {\n\t\t\t\t\thoverGroupedData.push(activeBox);\n\t\t\t\t});\n\t\t\t}\n\t\t} else if (data.node?.id?.indexOf(GROUP_BOX_PREFIX) >= 0) {\t\n\t\t\tthis.state.captionGroupsToIndexMap[data.node.id].forEach(captionIndex => {\n\t\t\t\tconst currentBoxKey = Object.keys(this.state.boxes).find(key => this.state.boxes[key].identifier === captionIndex);\n\t\t\t\thoverGroupedData.push(currentBoxKey);\n\t\t\t});\n\t\t} else {\n\t\t\tthis.state.activeBoxes.forEach(activeBox => {\n\t\t\t\thoverGroupedData.push(activeBox);\n\t\t\t});\n\t\t}\n\n\t\tif (data.type && data.type === 'group') {\n\t\t\tboxes = {};\n\t\t\tfor (let box in this.state.boxes) {\n\t\t\t\tif (this.state.boxes.hasOwnProperty(box)) {\n\t\t\t\t\tif (hoverGroupedData.includes(box)) {\n\t\t\t\t\t\tboxes[box] = Object.assign({}, this.state.boxes[box], {\n\t\t\t\t\t\t\tx: this.startingPositions[box].x + data.deltaX,\n\t\t\t\t\t\t\ty: this.startingPositions[box].y + data.deltaY,\n\t\t\t\t\t\t\tleft: this.startingPositions[box].left + data.deltaX,\n\t\t\t\t\t\t\ttop: this.startingPositions[box].top + data.deltaY,\n\t\t\t\t\t\t\tdeltaX: data.deltaX,\n\t\t\t\t\t\t\tdeltaY: data.deltaY,\n\t\t\t\t\t\t});\n\t\t\t\t\t} else if (this.state.activeBoxes?.includes(box) && this.state.active?.indexOf(GROUP_BOX_PREFIX) < 0 && this.state.activeCaptionGroupCaptions.length <= 0) {\n\t\t\t\t\t\tboxes[box] = Object.assign({}, this.state.boxes[box], {\n\t\t\t\t\t\t\tx: this.startingPositions[box].x + data?.deltaX ?? 0,\n\t\t\t\t\t\t\ty: this.startingPositions[box].y + data?.deltaY ?? 0,\n\t\t\t\t\t\t\tleft: this.startingPositions[box].left + data?.deltaX ?? 0,\n\t\t\t\t\t\t\ttop: this.startingPositions[box].top + data?.deltaY ?? 0,\n\t\t\t\t\t\t\tdeltaX: data.deltaX,\n\t\t\t\t\t\t\tdeltaY: data.deltaY,\n\t\t\t\t\t\t});\n\t\t\t\t\t} else if (box === 'box-ms' || box?.indexOf(GROUP_BOX_PREFIX) >= 0) {\n\t\t\t\t\t\tboxes[box] = Object.assign({}, data);\n\t\t\t\t\t\tdelete boxes[box].deltaX;\n\t\t\t\t\t\tdelete boxes[box].deltaY;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tboxes[box] = this.state.boxes[box];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tguides = Object.keys(this.state.guides).map(guide => {\n\t\t\t\tif (this.state.active?.indexOf(GROUP_BOX_PREFIX) >= 0 || (this.state.activeCaptionGroupCaptions.length > 0 && this.state.active === 'box-ms')) { // Checking it for group inside activeCaptionGroupCaptions state instead of activeBoxes\n\t\t\t\t\tif (this.state.activeCaptionGroupCaptions.includes(guide)) {\n\t\t\t\t\t\treturn Object.assign({}, this.state.guides[guide], {\n\t\t\t\t\t\t\tx: calculateGuidePositions(boxes[guide], 'x'),\n\t\t\t\t\t\t\ty: calculateGuidePositions(boxes[guide], 'y')\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (this.state.activeBoxes.includes(guide)) {\n\t\t\t\t\t\treturn Object.assign({}, this.state.guides[guide], {\n\t\t\t\t\t\t\tx: calculateGuidePositions(boxes[guide], 'x'),\n\t\t\t\t\t\t\ty: calculateGuidePositions(boxes[guide], 'y')\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn this.state.guides[guide];\n\t\t\t});\n\t\t} else {\n\t\t\tboxes = Object.assign({}, this.state.boxes, {\n\t\t\t\t[data.node.id]: Object.assign({}, this.state.boxes[data.node.id], {\n\t\t\t\t\tx: data.x,\n\t\t\t\t\ty: data.y,\n\t\t\t\t\tleft: data.left,\n\t\t\t\t\ttop: data.top,\n\t\t\t\t\twidth: data.width,\n\t\t\t\t\theight: data.height,\n\t\t\t\t\tdeltaX: data.deltaX,\n\t\t\t\t\tdeltaY: data.deltaY,\n\t\t\t\t})\n\t\t\t});\n\n\t\t\tguides = Object.assign({}, this.state.guides, {\n\t\t\t\t[data.node.id]: Object.assign({}, this.state.guides[data.node.id], {\n\t\t\t\t\tx: calculateGuidePositions(boxes[data.node.id], 'x'),\n\t\t\t\t\ty: calculateGuidePositions(boxes[data.node.id], 'y')\n\t\t\t\t})\n\t\t\t});\n\t\t}\n\n\t\tthis.setState({\n\t\t\tguidesActive: true,\n\t\t\tboxes,\n\t\t\tguides\n\t\t}, () => {\n\t\t\tif (this.props.snap && this.state.active && this.state.guides && data.type !== 'group') {\n\t\t\t\tconst match = proximityListener(this.state.active, this.state.guides);\n\t\t\t\tlet newActiveBoxLeft = this.state.boxes[this.state.active].left;\n\t\t\t\tlet newActiveBoxTop = this.state.boxes[this.state.active].top;\n\t\t\t\tfor (let axis in match) {\n\t\t\t\t\tconst { activeBoxGuides, matchedArray, proximity } = match[axis];\n\t\t\t\t\tconst activeBoxProximityIndex = proximity.activeBoxIndex;\n\t\t\t\t\tconst matchedBoxProximityIndex = proximity.matchedBoxIndex;\n\n\t\t\t\t\tif (axis === 'x') {\n\t\t\t\t\t\tif (activeBoxGuides[activeBoxProximityIndex] > matchedArray[matchedBoxProximityIndex]) {\n\t\t\t\t\t\t\tnewActiveBoxLeft = this.state.boxes[this.state.active].left - proximity.value;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tnewActiveBoxLeft = this.state.boxes[this.state.active].left + proximity.value;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (activeBoxGuides[activeBoxProximityIndex] > matchedArray[matchedBoxProximityIndex]) {\n\t\t\t\t\t\t\tnewActiveBoxTop = this.state.boxes[this.state.active].top - proximity.value;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tnewActiveBoxTop = this.state.boxes[this.state.active].top + proximity.value;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tconst boxes = Object.assign({}, this.state.boxes, {\n\t\t\t\t\t[this.state.active]: Object.assign({}, this.state.boxes[this.state.active], {\n\t\t\t\t\t\tleft: newActiveBoxLeft,\n\t\t\t\t\t\ttop: newActiveBoxTop\n\t\t\t\t\t})\n\t\t\t\t});\n\t\t\t\tconst guides = Object.assign({}, this.state.guides, {\n\t\t\t\t\t[this.state.active]: Object.assign({}, this.state.guides[this.state.active], {\n\t\t\t\t\t\tx: calculateGuidePositions(boxes[this.state.active], 'x'),\n\t\t\t\t\t\ty: calculateGuidePositions(boxes[this.state.active], 'y')\n\t\t\t\t\t})\n\t\t\t\t})\n\n\t\t\t\tconst activeBox = {\n\t\t\t\t\tleft: this.state.boxes[this.state.active].left,\n\t\t\t\t\ttop: this.state.boxes[this.state.active].top,\n\t\t\t\t\tx: this.state.boxes[this.state.active]?.x || 0,\n\t\t\t\t\ty: this.state.boxes[this.state.active]?.y || 0,\n\t\t\t\t}\n\n\t\t\t\tObject.keys(guides).map(box => {\n\t\t\t\t\tguides?.[box]?.x.map(position => {\n\t\t\t\t\t\tif (match?.x?.intersection === position) {\n\t\t\t\t\t\t\tactiveBox.left = newActiveBoxLeft;\n\t\t\t\t\t\t\tactiveBox.x = newActiveBoxLeft;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\tguides?.[box]?.y.map(position => {\n\t\t\t\t\t\tif (match?.y?.intersection === position) {\n\t\t\t\t\t\t\tactiveBox.top = newActiveBoxTop;\n\t\t\t\t\t\t\tactiveBox.y = newActiveBoxTop;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\n\t\t\t\tnewData = Object.assign({}, newData, {\n\t\t\t\t\t// calculating starting position: (newData.x - newData.deltaX) for snapped delta\n\t\t\t\t\tdeltaX: activeBox?.x - (newData?.x - newData?.deltaX) || 0,\n\t\t\t\t\tdeltaY: activeBox?.y - (newData?.y - newData?.deltaY) || 0,\n\t\t\t\t\t...activeBox\n\t\t\t\t});\n\n\t\t\t\tconst newBoxes = Object.assign({}, this.state.boxes, {\n\t\t\t\t\t[this.state.active] : Object.assign({}, this.state.boxes[this.state.active], {\n\t\t\t\t\t\t...activeBox,\n\t\t\t\t\t\tdeltaX: newData.deltaX,\n\t\t\t\t\t\tdeltaY: newData.deltaY,\n\t\t\t\t\t})\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tthis.setState({\n\t\t\t\t\tboxes: newBoxes,\n\t\t\t\t\tguides,\n\t\t\t\t\tmatch,\n\t\t\t\t\tactiveBoxSnappedPosition: Object.assign({}, {\n\t\t\t\t\t\tdeltaX: activeBox?.x - (newData?.x - newData.deltaX),\n\t\t\t\t\t\tdeltaY: activeBox?.y - (newData?.y - newData.deltaY),\n\t\t\t\t\t\t...activeBox\n\t\t\t\t\t})\n\t\t\t\t});\n\t\t\t}\n\t\t\tthis.state.dragging && this.props.onDrag && this.props.onDrag(e, newData);\n\t\t});\n\t}\n\n\tdragEndHandler(e, data) {\n\t\tthis.setState({\n\t\t\tdragging: false,\n\t\t\tguidesActive: false\n\t\t});\n\n\t\tlet newData = Object.assign({}, data);\n\t\tif ((this.state.boxes?.[this.state.active]?.metadata && this.state.active?.indexOf(GROUP_BOX_PREFIX) < 0) && (this.state.activeCaptionGroupCaptions.length <= 0 && this.state.active !== 'box-ms')) {\n\t\t\tnewData.metadata = this.state.boxes[this.state.active].metadata;\n\t\t}\n\n\t\tif (data.type && data.type === 'group') {\n\t\t\tnewData.selections = [];\n\t\t\tif (this.state.active === 'box-ms' && data.node?.id === 'box-ms') { // so here we don't have all the boxes in activeBoxes for group so now we store it in captionGroupsToIndexMap and we traverse it\n\t\t\t\tif (this.state.activeBoxes.length > 1) { // if one element and group is selected\n\t\t\t\t\tthis.state.activeBoxes.forEach(box => {\n\t\t\t\t\t\tif (box.startsWith(GROUP_BOX_PREFIX) || box === 'box-ms') {\n\t\t\t\t\t\t\tthis.state.activeCaptionGroupCaptions?.forEach(activeBox => {\n\t\t\t\t\t\t\t\tconst currentBox = Object.assign({}, this.state.boxes[activeBox], {\n\t\t\t\t\t\t\t\t\tdeltaX: data.deltaX,\n\t\t\t\t\t\t\t\t\tdeltaY: data.deltaY,\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tnewData.selections.push(currentBox);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconst currentBox = Object.assign({}, this.state.boxes[box], {\n\t\t\t\t\t\t\t\tdeltaX: data.deltaX,\n\t\t\t\t\t\t\t\tdeltaY: data.deltaY,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tnewData.selections.push(currentBox);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t} else if (this.state.activeBoxes.length === 1 && this.state.activeBoxes[0] !== 'box-ms' && this.state.activeBoxes[0].indexOf(GROUP_BOX_PREFIX) < 0) {\n\t\t\t\t\tconst currentBox = Object.assign({}, this.state.boxes[this.state.activeBoxes[0]], {\n\t\t\t\t\t\tdeltaX: data.deltaX,\n\t\t\t\t\t\tdeltaY: data.deltaY,\n\t\t\t\t\t});\n\t\t\t\t\tnewData.selections.push(currentBox);\n\t\t\t\t} else { // if multiple selection and only groups selected\n\t\t\t\t\tthis.state.activeCaptionGroupCaptions.forEach(activeBox => {\n\t\t\t\t\t\tconst currentBox = Object.assign({}, this.state.boxes[activeBox], {\n\t\t\t\t\t\t\tdeltaX: data.deltaX,\n\t\t\t\t\t\t\tdeltaY: data.deltaY,\n\t\t\t\t\t\t});\n\t\t\t\t\t\tnewData.selections.push(currentBox);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t} else if (data.node?.id?.indexOf(GROUP_BOX_PREFIX) >= 0) {\n\t\t\t\tthis.state.captionGroupsToIndexMap[data.node.id].forEach(captionIndex => {\n\t\t\t\t\tconst currentBoxKey = Object.keys(this.state.boxes).find(key => this.state.boxes[key].identifier === captionIndex);\n\t\t\t\t\tconst currentBox = Object.assign({}, this.state.boxes[currentBoxKey], {\n\t\t\t\t\t\tdeltaX: data.deltaX,\n\t\t\t\t\t\tdeltaY: data.deltaY,\n\t\t\t\t\t});\n\t\t\t\t\tnewData.selections.push(currentBox);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tthis.state.activeBoxes.forEach(activeBox => {\n\t\t\t\t\tconst currentBox = Object.assign({}, this.state.boxes[activeBox], {\n\t\t\t\t\t\tdeltaX: data.deltaX,\n\t\t\t\t\t\tdeltaY: data.deltaY,\n\t\t\t\t\t});\n\t\t\t\t\tnewData.selections.push(currentBox);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tif (this.props.snap && this.state.active && this.state.guides && data.type !== 'group') {\n\t\t\tnewData = Object.assign({}, newData, {\n\t\t\t\t...this.state.activeBoxSnappedPosition\n\t\t\t});\n\t\t}\n\t\tif (this.state.activeCaptionGroupCaptions.length > 0 && this.state.active === 'box-ms') {\n\t\t\tthis.setState({\n\t\t\t\t...this.state,\n\t\t\t\tactive: '',\n\t\t\t\tactiveBoxes: [],\n\t\t\t\tactiveCaptionGroupCaptions: [],\n\t\t\t});\n\t\t};\n\t\tthis.props.onDragEnd && this.props.onDragEnd(e, newData);\n\t}\n\n\tresizeStartHandler(e, data) {\n\t\tthis.setState({\n\t\t\tactive: data.node.id,\n\t\t\tresizing: true\n\t\t});\n\t\tthis.didResizeHappen = true;\n\t\tlet newData = Object.assign({}, data);\n\t\tif (this.state.boxes[data.node.id].metadata) {\n\t\t\tnewData.metadata = this.state.boxes[data.node.id].metadata;\n\t\t}\n\t\tthis.props.onResizeStart && this.props.onResizeStart(e, newData);\n\n\t\t// Update starting positions so we can use it to update when group resize happens\n\t\tif (data.type && data.type === 'group') {\n\t\t\tthis.startingPositions = {};\n\t\t\tif (this.state.active?.indexOf(GROUP_BOX_PREFIX) >= 0 || (this.state.activeCaptionGroupCaptions.length > 0 && this.state.active === 'box-ms')) {\n\t\t\t\tthis.state.activeCaptionGroupCaptions.forEach(box => {\n\t\t\t\t\tthis.startingPositions[box] = this.state.boxes[box];\n\t\t\t\t});\n\t\t\t\tthis.startingPositions[this.state.active] = this.state.boxes[this.state.active];\n\t\t\t} else {\n\t\t\t\tthis.state.activeBoxes.forEach(box => {\n\t\t\t\t\tthis.startingPositions[box] = this.state.boxes[box];\n\t\t\t\t});\n\t\t\t\tthis.startingPositions['box-ms'] = this.state.boxes['box-ms'];\n\t\t\t}\n\t\t} else {\n\t\t\tthis.startingPositions = {};\n\t\t\tthis.startingPositions[this.state.active] = this.state.boxes[this.state.active];\n\t\t}\n\t}\n\n\tresizeHandler(e, data) {\n\t\tif (this.state.resizing) {\n\t\t\tlet newData = Object.assign({}, data);\n\t\t\tif (this.state.boxes?.[this.state.active]?.metadata && this.state.active?.indexOf(GROUP_BOX_PREFIX) < 0 && (this.state.activeCaptionGroupCaptions.length <= 0 && this.state.active !== 'box-ms')) {\n\t\t\t\tnewData.metadata = this.state.boxes[this.state.active].metadata;\n\t\t\t}\n\t\t\tthis.props.onResize && this.props.onResize(e, newData);\n\t\t}\n\n\t\tlet boxes = null;\n\t\tlet guides = null;\n\t\tif (data.type && data.type === 'group') {\n\t\t\tboxes = {};\n\t\t\tconst boundingBox = this.getBoundingBoxElement();\n\t\t\tconst boundingBoxPosition = getOffsetCoordinates(boundingBox.current);\n\t\t\tfor (let box in this.state.boxes) {\n\t\t\t\tif (this.state.boxes.hasOwnProperty(box)) {\n\t\t\t\t\tif (this.state.activeCaptionGroupCaptions.includes(box)) {\n\t\t\t\t\t\t// Adding bounding box's starting position\n\t\t\t\t\t\t// This is because it's added only to the group's box and not the individual members of the group\n\t\t\t\t\t\tif ((this.startingPositions[this.state.active] && this.state.active?.indexOf(GROUP_BOX_PREFIX) >= 0) || (this.state.activeCaptionGroupCaptions.length > 0 && this.state.active === 'box-ms')) { // condition for group, instead of activeBoxes will use the correct inside boxes to resize them\n\t\t\t\t\t\t\tconst widthDiff = ((data.deltaW / Math.abs(this.startingPositions[this.state.active].width)) * Math.abs(this.startingPositions[box].width));\n\t\t\t\t\t\t\tconst heightDiff = ((data.deltaH / Math.abs(this.startingPositions[this.state.active].height)) * Math.abs(this.startingPositions[box].height));\n\n\t\t\t\t\t\t\tconst initialDeltaXPercentage = (this.startingPositions[box].x - this.startingPositions[this.state.active].x) / this.startingPositions[this.state.active].width;\n\t\t\t\t\t\t\tconst xDiff = data.deltaX + initialDeltaXPercentage * (data.deltaW);\n\n\t\t\t\t\t\t\tconst initialDeltaYPercentage = (this.startingPositions[box].y - this.startingPositions[this.state.active].y) / this.startingPositions[this.state.active].height;\n\t\t\t\t\t\t\tconst yDiff = data.deltaY + initialDeltaYPercentage * (data.deltaH);\n\n\t\t\t\t\t\t\tboxes[box] = Object.assign({}, this.state.boxes[box], {\n\t\t\t\t\t\t\t\tx: boundingBoxPosition.x + this.startingPositions[box].x + xDiff,\n\t\t\t\t\t\t\t\ty: boundingBoxPosition.y + this.startingPositions[box].y + yDiff,\n\t\t\t\t\t\t\t\tleft: boundingBoxPosition.left + this.startingPositions[box].left + xDiff,\n\t\t\t\t\t\t\t\ttop: boundingBoxPosition.top + this.startingPositions[box].top + yDiff,\n\t\t\t\t\t\t\t\twidth: this.startingPositions[box].width + widthDiff,\n\t\t\t\t\t\t\t\theight: this.startingPositions[box].height + heightDiff,\n\t\t\t\t\t\t\t\tdeltaW: widthDiff,\n\t\t\t\t\t\t\t\tdeltaH: heightDiff,\n\t\t\t\t\t\t\t\tdeltaX: boundingBoxPosition.x + xDiff,\n\t\t\t\t\t\t\t\tdeltaY: boundingBoxPosition.y + yDiff,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tboxes[box] = Object.assign({}, this.state.boxes[box], {\n\t\t\t\t\t\t\t\tx: boundingBoxPosition.x + this.startingPositions[box].x + data.deltaX,\n\t\t\t\t\t\t\t\ty: boundingBoxPosition.y + this.startingPositions[box].y + data.deltaY,\n\t\t\t\t\t\t\t\tleft: boundingBoxPosition.left + this.startingPositions[box].left + data.deltaX,\n\t\t\t\t\t\t\t\ttop: boundingBoxPosition.top + this.startingPositions[box].top + data.deltaY,\n\t\t\t\t\t\t\t\twidth: this.startingPositions[box].width + data.deltaW,\n\t\t\t\t\t\t\t\theight: this.startingPositions[box].height + data.deltaH\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (this.state.activeBoxes.includes(box)) {\n\t\t\t\t\t\t// Adding bounding box's starting position\n\t\t\t\t\t\t// This is because it's added only to the group's box and not the individual members of the group\n\t\t\t\t\t\t if (this.startingPositions['box-ms']) {\n\t\t\t\t\t\t\tconst widthDiff = ((data.deltaW / Math.abs(this.startingPositions['box-ms'].width)) * Math.abs(this.startingPositions[box].width));\n\t\t\t\t\t\t\tconst heightDiff = ((data.deltaH / Math.abs(this.startingPositions['box-ms'].height)) * Math.abs(this.startingPositions[box].height));\n\n\t\t\t\t\t\t\tconst initialDeltaXPercentage = (this.startingPositions[box].x - this.startingPositions['box-ms'].x) / this.startingPositions['box-ms'].width;\n\t\t\t\t\t\t\tconst xDiff = data.deltaX + initialDeltaXPercentage * (data.deltaW);\n\n\t\t\t\t\t\t\tconst initialDeltaYPercentage = (this.startingPositions[box].y - this.startingPositions['box-ms'].y) / this.startingPositions['box-ms'].height;\n\t\t\t\t\t\t\tconst yDiff = data.deltaY + initialDeltaYPercentage * (data.deltaH);\n\n\t\t\t\t\t\t\tboxes[box] = Object.assign({}, this.state.boxes[box], {\n\t\t\t\t\t\t\t\tx: boundingBoxPosition.x + this.startingPositions[box].x + xDiff,\n\t\t\t\t\t\t\t\ty: boundingBoxPosition.y + this.startingPositions[box].y + yDiff,\n\t\t\t\t\t\t\t\tleft: boundingBoxPosition.left + this.startingPositions[box].left + xDiff,\n\t\t\t\t\t\t\t\ttop: boundingBoxPosition.top + this.startingPositions[box].top + yDiff,\n\t\t\t\t\t\t\t\twidth: this.startingPositions[box].width + widthDiff,\n\t\t\t\t\t\t\t\theight: this.startingPositions[box].height + heightDiff,\n\t\t\t\t\t\t\t\tdeltaW: widthDiff,\n\t\t\t\t\t\t\t\tdeltaH: heightDiff,\n\t\t\t\t\t\t\t\tdeltaX: boundingBoxPosition.x + xDiff,\n\t\t\t\t\t\t\t\tdeltaY: boundingBoxPosition.y + yDiff,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tboxes[box] = Object.assign({}, this.state.boxes[box], {\n\t\t\t\t\t\t\t\tx: boundingBoxPosition.x + this.startingPositions[box].x + data.deltaX,\n\t\t\t\t\t\t\t\ty: boundingBoxPosition.y + this.startingPositions[box].y + data.deltaY,\n\t\t\t\t\t\t\t\tleft: boundingBoxPosition.left + this.startingPositions[box].left + data.deltaX,\n\t\t\t\t\t\t\t\ttop: boundingBoxPosition.top + this.startingPositions[box].top + data.deltaY,\n\t\t\t\t\t\t\t\twidth: this.startingPositions[box].width + data.deltaW,\n\t\t\t\t\t\t\t\theight: this.startingPositions[box].height + data.deltaH,\n\t\t\t\t\t\t\t\tdeltaX: boundingBoxPosition.x + data.deltaX,\n\t\t\t\t\t\t\t\tdeltaY: boundingBoxPosition.y + data.deltaY,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (box === 'box-ms' || box?.indexOf(GROUP_BOX_PREFIX) >= 0) {\n\t\t\t\t\t\tboxes[box] = Object.assign({}, data);\n\t\t\t\t\t\tdelete boxes[box]?.deltaX;\n\t\t\t\t\t\tdelete boxes[box]?.deltaY;\n\t\t\t\t\t\tdelete boxes[box]?.deltaW;\n\t\t\t\t\t\tdelete boxes[box]?.deltaH;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tboxes[box] = this.state.boxes[box];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tguides = Object.keys(this.state.guides).map(guide => {\n\t\t\t\tif (this.state.active?.indexOf(GROUP_BOX_PREFIX) >= 0 || (this.state.activeCaptionGroupCaptions.length > 0 && this.state.active === 'box-ms')) {\n\t\t\t\t\tif (this.state.activeCaptionGroupCaptions.includes(guide)) {\n\t\t\t\t\t\treturn Object.assign({}, this.state.guides[guide], {\n\t\t\t\t\t\t\tx: calculateGuidePositions(boxes[guide], 'x'),\n\t\t\t\t\t\t\ty: calculateGuidePositions(boxes[guide], 'y')\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (this.state.activeBoxes.includes(guide)) {\n\t\t\t\t\t\treturn Object.assign({}, this.state.guides[guide], {\n\t\t\t\t\t\t\tx: calculateGuidePositions(boxes[guide], 'x'),\n\t\t\t\t\t\t\ty: calculateGuidePositions(boxes[guide], 'y')\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t} else {\n\t\t\tboxes = Object.assign({}, this.state.boxes, {\n\t\t\t\t[data.node.id]: Object.assign({}, this.state.boxes[data.node.id], {\n\t\t\t\t\tx: data.x,\n\t\t\t\t\ty: data.y,\n\t\t\t\t\tleft: data.left,\n\t\t\t\t\ttop: data.top,\n\t\t\t\t\twidth: data.width,\n\t\t\t\t\theight: data.height,\n\t\t\t\t})\n\t\t\t});\n\t\t\tguides = Object.assign({}, this.state.guides, {\n\t\t\t\t[data.node.id]: Object.assign({}, this.state.guides[data.node.id], {\n\t\t\t\t\tx: calculateGuidePositions(boxes[data.node.id], 'x'),\n\t\t\t\t\ty: calculateGuidePositions(boxes[data.node.id], 'y')\n\t\t\t\t})\n\t\t\t});\n\t\t}\n\n\t\tthis.setState({\n\t\t\tboxes,\n\t\t\tguides\n\t\t});\n\t}\n\n\tresizeEndHandler(e, data) {\n\t\tif (this.state.resizing) {\n\t\t\tlet newData = Object.assign({}, data);\n\t\t\tif (this.state.boxes?.[this.state.active]?.metadata && this.state.active?.indexOf(GROUP_BOX_PREFIX) < 0 && (this.state.activeCaptionGroupCaptions.length <= 0 && this.state.active !== 'box-ms')) {\n\t\t\t\tnewData.metadata = this.state.boxes[this.state.active].metadata;\n\t\t\t}\n\n\t\t\tif (data.type && data.type === 'group') {\n\t\t\t\tthis.startingPositions = {};\n\t\t\t\tif (this.state.active?.indexOf(GROUP_BOX_PREFIX) >= 0 || (this.state.activeCaptionGroupCaptions.length > 0 && this.state.active === 'box-ms')) {\n\t\t\t\t\tnewData.selections = this.state.activeCaptionGroupCaptions.map(box => {\n\t\t\t\t\t\tthis.startingPositions[box] = Object.assign({}, this.state.boxes[box]);\n\t\t\t\t\t\treturn Object.assign({}, this.state.boxes[box]);\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tnewData.selections = this.state.activeBoxes.map(box => {\n\t\t\t\t\t\tthis.startingPositions[box] = Object.assign({}, this.state.boxes[box]);\n\t\t\t\t\t\treturn Object.assign({}, this.state.boxes[box]);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.startingPositions[this.state.active] = Object.assign({}, this.state.boxes[this.state.active]);\n\t\t\t}\n\n\t\t\tthis.props.onResizeEnd && this.props.onResizeEnd(e, newData);\n\t\t}\n\n\t\tthis.setState({\n\t\t\tresizing: false,\n\t\t\tguidesActive: false,\n\t\t\tactiveCaptionGroupCaptions: [],\n\t\t\tactiveBoxes: [],\n\t\t\tactive: '',\n\t\t});\n\t}\n\n\trotateStartHandler(e, data) {\n\t\tthis.setState({\n\t\t\tactive: data.node.id,\n\t\t\trotating: true\n\t\t});\n\t\tthis.didRotateHappen = true;\n\t\tthis.props.onRotateStart && this.props.onRotateStart(e, data);\n\t}\n\n\trotateHandler(e, data) {\n\t\tconst boxes = Object.assign({}, this.state.boxes, {\n\t\t\t[this.state.active]: Object.assign({}, this.state.boxes[this.state.active], {\n\t\t\t\t...this.state.boxes[this.state.active],\n\t\t\t\tx: data.x,\n\t\t\t\ty: data.y,\n\t\t\t\trotateAngle: data.rotateAngle\n\t\t\t})\n\t\t});\n\n\t\tthis.setState({\n\t\t\tboxes\n\t\t});\n\n\t\tthis.props.onRotate && this.props.onRotate(e, data);\n\t}\n\n\trotateEndHandler(e, data) {\n\t\tlet newData = Object.assign({}, data);\n\t\tif (this.state.boxes?.[this.state.active]?.metadata) {\n\t\t\tnewData.metadata = this.state.boxes[this.state.active].metadata;\n\t\t}\n\t\tthis.startingPositions = {};\n\t\tthis.startingPositions[this.state.active] = this.state.boxes[this.state.active];\n\t\tthis.props.onRotateEnd && this.props.onRotateEnd(e, newData);\n\t}\n\n\tkeyUpHandler(e, data) {\n\t\tif (data.isLayerLocked) {\n\t\t\treturn;\n\t\t}\n\t\tlet newData = Object.assign({}, data);\n\t\tif (this.state.boxes?.[data.node.id]?.metadata && data.node?.id?.indexOf(GROUP_BOX_PREFIX) < 0) {\n\t\t\tnewData.metadata = this.state.boxes[data.node.id].metadata;\n\t\t}\n\n\t\t// for caption groups\n\t\tif(data.node?.id?.indexOf(GROUP_BOX_PREFIX) >= 0) {\n\t\t\tdelete newData.metadata\n\t\t}\n\n\t\tlet boxes = null;\n\t\tlet guides = null;\n\t\tif (data.type && data.type === 'group') {\n\t\t\tboxes = {};\n\t\t\tfor (let box in this.state.boxes) {\n\t\t\t\tif (this.state.boxes.hasOwnProperty(box)) {\n\t\t\t\t\tif (this.state.activeBoxes.includes(box) || (this.state.activeCaptionGroupCaptions.includes(box) && (this.state.active?.indexOf(GROUP_BOX_PREFIX) >= 0 || this.state.activeBoxes?.filter(box => box?.indexOf(GROUP_BOX_PREFIX) >= 0).length > 0))) {\n\t\t\t\t\t\tboxes[box] = Object.assign({}, this.state.boxes[box], {\n\t\t\t\t\t\t\tx: this.state.boxes[box].x + (data.changedValues.x || 0),\n\t\t\t\t\t\t\ty: this.state.boxes[box].y + (data.changedValues.y || 0),\n\t\t\t\t\t\t\tleft: this.state.boxes[box].left + (data.changedValues.left || 0),\n\t\t\t\t\t\t\ttop: this.state.boxes[box].top + (data.changedValues.top || 0),\n\t\t\t\t\t\t\theight: this.state.boxes[box].height + (data.changedValues.height || 0),\n\t\t\t\t\t\t\twidth: this.state.boxes[box].width + (data.changedValues.width || 0),\n\t\t\t\t\t\t\tdeltaX: this.state.boxes[box].x + (data.changedValues.x || 0) - (this.startingPositions?.[box]?.x || 0),\n\t\t\t\t\t\t\tdeltaY: this.state.boxes[box].y + (data.changedValues.y || 0) - (this.startingPositions?.[box]?.y || 0),\n\t\t\t\t\t\t\tdeltaW: this.state.boxes[box].width + (data.changedValues.width || 0) - (this.startingPositions?.[box]?.width || 0),\n\t\t\t\t\t\t\tdeltaH: this.state.boxes[box].height + (data.changedValues.height || 0) - (this.startingPositions?.[box]?.height || 0),\n\t\t\t\t\t\t});\n\t\t\t\t\t}  else if (box === 'box-ms' || box?.indexOf(GROUP_BOX_PREFIX) >= 0) {\n\t\t\t\t\t\tboxes[box] = Object.assign({}, data);\n\t\t\t\t\t\tdelete boxes[box].deltaX;\n\t\t\t\t\t\tdelete boxes[box].deltaY;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tboxes[box] = this.state.boxes[box];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tguides = Object.keys(this.state.guides).map(guide => {\n\t\t\t\tif (this.state.activeBoxes.includes(guide) || this.state.activeCaptionGroupCaptions.includes(guide)) {\n\t\t\t\t\treturn Object.assign({}, this.state.guides[guide], {\n\t\t\t\t\t\tx: calculateGuidePositions(boxes[guide], 'x'),\n\t\t\t\t\t\ty: calculateGuidePositions(boxes[guide], 'y')\n\t\t\t\t\t})\n\t\t\t\t}\n\n\t\t\t\treturn this.state.guides[guide];\n\t\t\t});\n\t\t} else {\n\t\t\tnewData = Object.assign({}, newData, {\n\t\t\t\tdeltaX: data.x - (this.startingPositions?.[data.node.id]?.x || 0),\n\t\t\t\tdeltaY: data.y - (this.startingPositions?.[data.node.id]?.y || 0),\n\t\t\t\tdeltaW: data.width - (this.startingPositions?.[data.node.id]?.width || 0),\n\t\t\t\tdeltaH: data.height - (this.startingPositions?.[data.node.id]?.height || 0),\n\t\t\t});\n\t\t\tboxes = Object.assign({}, this.state.boxes, {\n\t\t\t\t[data.node.id]: Object.assign({}, this.state.boxes[data.node.id], {\n\t\t\t\t\tx: data.x,\n\t\t\t\t\ty: data.y,\n\t\t\t\t\tleft: data.left,\n\t\t\t\t\ttop: data.top,\n\t\t\t\t\twidth: data.width,\n\t\t\t\t\theight: data.height,\n\t\t\t\t\tdeltaX: data.x - (this.startingPositions?.[data.node.id]?.x || 0),\n\t\t\t\t\tdeltaY: data.y - (this.startingPositions?.[data.node.id]?.y || 0),\n\t\t\t\t\tdeltaW: data.width - (this.startingPositions?.[data.node.id]?.width || 0),\n\t\t\t\t\tdeltaH: data.height - (this.startingPositions?.[data.node.id]?.height || 0),\n\t\t\t\t})\n\t\t\t});\n\n\t\t\tguides = Object.assign({}, this.state.guides, {\n\t\t\t\t[data.node.id]: Object.assign({}, this.state.guides[data.node.id], {\n\t\t\t\t\tx: calculateGuidePositions(boxes[data.node.id], 'x'),\n\t\t\t\t\ty: calculateGuidePositions(boxes[data.node.id], 'y')\n\t\t\t\t})\n\t\t\t});\n\t\t}\n\n\t\tthis.setState({\n\t\t\tboxes,\n\t\t\tguides,\n\t\t\tguidesActive: false\n\t\t}, () => {\n\t\t\tif (data.type && data.type === 'group') {\n\t\t\t\tif (this.state.active?.indexOf(GROUP_BOX_PREFIX) >= 0) {\n\t\t\t\t\tnewData.selections = this.state.activeCaptionGroupCaptions.map(box => {\n\t\t\t\t\t\treturn Object.assign({}, this.state.boxes[box]);\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tnewData.selections = this.state.activeBoxes.map(box => {\n\t\t\t\t\t\tif (box?.indexOf(GROUP_BOX_PREFIX) >= 0) {\n\t\t\t\t\t\t\treturn Object.assign({}, this.state.boxes[box], {\n\t\t\t\t\t\t\t\tselections: this.state.activeCaptionGroupCaptions.map(innerBox => {\n\t\t\t\t\t\t\t\t\treturn Object.assign({}, this.state.boxes[innerBox]);\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn Object.assign({}, this.state.boxes[box]);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.props.onKeyUp && this.props.onKeyUp(e, newData);\n\t\t});\n\t}\n\n\tkeyEndHandler(e, data) {\n\t\tlet newData = Object.assign({}, data, {\n\t\t\tdeltaX: data.x - (this.startingPositions?.[data.node.id]?.x || 0),\n\t\t\tdeltaY: data.y - (this.startingPositions?.[data.node.id]?.y || 0),\n\t\t});\n\t\tif (this.state.boxes?.[this.state.active]?.metadata) {\n\t\t\tnewData.metadata = this.state.boxes[this.state.active].metadata;\n\t\t}\n\n\t\tif (this.state.active?.indexOf(GROUP_BOX_PREFIX) >= 0 || this.state.activeBoxes?.filter(box => box?.indexOf(GROUP_BOX_PREFIX) >= 0).length > 0) {\n\t\t\tdelete newData.metadata;\n\t\t}\n\n\t\tif (data.type && data.type === 'group') {\n\t\t\tthis.startingPositions = {};\n\t\t\tif (this.state.active?.indexOf(GROUP_BOX_PREFIX) >= 0) {\n\t\t\t\tnewData.selections = this.state.activeCaptionGroupCaptions.map(box => {\n\t\t\t\t\tthis.startingPositions[box] = Object.assign({}, this.state.boxes[box]);\n\t\t\t\t\treturn Object.assign({}, this.state.boxes[box]);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tnewData.selections = this.state.activeBoxes.map(box => {\n\t\t\t\t\tthis.startingPositions[box] = Object.assign({}, this.state.boxes[box]);\n\t\t\t\t\tif (box?.indexOf(GROUP_BOX_PREFIX) >= 0) {\n\t\t\t\t\t\treturn Object.assign({}, this.state.boxes[box], {\n\t\t\t\t\t\t\tselections: this.state.activeCaptionGroupCaptions.map(innerBox => {\n\t\t\t\t\t\t\t\tthis.startingPositions[innerBox] = Object.assign({}, this.state.boxes[innerBox]);\n\t\t\t\t\t\t\t\treturn Object.assign({}, this.state.boxes[innerBox]);\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t\treturn Object.assign({}, this.state.boxes[box]);\n\t\t\t\t});\n\t\t\t}\n\t\t} else {\n\t\t\tthis.startingPositions = {};\n\t\t\tthis.startingPositions[this.state.active] = this.state.boxes[this.state.active];\n\t\t}\n\n\t\tthis.props.onKeyEnd && this.props.onKeyEnd(e, newData);\n\t\t\n\t\tthis.setState({\n\t\t\tresizing: false,\n\t\t\tdragging: false,\n\t\t\tguidesActive: false\n\t\t});\n\t}\n\n\t// drag select handler\n\tmouseDragHandler() {\n\t\tlet self = this;\n\t\tlet el = document.createElement('div');\n\t\tthis.didDragHappen = false;\n\t\tdocument.addEventListener('mouseup', function(e) {\n\t\t\tmousedown = false;\n\t\t\tlast_mousex = false;\n\t\t\tlast_mousey = false;\n\t\t\tel.style.left = 0;\n\t\t\tel.style.top = 0;\n\t\t\tel.style.width = 0;\n\t\t\tel.style.height= 0;\n\t\t\tself.isDragHappening = false;\n\t\t});\n\t\tdocument.addEventListener('mousedown', function(e) {\n\t\t\tif(self.getBoundingBoxElement() && self.getBoundingBoxElement().current) {\n\t\t\t\tlast_mousex = e.x;\n\t\t\t\tlast_mousey = e.y;\n\t\t\t\tmousedown = true;\n\t\t\t\tel.classList.add('rectangle');\n\t\t\t\tself.didDragHappen = false;\n\t\t\t\tself.isDragHappening = true;\n\t\t\t\t// if the starting point is on top of existing boxes, don't allow drag selection\n\t\t\t\tself.allowDragSelection = false;\n\t\t\t\t// remove offset position for correct calculations.\n\t\t\t\tconst boundingBox = self.getBoundingBoxElement();\n\t\t\t\tconst boundingBoxPosition = boundingBox.current.getBoundingClientRect().toJSON();\n\t\t\t\tconst tempE = {\n\t\t\t\t\tx: e.x,\n\t\t\t\t\ty: e.y\n\t\t\t\t};\n\t\t\t\ttempE.x = e.x - boundingBoxPosition.x;\n\t\t\t\ttempE.y = e.y - boundingBoxPosition.y;\n\t\t\t\tif (self.state.activeBoxes && self.state.activeBoxes.length > 1) {\n\t\t\t\t\tself.allowDragSelection = false;\n\t\t\t\t} else {\n\t\t\t\t\tself.allowDragSelection = true;\n\t\t\t\t}\n\t\t\t\t// if drag is initiated outside box-ms box; allow dragSelection.\n\t\t\t\tif (self.state.boxes && self.state.boxes[self.state.active] && self.state.active?.indexOf(self.state.active) >= 0) { // Specific check for Active group box\n\t\t\t\t\tif (tempE.x >= self.state.boxes[self.state.active].x &&\n\t\t\t\t\t\ttempE.x <= self.state.boxes[self.state.active].x + self.state.boxes[self.state.active].width &&\n\t\t\t\t\t\ttempE.y >= self.state.boxes[self.state.active].y &&\n\t\t\t\t\t\ttempE.y <= self.state.boxes[self.state.active].y + self.state.boxes[self.state.active].height) {\n\t\t\t\t\t\tself.allowDragSelection = false;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tself.allowDragSelection = true;\n\t\t\t\t\t}\n\t\t\t\t} else if (self.state.boxes && self.state.boxes['box-ms']) {\n\t\t\t\t\tif (tempE.x >= self.state.boxes['box-ms'].x &&\n\t\t\t\t\t\ttempE.x <= self.state.boxes['box-ms'].x + self.state.boxes['box-ms'].width &&\n\t\t\t\t\t\ttempE.y >= self.state.boxes['box-ms'].y &&\n\t\t\t\t\t\ttempE.y <= self.state.boxes['box-ms'].y + self.state.boxes['box-ms'].height) {\n\t\t\t\t\t\tself.allowDragSelection = false;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tself.allowDragSelection = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// If drag starts on existing boxes, don't register them.\n\t\t\t\tfor (let box in self.state.boxes) {\n\t\t\t\t\tif ( self.state.boxes[box] && !self.state.boxes[box].isLayerLocked && tempE.x >= self.state.boxes[box].x &&\n\t\t\t\t\t\ttempE.x <= self.state.boxes[box].x + self.state.boxes[box].width &&\n\t\t\t\t\t\ttempE.y >= self.state.boxes[box].y &&\n\t\t\t\t\t\ttempE.y <= self.state.boxes[box].y + self.state.boxes[box].height) {\n\t\t\t\t\t\tself.allowDragSelection = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tdocument.getElementsByTagName('body')[0].appendChild(el);\n\t\t\t\t//add style to rectangle\n\t\t\t\tel.style.border = '1px solid #18a0fb';\n\t\t\t\tel.style.backgroundColor = 'rgba(24, 160, 251, 0.2)';\n\t\t\t\tel.style.position = 'absolute';\n\t\t\t\tel.style.zIndex = 111;\n\t\t\t\tdocument.onmousemove=function(event) {\n\t\t\t\t\tif (e.target.classList.contains('r-preview-bg-wrapper') || e.target.id === 'r-preview-background' || e.target.classList.contains('bounding-box-wrapper') || e.target.classList.contains('videoPreviewClass') || e.target.classList.contains('safeArealines')) {\n\t\t\t\t\t\tif (mousedown && self.allowDragSelection) {\n\t\t\t\t\t\t\tself.didDragHappen = true;\n\t\t\t\t\t\t\tself.createRectByDrag(event, el);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\tcreateRectByDrag(e, el) {\n\t\tposX = e.x;\n\t\tposY = e.y;\n\t\tel.style.left = last_mousex;\n\t\tel.style.top = last_mousey;\n\t\tel.style.width = Math.abs(posX - last_mousex);\n\t\tel.style.height= Math.abs(posY - last_mousey);\n\t\tif (last_mousex) {\n\t\t\tel.style.width = Math.abs(posX-last_mousex)+'px'\n\t\t\tel.style.height = Math.abs(posY-last_mousey)+'px';\n\t\t\tel.style.left = posX-last_mousex<0?posX+'px':last_mousex+'px';\n\t\t\tel.style.top = posY-last_mousey<0?posY+'px':last_mousey+'px';\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t\tthis.boxSelectByDrag(el);\n\t}\n\tboxSelectByDrag(el) {\n\t\tlet rect2 = el && el.getBoundingClientRect();\n\t\tconst boundingBox = this.getBoundingBoxElement();\n\t\tconst boundingBoxPosition = boundingBox.current.getBoundingClientRect().toJSON();\n\t\trect2.x = rect2.x - boundingBoxPosition.x;\n\t\trect2.y = rect2.y - boundingBoxPosition.y;\n\t\tthis.props.boxes.forEach((rect1, index) => {\n\t\t\tconst box = document.getElementById('box' + index);\n\t\t\tif (rect1.x < rect2.x + rect2.width &&\n\t\t\t\trect1.x + rect1.width > rect2.x &&\n\t\t\t\trect1.y < rect2.y + rect2.height &&\n\t\t\t\trect1.y + rect1.height > rect2.y) {\n\t\t\t\tif (!rect1.isLayerLocked) {\n\t\t\t\t\tif (this.state.activeBoxes.includes('box' + index)) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tthis.selectBox({\n\t\t\t\t\t\ttarget : box,\n\t\t\t\t\t\tshiftKey: true,\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t} else {\n\t\t\t\tif (this.state.activeBoxes.includes('box' + index)) {\n\t\t\t\t\tthis.selectBox({\n\t\t\t\t\t\ttarget: box,\n\t\t\t\t\t\tshiftKey: true,\n\t\t\t\t\t\tunselect: true\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t}\n\t// drag select handler\n\trender() {\n\t\tconst { active, boxes, activeBoxes, guides } = this.state;\n\t\tconst areMultipleBoxesSelected = activeBoxes.length > 1 ||  (activeBoxes.length === 1 && activeBoxes[0].includes('box-ms-'));\n\n\t\tconst reorderedBoxes = this.getReorderedBoxes(boxes, this.state.captionGroupsToIndexMap);\n\n\t\t// Create the draggable boxes from the position data\n\t\tconst draggableBoxes = reorderedBoxes.map(box => {\n\t\t\tconst position = box;\n\t\t\tconst id = box.id;\n\t\t\tconst identifier = box.identifier;  // option index for caption\n\t\t\tconst isLayerLocked = box.isLayerLocked; \n\t\t\tconst isSelected = (active === id || activeBoxes.includes(id));\n\t\t\tconst url = box?.metadata?.url;\n\t\t\tconst zoomScale = box?.metadata?.zoomScale || 1;\n\t\t\tconst objectPosition = box?.metadata?.objectPosition || {};\n\t\t\tconst imageShape = box?.metadata?.imageShape || 'fitImage';\n\t\t\treturn <Box\n\t\t\t\t{...this.props}\n\t\t\t\tareMultipleBoxesSelected={areMultipleBoxesSelected}\n\t\t\t\tboundingBox={this.state.boundingBox}\n\t\t\t\tdidDragOrResizeHappen={this.didDragOrResizeHappen}\n\t\t\t\tdragging={this.state.dragging}\n\t\t\t\tgetBoundingBoxElement={this.getBoundingBoxElement}\n\t\t\t\tid={id}\n\t\t\t\tidentifier={identifier}\n\t\t\t\tisSelected={isSelected}\n\t\t\t\tisShiftKeyActive={this.state.isShiftKeyActive}\n\t\t\t\tkey={id}\n\t\t\t\tonDragStart={this.dragStartHandler}\n\t\t\t\tonDrag={this.dragHandler}\n\t\t\t\tonDragEnd={this.dragEndHandler}\n\t\t\t\tonKeyUp={this.keyUpHandler}\n\t\t\t\tonKeyEnd={this.keyEndHandler}\n\t\t\t\tonResizeStart={this.resizeStartHandler}\n\t\t\t\tonResize={this.resizeHandler}\n\t\t\t\tonResizeEnd={this.resizeEndHandler}\n\t\t\t\tonRotateStart={this.rotateStartHandler}\n\t\t\t\tonRotate={this.rotateHandler}\n\t\t\t\tonRotateEnd={this.rotateEndHandler}\n\t\t\t\tposition={position}\n\t\t\t\tresizing={this.state.resizing}\n\t\t\t\trotating={this.state.rotating}\n\t\t\t\tselectBox={this.selectBox}\n\t\t\t\tsetDragOrResizeState={this.setDragOrResizeState}\n\t\t\t\tisLayerLocked={isLayerLocked}\n\t\t\t\tpreventShortcutEvents={this.state.preventShortcutEvents}\n\t\t\t\tsetPreventShortcutEvents={this.setPreventShortcutEvents}\n\t\t\t\ttoggleHover={this.props.toggleHover}\n\t\t\t\toverRideStyles={this.props.overrideHover}\n\t\t\t\tdragToggleHoverBgStyle={this.props.dragToggleHoverBgStyle}\n\t\t\t\toverRideSelected = {this.props.overrideSelected}\n\t\t\t\turl={url}\n\t\t\t\tzoomScale={zoomScale}\n\t\t\t\tobjectPosition={objectPosition}\n\t\t\t\trenderedResolution={this.props.renderedResolution}\n\t\t\t\tcropActiveForElement={this.props.cropActiveForElement}\n\t\t\t\timageShape={imageShape}\n\t\t\t\tmetadata={box?.metadata}\n\t\t\t\tupdateBoxAfterCrop={this.updateBoxAfterCrop}\n\t\t\t/>;\n\t\t});\n\n\t\t// Create a guide(s) when the following conditions are met:\n\t\t// 1. A box aligns with another (top, center or bottom)\n\t\t// 2. An edge of a box touches any of the edges of another box\n\t\t// 3. A box aligns vertically or horizontally with the bounding box\n\t\t// TODO: Use a functional component to generate the guides for both axis instead of duplicating code.\n\t\tlet xAxisGuides = null;\n\t\tlet yAxisGuides = null;\n\t\tif (guides) {\n\t\t\txAxisGuides = Object.keys(guides).reduce((result, box) => {\n\t\t\t\tconst guideClassNames = this.state.guidesActive ? `${styles.guide} ${styles.xAxis} ${styles.active}` : `${styles.guide} ${styles.xAxis}`;\n\t\t\t\tlet xAxisGuidesForCurrentBox = null;\n\t\t\t\tif (guides[box] && guides[box].x) {\n\t\t\t\t\txAxisGuidesForCurrentBox = guides[box].x.map((position, index) => {\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tthis.state.active &&\n\t\t\t\t\t\t\tthis.state.active === box &&\n\t\t\t\t\t\t\tthis.state.match &&\n\t\t\t\t\t\t\tthis.state.match.x &&\n\t\t\t\t\t\t\tthis.state.match.x.intersection &&\n\t\t\t\t\t\t\tthis.state.match.x.intersection === position\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\treturn <div key={`${position}-${index}`} className={guideClassNames} style={{ left: position }} />;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\treturn result.concat(xAxisGuidesForCurrentBox);\n\t\t\t}, []);\n\n\t\t\tyAxisGuides = Object.keys(guides).reduce((result, box) => {\n\t\t\t\tconst guideClassNames = this.state.guidesActive ? `${styles.guide} ${styles.yAxis} ${styles.active}` : `${styles.guide} ${styles.yAxis}`;\n\t\t\t\tlet yAxisGuidesForCurrentBox = null;\n\t\t\t\tif (guides[box] && guides[box].y) {\n\t\t\t\t\tyAxisGuidesForCurrentBox = guides[box].y.map((position, index) => {\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tthis.state.active &&\n\t\t\t\t\t\t\tthis.state.active === box &&\n\t\t\t\t\t\t\tthis.state.match &&\n\t\t\t\t\t\t\tthis.state.match.y &&\n\t\t\t\t\t\t\tthis.state.match.y.intersection &&\n\t\t\t\t\t\t\tthis.state.match.y.intersection === position\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\treturn <div key={`${position}-${index}`} className={guideClassNames} style={{ top: position }} />\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\treturn result.concat(yAxisGuidesForCurrentBox);\n\t\t\t}, []);\n\t\t}\n\n\t\treturn <div id={this.props.id} ref={this.boundingBox} className={`${styles.boundingBox} ${this.props.className} bounding-box-wrapper`} style={this.props.style}\n\t\t\tonDrop={\n\t\t\t\te => {\n\t\t\t\t\tthis.unSelectBox(e);\n\t\t\t\t}\n\t\t\t}\n\t\t>\n\t\t\t{draggableBoxes}\n\t\t\t{xAxisGuides}\n\t\t\t{yAxisGuides}\n\t\t</div>;\n\t}\n}\n\n\n// Typechecking props for AlignmentGuides component\nAlignmentGuides.propTypes = {\n\tboundToParent: PropTypes.bool,\n\tboxes: PropTypes.array.isRequired,\n\tboxStyle: PropTypes.object,\n\tclassName: PropTypes.string,\n\tdrag: PropTypes.bool,\n\tkeybindings: PropTypes.bool,\n\tonDragStart: PropTypes.func,\n\tonDrag: PropTypes.func,\n\tonDragEnd: PropTypes.func,\n\tonKeyUp: PropTypes.func,\n\tonKeyEnd: PropTypes.func,\n\tonResizeStart: PropTypes.func,\n\tonResize: PropTypes.func,\n\tonResizeEnd: PropTypes.func,\n\tonRotateStart: PropTypes.func,\n\tonRotate: PropTypes.func,\n\tonRotateEnd: PropTypes.func,\n\tonSelect: PropTypes.func,\n\tonUnselect: PropTypes.func,\n\tonSecondaryClick: PropTypes.func,\n\tresize: PropTypes.bool,\n\trotate: PropTypes.bool,\n\tresolution: PropTypes.object,\n\trenderedResolution: PropTypes.object,\n\tsnap: PropTypes.bool,\n\tstyle: PropTypes.object,\n};\n\n// Default values for props\nAlignmentGuides.defaultProps = {\n\tboundToParent: true,\n\tboxes: [],\n\tdrag: true,\n\tresize: true,\n\trotate: true,\n\tsnap: true\n};\n\nexport default AlignmentGuides;","'use strict';\n\n/*\n* React Alignment Guides v1.0.0-rc.3\n*/\n\n// import React from 'react';\n// import ReactDOM from 'react-dom';\nimport AlignmentGuides from './AlignmentGuides';\n\nexport default AlignmentGuides;\n\n// ReactDOM.render(\n// \t<AlignmentGuides />,\n// \tdocument.getElementById('root')\n// );"],"names":["calculateGuidePositions","dimensions","axis","start","left","middle","parseInt","width","end","top","height","proximityListener","active","allGuides","xAxisGuidesForActiveBox","x","yAxisGuidesForActiveBox","y","xAxisAllGuides","getAllGuidesForGivenAxisExceptActiveBox","yAxisAllGuides","xAxisMatchedGuides","checkValueProximities","yAxisMatchedGuides","allMatchedGuides","proximity","_objectSpread","activeBoxGuides","guidesForActiveBoxAlongGivenAxis","result","Object","keys","map","box","currentBoxGuidesAlongGivenAxis","filter","guides","undefined","activeBoxGuidesInOneAxis","allOtherGuidesInOneAxis","intersection","matchedArray","snapThreshold","index","length","index2","index3","diff","Math","abs","value","activeBoxIndex","matchedBoxIndex","calculateBoundariesForDrag","bounds","boundingBox","calculateBoundariesForResize","widthDifference","heightDifference","getOffsetCoordinates","node","offsetLeft","offsetTop","offsetWidth","offsetHeight","getLength","sqrt","topLeftToCenter","_ref","rotateAngle","cx","cy","centerToTopLeft","_ref2","setWidthAndDeltaW","deltaW","minWidth","expectedWidth","setHeightAndDeltaH","deltaH","minHeight","expectedHeight","getNewStyle","type","rect","widthFlag","heightFlag","widthAndDeltaW","heightAndDeltaH","cos","sin","position","size","getAngle","_ref3","_ref4","x1","y1","x2","y2","dot","det","angle","atan2","PI","getNewCoordinates","tempX","tempY","cosine","sine","rotatedX","rotatedY","degToRadian","deg","getMultipleSelectionCoordinates","allBoxes","activeBoxes","selectedBoxes","hasOwnProperty","includes","push","reduce","min","b","max","getGroupCoordinates","groupedBoxes","_allBoxes$box","metadata","captionIndex","getResizeSVGCursor","concat","getResizeCursorCSS","handle","degree","arguments","cursor","checkGroupChildElementsLocked","captions","isLocked","forEach","caption","isLayerLocked","RESIZE_CORNERS","RESIZE_CORNERS_FOR_NO_HEIGHT","RESIZE_CORNERS_FOR_NO_WIDTH","RESIZE_SIDES","ROTATE_HANDLES","GROUP_BOX_PREFIX","throttle","require","DRAG_THRESHOLD","DEFAULT_SIZE","PREVENT_DEFAULT_KEYS","Box","_Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","React","createRef","coordinates","callSelectBox","didDragHappen","didResizeHappen","selectBox","bind","_assertThisInitialized","unHoverBox","hoverBox","onDragStart","shortcutHandler","onShortcutKeyUp","keyDownHandler","e","onResizeStart","onRotateStart","getCoordinatesWrapperWidth","handleDoubleClick","endCropMode","dragOverBox","unDragOverBox","onDropElementBox","filterControls","state","callKeyEnd","_createClass","key","data","_this$props","newBoxData","boxTranslateX","boxTranslateY","boxDeltaWidth","boxDeltaHeight","current","deltaX","deltaY","updateBoxAfterCrop","dragDisabled","cropDisabledCallback","onDoubleClickElement","identifier","currentTarget","hasAttribute","target","id","indexOf","focus","cropActiveForElement","classList","add","toggleHover","remove","dragToggleHoverBgStyle","onDragOver","_this$props$metadata","_this$props$metadata2","Number","isInteger","_this2","drag","stopPropagation","getBoundingBoxElement","startingPosition","getBoundingClientRect","toJSON","boundingBoxPosition","assign","clientX","clientY","onDrag","didDragOrResizeHappen","setDragOrResizeState","boundingBoxDimensions","boxWidth","boxHeight","currentPosition","boundToParent","dragDisabledCallback","onDragEnd","document","removeEventListener","addEventListener","preventShortcutEvents","areMultipleBoxesSelected","isSelected","preventDefault","DELTA","shiftKey","ctrlKey","metaKey","isWidthZero","isHeightZero","newValues","changedValues","setState","movingSides","onKeyUp","keysAllowed","onKeyEnd","getMovingSides","currentResizeHandle","_this3","resize","_this$box","style","zIndex","startX","startY","startingDimensions","_topLeftToCenter","ratio","sign","getAttribute","movingSidesObj","side","resizeAroundCenter","altKey","onResize","_this3$props$position","_this3$props$position2","_this3$props$position5","_this3$props$position6","_this3$props$position7","_this3$props$position8","right","bottom","_this3$props$position3","_this3$props$position4","alpha","deltaL","beta","replace","_getNewStyle","_getNewStyle$position","_getNewStyle$size","tempPosition","onResizeEnd","_this3$box","_this3$props$position9","_this4","rotate","center","startVector","startAngle","newCoordinates","onRotate","rotateVector","round","onRotateEnd","control","_this$props$position","_this$props$position2","componentDidMount","componentDidUpdate","prevProps","componentWillUnmount","render","_this5","_this$props2","boxStyle","isShiftKeyActive","resolution","isNaN","_this$props$position3","_this$props$position4","dashedCentreNodes","xFactor","yFactor","isCropModeActive","boxClassNames","styles","hideBorders","overRideSelected","selected","overRideStyles","groupElement","boxStyles","transform","pointerEvents","display","justifyContent","alignItems","createElement","className","onClick","onMouseDown","onKeyDown","onMouseOver","onMouseOut","onDragLeave","onDrop","ref","tabIndex","onDoubleClick","onFocus","setPreventShortcutEvents","zeroDimensionBoxSelected","zeroDimensionBox","Fragment","dimensions_style","_this5$props$position","visibleHandle","additionalStyles","resizeCorners","rotateHandle","Component","propTypes","PropTypes","bool","func","string","keybindings","object","isRequired","mousedown","last_mousex","last_mousey","posX","posY","AlignmentGuides","boxes","dragging","guidesActive","match","resizing","rotating","activeBoxSnappedPosition","activeCaptionGroupCaptions","captionGroupsToIndexMap","setShiftKeyState","unSelectBox","dragStartHandler","dragHandler","dragEndHandler","resizeStartHandler","resizeHandler","resizeEndHandler","rotateStartHandler","rotateHandler","rotateEndHandler","keyUpHandler","keyEndHandler","startingPositions","didRotateHappen","mouseDragHandler","boxSelectByDrag","createRectByDrag","addGuidelinesForSnapping","getReorderedBoxes","_dimensions$metadata","url","img","Image","src","selections","groups","groupArray","selectedIndexes","allElementsInsideGroupAreSelected","_boxes$_box","val","splice","window","isStylingPanelEnabled","prevState","activeBoxWithoutLock","activeBox","JSON","stringify","_this$props3","_this$props4","fromEntries","entries","_slicedToArray","startsWith","_this$props5","_this2$props$groups","_prevProps$groups","_boxes","groupedCaptions","userXGuides","userYGuides","selectionBoxesWithHigherIndex","reversedKeys","reverse","group","i","reorderedBoxes","userXGuidesPos","guideId","userYGuidesPos","userGuides","sort","onDragOrResize","_defineProperty","onCropEnd","_e$target$id","_e$target2","_e$target","_this$props6","boxDimensions","_this$props7","_this$state","unselect","isDragHappening","_toConsumableArray","_boxes3$e$target$id","_this$state2","_boxes3$e$target$id2","allCaptionsForMultipleSelections","selection","currentBox","find","_boxes3$e$target$id3","tempActiveBoxes","select","_this$state3","onSecondaryClick","onSelect","parentNode","_this$state4","_e$target$id2","_e$target$parentNode$","isEscUnselectActive","isDragging","keyCode","Array","isArray","preventDeselectionKeyCodes","isValidUnselect","onUnselect","_this$state$boxes","_data$node","newData","_data$node2","_data$node3","_this$state$activeCap","_this$state$captionGr","_data$node4","_data$node5","_this5$state$activeCa","boxKey","_this6","_data$node8","_data$node9","_this$state$boxes2","_this$state$active","_data$node6","_data$node7","_this6$state$activeCa","currentBoxKey","hoverGroupedData","_this6$state$activeCa2","_this$state$activeBox","_this$state$active2","_ref5","_ref6","guide","_this6$state$active","snap","_this6$state$boxes$_t","_this6$state$boxes$_t2","_newData","_newData2","_newData3","_newData4","_newData5","_newData6","newActiveBoxLeft","newActiveBoxTop","_match$axis","activeBoxProximityIndex","matchedBoxProximityIndex","_guides$box","_guides$box2","_match$x","_match$y","newBoxes","_this$state$boxes3","_this$state$active3","_this7","_data$node10","_data$node11","_this7$state$activeCa","_this8","_this$state$active4","_this9","_this$state$boxes4","_this$state$active5","_this$state$active6","widthDiff","heightDiff","initialDeltaXPercentage","xDiff","initialDeltaYPercentage","yDiff","_boxes$box","_boxes$box2","_boxes$box3","_boxes$box4","_this9$state$active","_this10","_this$state$boxes5","_this$state$active7","_this$state$active8","_this$state$boxes6","_this$state$boxes7","_data$node12","_data$node13","_this11","_this$state$active9","_this$state$activeBox2","_this$startingPositio","_this$startingPositio2","_this$startingPositio3","_this$startingPositio4","_this$startingPositio5","_this$startingPositio6","_this$startingPositio7","_this$startingPositio8","_this$startingPositio9","_this$startingPositio10","_this$startingPositio11","_this$startingPositio12","_this11$state$active","innerBox","_this$startingPositio13","_this$startingPositio14","_this$state$boxes8","_this$state$active10","_this$state$activeBox3","_this12","_this$state$active11","self","el","_self$state$active","allowDragSelection","tempE","getElementsByTagName","appendChild","border","backgroundColor","onmousemove","event","contains","_this13","rect2","rect1","getElementById","_this14","_this$state5","draggableBoxes","_box$metadata","_box$metadata2","_box$metadata3","_box$metadata4","zoomScale","objectPosition","imageShape","_extends","overrideHover","overrideSelected","renderedResolution","xAxisGuides","yAxisGuides","guideClassNames","xAxis","xAxisGuidesForCurrentBox","yAxis","yAxisGuidesForCurrentBox","array","defaultProps"],"mappings":"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"}