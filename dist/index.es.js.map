{"version":3,"file":"index.es.js","sources":["../node_modules/lodash.throttle/index.js","../src/utils/helpers.js","../src/utils/constants.js","../node_modules/style-inject/dist/style-inject.es.js","../src/Box.js","../node_modules/rollup-plugin-node-builtins/src/es6/setimmediate.js","../node_modules/rollup-plugin-node-builtins/src/es6/timers.js","../src/AlignmentGuides.js","../src/index.js"],"sourcesContent":["/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the `TypeError` message for \"Functions\" methods. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/** Used to match leading and trailing whitespace. */\nvar reTrim = /^\\s+|\\s+$/g;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        result = wait - timeSinceLastCall;\n\n    return maxing ? nativeMin(result, maxWait - timeSinceLastInvoke) : result;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\n/**\n * Creates a throttled function that only invokes `func` at most once per\n * every `wait` milliseconds. The throttled function comes with a `cancel`\n * method to cancel delayed `func` invocations and a `flush` method to\n * immediately invoke them. Provide `options` to indicate whether `func`\n * should be invoked on the leading and/or trailing edge of the `wait`\n * timeout. The `func` is invoked with the last arguments provided to the\n * throttled function. Subsequent calls to the throttled function return the\n * result of the last `func` invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the throttled function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.throttle` and `_.debounce`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to throttle.\n * @param {number} [wait=0] The number of milliseconds to throttle invocations to.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=true]\n *  Specify invoking on the leading edge of the timeout.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new throttled function.\n * @example\n *\n * // Avoid excessively updating the position while scrolling.\n * jQuery(window).on('scroll', _.throttle(updatePosition, 100));\n *\n * // Invoke `renewToken` when the click event is fired, but not more than once every 5 minutes.\n * var throttled = _.throttle(renewToken, 300000, { 'trailing': false });\n * jQuery(element).on('click', throttled);\n *\n * // Cancel the trailing throttled invocation.\n * jQuery(window).on('popstate', throttled.cancel);\n */\nfunction throttle(func, wait, options) {\n  var leading = true,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  if (isObject(options)) {\n    leading = 'leading' in options ? !!options.leading : leading;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n  return debounce(func, wait, {\n    'leading': leading,\n    'maxWait': wait,\n    'trailing': trailing\n  });\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && objectToString.call(value) == symbolTag);\n}\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = value.replace(reTrim, '');\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nmodule.exports = throttle;\n","export const calculateGuidePositions = (dimensions, axis) => {\n\tif (axis === 'x') {\n\t\tconst start = dimensions.left;\n\t\tconst middle = dimensions.left + parseInt(dimensions.width / 2, 10);\n\t\tconst end = dimensions.left + dimensions.width;\n\n\t\treturn [ start, middle, end ];\n\t} else {\n\t\tconst start = dimensions.top;\n\t\tconst middle = dimensions.top + parseInt(dimensions.height / 2, 10);\n\t\tconst end = dimensions.top + dimensions.height;\n\n\t\treturn [ start, middle, end ];\n\t}\n};\n\nexport const proximityListener = (active, allGuides) => {\n\tconst xAxisGuidesForActiveBox = allGuides[active].x;\n\tconst yAxisGuidesForActiveBox = allGuides[active].y;\n\n\tconst xAxisAllGuides = getAllGuidesForGivenAxisExceptActiveBox(allGuides, xAxisGuidesForActiveBox, 'x');\n\tconst yAxisAllGuides = getAllGuidesForGivenAxisExceptActiveBox(allGuides, yAxisGuidesForActiveBox, 'y');\n\tconst xAxisMatchedGuides = checkValueProximities(xAxisGuidesForActiveBox, xAxisAllGuides);\n\tconst yAxisMatchedGuides = checkValueProximities(yAxisGuidesForActiveBox, yAxisAllGuides);\n\n\tconst allMatchedGuides = {};\n\n\tif (xAxisMatchedGuides.proximity) {\n\t\tallMatchedGuides.x = {\n\t\t\t...xAxisMatchedGuides,\n\t\t\tactiveBoxGuides: xAxisGuidesForActiveBox\n\t\t};\n\t}\n\n\tif (yAxisMatchedGuides.proximity) {\n\t\tallMatchedGuides.y = {\n\t\t\t...yAxisMatchedGuides,\n\t\t\tactiveBoxGuides: yAxisGuidesForActiveBox,\n\t\t};\n\t}\n\n\treturn allMatchedGuides;\n};\n\nexport const getAllGuidesForGivenAxisExceptActiveBox = (allGuides, guidesForActiveBoxAlongGivenAxis, axis) => {\n\tconst result = Object.keys(allGuides).map(box => {\n\t\tconst currentBoxGuidesAlongGivenAxis = allGuides[box][axis];\n\t\tif (currentBoxGuidesAlongGivenAxis !== guidesForActiveBoxAlongGivenAxis) {\n\t\t\treturn currentBoxGuidesAlongGivenAxis;\n\t\t}\n\t});\n\n\treturn result.filter(guides => guides !== undefined);\n};\n\nexport const checkValueProximities = (activeBoxGuidesInOneAxis, allOtherGuidesInOneAxis) => {\n\tlet proximity = null;\n\tlet intersection = null;\n\tlet matchedArray = [];\n\tconst snapThreshold = 5;\n\tfor (let index = 0; index < allOtherGuidesInOneAxis.length; index += 1) {\n\t\tlet index2 = 0;\n\t\tlet index3 = 0;\n\n\t\twhile (index2 < activeBoxGuidesInOneAxis.length && index3 < allOtherGuidesInOneAxis[index].length) {\n\t\t\tconst diff = Math.abs(activeBoxGuidesInOneAxis[index2] - allOtherGuidesInOneAxis[index][index3]);\n\t\t\tif (diff <= snapThreshold) {\n\t\t\t\tproximity = { value: diff, activeBoxIndex: index2, matchedBoxIndex: index3 };\n\t\t\t\tmatchedArray = allOtherGuidesInOneAxis[index];\n\t\t\t\tintersection = allOtherGuidesInOneAxis[index][index3];\n\t\t\t}\n\n\t\t\tif (activeBoxGuidesInOneAxis[index2] < allOtherGuidesInOneAxis[index][index3]) {\n\t\t\t\tindex2 += 1;\n\t\t\t} else {\n\t\t\t\tindex3 += 1;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn { matchedArray, proximity, intersection };\n};\n\nexport const calculateBoundariesForDrag = (left, top, width, height, bounds) => {\n\tconst boundingBox = { ...bounds };\n\tif (left >= 0 && left <= boundingBox.width - width && top >= 0 && top <= boundingBox.height - height) {\n\t\treturn {\n\t\t\tleft,\n\t\t\ttop\n\t\t};\n\t} else if (left >= 0 && left <= boundingBox.width - width) {\n\t\treturn {\n\t\t\tleft,\n\t\t\ttop: top < 0 ? 0 : (boundingBox.height - height)\n\t\t};\n\t} else if (top >= 0 && top <= boundingBox.height - height) {\n\t\treturn {\n\t\t\tleft: left < 0 ? 0 : (boundingBox.width - width),\n\t\t\ttop\n\t\t};\n\t} else {\n\t\treturn {\n\t\t\tleft: left < 0 ? 0 : (boundingBox.width - width),\n\t\t\ttop: top < 0 ? 0 : (boundingBox.height - height)\n\t\t};\n\t}\n};\n\n// Calculate boundaries for boxes given an output resolution\nexport const calculateBoundariesForResize = (left, top, width, height, bounds) => {\n\tconst boundingBox = { ...bounds };\n\tlet widthDifference = 0;\n\tlet heightDifference = 0;\n\tif (left >= 0 && left + width <= boundingBox.width && top >= 0 && top + height <= boundingBox.height) {\n\t\treturn {\n\t\t\tleft,\n\t\t\ttop,\n\t\t\twidth,\n\t\t\theight\n\t\t};\n\t} else if (left < 0 && top < 0) {\n\t\treturn {\n\t\t\tleft: 0,\n\t\t\ttop: 0,\n\t\t\twidth: width + left <= boundingBox.width ? width + left : boundingBox.width,\n\t\t\theight: height + top <= boundingBox.height ? height + top : boundingBox.height\n\t\t};\n\t} else if (left < 0) {\n\t\treturn {\n\t\t\tleft: 0,\n\t\t\ttop,\n\t\t\twidth: width + left <= boundingBox.width ? width + left : boundingBox.width,\n\t\t\theight: height + top <= boundingBox.height ? height : boundingBox.height - top\n\t\t};\n\t} else if (top < 0) {\n\t\treturn {\n\t\t\tleft,\n\t\t\ttop: 0,\n\t\t\twidth: width + left <= boundingBox.width ? width : boundingBox.width - left,\n\t\t\theight: height + top <= boundingBox.height ? height + top : boundingBox.height\n\t\t};\n\t} else if (left >= 0 && left + width <= boundingBox.width) {\n\t\theightDifference = (top + height) - boundingBox.height;\n\t\treturn {\n\t\t\tleft,\n\t\t\ttop: top < 0 ? 0 : top,\n\t\t\twidth,\n\t\t\theight: height - heightDifference\n\t\t};\n\t} else if (top >= 0 && top + height <= boundingBox.height) {\n\t\twidthDifference = (left + width) - boundingBox.width;\n\t\treturn {\n\t\t\tleft: left < 0 ? 0 : left,\n\t\t\ttop,\n\t\t\twidth: width - widthDifference,\n\t\t\theight\n\t\t};\n\t} else {\n\t\twidthDifference = (left + width) - boundingBox.width;\n\t\theightDifference = (top + height) - boundingBox.height;\n\t\treturn {\n\t\t\tleft: left < 0 ? 0 : left,\n\t\t\ttop: top < 0 ? 0 : top,\n\t\t\twidth: width - widthDifference,\n\t\t\theight: height - heightDifference\n\t\t};\n\t}\n};\n\nexport const getOffsetCoordinates = (node) => {\n\treturn {\n\t\tx: node.offsetLeft,\n\t\ty: node.offsetTop,\n\t\ttop: node.offsetTop,\n\t\tleft: node.offsetLeft,\n\t\twidth: node.offsetWidth,\n\t\theight: node.offsetHeight\n\t};\n};\n\nexport const getLength = (x, y) => Math.sqrt(x * x + y * y);\n\nexport const topLeftToCenter = ({ left, top, width, height, rotateAngle }) => ({\n\tcx: left + width / 2,\n\tcy: top + height / 2,\n\twidth,\n\theight,\n\trotateAngle\n});\n\nexport const centerToTopLeft = ({ cx, cy, width, height, rotateAngle }) => ({\n\ttop: cy - height / 2,\n\tleft: cx - width / 2,\n\twidth,\n\theight,\n\trotateAngle\n});\n\nconst setWidthAndDeltaW = (width, deltaW, minWidth) => {\n\tconst expectedWidth = width + deltaW\n\tif (expectedWidth > minWidth) {\n\t\twidth = expectedWidth\n\t} else {\n\t\tdeltaW = minWidth - width\n\t\twidth = minWidth\n\t}\n\treturn { width, deltaW }\n}\n\nconst setHeightAndDeltaH = (height, deltaH, minHeight) => {\n\tconst expectedHeight = height + deltaH\n\tif (expectedHeight > minHeight) {\n\t\theight = expectedHeight\n\t} else {\n\t\tdeltaH = minHeight - height\n\t\theight = minHeight\n\t}\n\treturn { height, deltaH }\n}\n\nexport const getNewStyle = (type, rect, deltaW, deltaH, minWidth, minHeight) => {\n\tlet { width, height, cx, cy, rotateAngle } = rect;\n\tconst widthFlag = width < 0 ? -1 : 1;\n\tconst heightFlag = height < 0 ? -1 : 1;\n\twidth = Math.abs(width)\n\theight = Math.abs(height)\n\tswitch (type) {\n\t\tcase 'tr': {\n\t\t\tdeltaH = -deltaH\n\t\t\tconst widthAndDeltaW = setWidthAndDeltaW(width, deltaW, minWidth)\n\t\t\twidth = widthAndDeltaW.width\n\t\t\tdeltaW = widthAndDeltaW.deltaW\n\t\t\tconst heightAndDeltaH = setHeightAndDeltaH(height, deltaH, minHeight)\n\t\t\theight = heightAndDeltaH.height\n\t\t\tdeltaH = heightAndDeltaH.deltaH\n\t\t\tcx += deltaW / 2 * cos(rotateAngle) + deltaH / 2 * sin(rotateAngle)\n\t\t\tcy += deltaW / 2 * sin(rotateAngle) - deltaH / 2 * cos(rotateAngle)\n\t\t\tbreak\n\t\t}\n\t\tcase 'br': {\n\t\t\tconst widthAndDeltaW = setWidthAndDeltaW(width, deltaW, minWidth)\n\t\t\twidth = widthAndDeltaW.width\n\t\t\tdeltaW = widthAndDeltaW.deltaW\n\t\t\tconst heightAndDeltaH = setHeightAndDeltaH(height, deltaH, minHeight)\n\t\t\theight = heightAndDeltaH.height\n\t\t\tdeltaH = heightAndDeltaH.deltaH\n\t\t\tcx += deltaW / 2 * cos(rotateAngle) - deltaH / 2 * sin(rotateAngle)\n\t\t\tcy += deltaW / 2 * sin(rotateAngle) + deltaH / 2 * cos(rotateAngle)\n\t\t\tbreak\n\t\t}\n\t\tcase 'bl': {\n\t\t\tdeltaW = -deltaW\n\t\t\tconst widthAndDeltaW = setWidthAndDeltaW(width, deltaW, minWidth)\n\t\t\twidth = widthAndDeltaW.width\n\t\t\tdeltaW = widthAndDeltaW.deltaW\n\t\t\tconst heightAndDeltaH = setHeightAndDeltaH(height, deltaH, minHeight)\n\t\t\theight = heightAndDeltaH.height\n\t\t\tdeltaH = heightAndDeltaH.deltaH\n\t\t\tcx -= deltaW / 2 * cos(rotateAngle) + deltaH / 2 * sin(rotateAngle)\n\t\t\tcy -= deltaW / 2 * sin(rotateAngle) - deltaH / 2 * cos(rotateAngle)\n\t\t\tbreak\n\t\t}\n\t\tcase 'tl': {\n\t\t\tdeltaW = -deltaW\n\t\t\tdeltaH = -deltaH\n\t\t\tconst widthAndDeltaW = setWidthAndDeltaW(width, deltaW, minWidth)\n\t\t\twidth = widthAndDeltaW.width\n\t\t\tdeltaW = widthAndDeltaW.deltaW\n\t\t\tconst heightAndDeltaH = setHeightAndDeltaH(height, deltaH, minHeight)\n\t\t\theight = heightAndDeltaH.height\n\t\t\tdeltaH = heightAndDeltaH.deltaH\n\t\t\tcx -= deltaW / 2 * cos(rotateAngle) - deltaH / 2 * sin(rotateAngle)\n\t\t\tcy -= deltaW / 2 * sin(rotateAngle) + deltaH / 2 * cos(rotateAngle)\n\t\t\tbreak\n\t\t}\n\t}\n\n\treturn {\n\t\tposition: {\n\t\t\tcx,\n\t\t\tcy\n\t\t},\n\t\tsize: {\n\t\t\twidth: width * widthFlag,\n\t\t\theight: height * heightFlag\n\t\t}\n\t}\n}\n\n// Rotate helpers\nexport const getAngle = ({ x: x1, y: y1 }, { x: x2, y: y2 }) => {\n\tconst dot = x1 * x2 + y1 * y2;\n\tconst det = x1 * y2 - y1 * x2;\n\tconst angle = Math.atan2(det, dot) / Math.PI * 180;\n\treturn (angle + 360) % 360;\n};\n\nexport const getNewCoordinates = (rect) => {\n\tconst { x, y, width, height, rotateAngle, node } = rect;\n\tconst cx = x + (width / 2);\n\tconst cy = y + (height / 2);\n\n\tconst tempX = x - cx;\n\tconst tempY = y - cy;\n\tconst cosine = cos(rotateAngle);\n\tconst sine = sin(rotateAngle);\n\n\tconst rotatedX = cx + (tempX * cosine - tempY * sine);\n\tconst rotatedY = cy + (tempX * sine + tempY * cosine);\n\n\treturn { x: rotatedX, y: rotatedY, top: rotatedX, left: rotatedY, width, height, rotateAngle, node };\n};\n\nexport const degToRadian = (deg) => deg * Math.PI / 180;\nconst cos = (deg) => Math.cos(degToRadian(deg));\nconst sin = (deg) => Math.sin(degToRadian(deg));\n\n// Multiple selection helpers\nexport const getGroupCoordinates = (allBoxes, activeBoxes) => {\n\tlet selectedBoxes = [];\n\tfor (let box in allBoxes) {\n\t\tif (allBoxes.hasOwnProperty(box) && activeBoxes.includes(box)) {\n\t\t\tselectedBoxes.push(allBoxes[box]);\n\t\t}\n\t}\n\n\tconst x = selectedBoxes.reduce((min, b) => b.x < min ? b.x : min, selectedBoxes[0].x);\n\tconst y = selectedBoxes.reduce((min, b) => b.y < min ? b.y : min, selectedBoxes[0].y);\n\tconst width = selectedBoxes.reduce((max, b) => b.x + b.width > max ? b.x + b.width : max, (selectedBoxes[0].x + selectedBoxes[0].width)) - x;\n\tconst height = selectedBoxes.reduce((max, b) => b.y + b.height > max ? b.y + b.height : max, (selectedBoxes[0].y + selectedBoxes[0].height)) - y;\n\n\treturn { x, y, width, height };\n};\n\nexport const getBoxMetadata = () => {};","// Key map for changing the position and size of draggable boxes\n// Key map follows the Mousetrap syntax: https://craig.is/killing/mice\nexport const KEY_MAP = {\n\tMOVE_LEFT_1_PX: 'left',\n\tMOVE_RIGHT_1_PX: 'right',\n\tMOVE_UP_1_PX: 'up',\n\tMOVE_DOWN_1_PX: 'down',\n\tMOVE_LEFT_10_PX: 'shift+left',\n\tMOVE_RIGHT_10_PX: 'shift+right',\n\tMOVE_UP_10_PX: 'shift+up',\n\tMOVE_DOWN_10_PX: 'shift+down'\n};\n\n// Positions for resize handles\nexport const RESIZE_CORNERS = ['tr', 'tl', 'br', 'bl'];\nexport const RESIZE_EDGES = ['top', 'right', 'bottom', 'left'];\n\n// Positions for rotate handles\nexport const ROTATE_HANDLES = ['tr', 'tl', 'br', 'bl'];\n","function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import React, { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\nimport throttle from 'lodash.throttle';\nimport {\n\tcalculateBoundariesForDrag,\n\tcalculateBoundariesForResize,\n\tdegToRadian,\n\tgetAngle,\n\ttopLeftToCenter,\n\tgetLength,\n\tgetNewCoordinates,\n\tgetNewStyle,\n\tgetOffsetCoordinates, centerToTopLeft,\n} from './utils/helpers';\nimport { RESIZE_CORNERS, ROTATE_HANDLES } from './utils/constants';\nimport styles from './styles.scss';\n\nclass Box extends PureComponent {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.box = React.createRef();\n\t\tthis.coordinates = React.createRef();\n\t\tthis.height = React.createRef();\n\t\tthis.selectBox = this.selectBox.bind(this);\n\t\tthis.onDragStart = this.onDragStart.bind(this);\n\t\tthis.shortcutHandler = this.shortcutHandler.bind(this);\n\t\tthis.keyDownHandler = throttle(e => {\n\t\t\tthis.shortcutHandler(e);\n\t\t}, 300);\n\t\tthis.onResizeStart = this.onResizeStart.bind(this);\n\t\tthis.onRotateStart = this.onRotateStart.bind(this);\n\t\tthis.getCoordinatesWrapperWidth = this.getCoordinatesWrapperWidth.bind(this);\n\t}\n\n\tselectBox(e) {\n\t\tthis.props.selectBox(e);\n\t\tif (this.box && this.box.current) {\n\t\t\tthis.box.current.focus();\n\t\t}\n\t}\n\n\tonDragStart(e) {\n\t\tif ((this.props.position.drag || this.props.position.drag === undefined) && e.target.id.indexOf('box') !== -1) { // Allow drag only if drag property for the box is true or undefined\n\t\t\te.stopPropagation();\n\t\t\tconst target = this.box.current;\n\t\t\tconst boundingBox = this.props.getBoundingBoxElement();\n\t\t\tconst { position } = this.props;\n\t\t\tconst startingPosition = position.rotateAngle === 0 ? target.getBoundingClientRect().toJSON() : getOffsetCoordinates(target);\n\t\t\tconst boundingBoxPosition = boundingBox.current.getBoundingClientRect().toJSON();\n\t\t\tlet didDragHappen = false;\n\n\t\t\tlet data = {\n\t\t\t\tx: startingPosition.x - boundingBoxPosition.x,\n\t\t\t\ty: startingPosition.y - boundingBoxPosition.y,\n\t\t\t\ttop: startingPosition.y - boundingBoxPosition.y,\n\t\t\t\tleft: startingPosition.x - boundingBoxPosition.x,\n\t\t\t\twidth: startingPosition.width,\n\t\t\t\theight: startingPosition.height,\n\t\t\t\tnode: target\n\t\t\t};\n\t\t\tif (position.rotateAngle !== 0) {\n\t\t\t\tdata = {\n\t\t\t\t\tx: startingPosition.x,\n\t\t\t\t\ty: startingPosition.y,\n\t\t\t\t\ttop: startingPosition.y,\n\t\t\t\t\tleft: startingPosition.x,\n\t\t\t\t\twidth: startingPosition.width,\n\t\t\t\t\theight: startingPosition.height,\n\t\t\t\t\tnode: target\n\t\t\t\t};\n\t\t\t}\n\t\t\tthis.props.onDragStart && this.props.onDragStart(e, data);\n\n\t\t\tconst deltaX = Math.abs(target.offsetLeft - e.clientX);\n\t\t\tconst deltaY = Math.abs(target.offsetTop - e.clientY);\n\n\t\t\tconst onDrag = (e) => {\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\tconst boundingBox = this.props.getBoundingBoxElement();\n\t\t\t\t\tif (!boundingBox.current) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tconst boundingBoxDimensions = boundingBox.current.getBoundingClientRect().toJSON();\n\t\t\t\t\tconst boxWidth = this.props.position.width;\n\t\t\t\t\tconst boxHeight = this.props.position.height;\n\t\t\t\t\tconst left = e.clientX - deltaX;\n\t\t\t\t\tconst top = e.clientY - deltaY;\n\t\t\t\t\tlet currentPosition = this.props.boundToParent ?\n\t\t\t\t\t\tcalculateBoundariesForDrag(left, top, boxWidth, boxHeight, boundingBoxDimensions) :\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tleft,\n\t\t\t\t\t\t\ttop,\n\t\t\t\t\t\t\twidth: this.props.position.width,\n\t\t\t\t\t\t\theight: this.props.position.height,\n\t\t\t\t\t\t\tx: left,\n\t\t\t\t\t\t\ty: top,\n\t\t\t\t\t\t\tnode: this.box.current\n\t\t\t\t\t\t};\n\t\t\t\t\tdata = {\n\t\t\t\t\t\tx: currentPosition.left,\n\t\t\t\t\t\ty: currentPosition.top,\n\t\t\t\t\t\ttop: currentPosition.top,\n\t\t\t\t\t\tleft: currentPosition.left,\n\t\t\t\t\t\twidth: this.props.position.width,\n\t\t\t\t\t\theight: this.props.position.height,\n\t\t\t\t\t\tnode: this.box.current\n\t\t\t\t\t};\n\t\t\t\t\tdidDragHappen = true;\n\t\t\t\t\tthis.props.onDrag && this.props.onDrag(e, data);\n\t\t\t};\n\n\t\t\tconst onDragEnd = (e) => {\n\t\t\t\tif (didDragHappen) {\n\t\t\t\t\tthis.props.onDragEnd && this.props.onDragEnd(e, data);\n\t\t\t\t} else {\n\t\t\t\t\tdidDragHappen = false;\n\t\t\t\t}\n\t\t\t\tdocument.removeEventListener('mousemove', onDrag);\n\t\t\t\tdocument.removeEventListener('mouseup', onDragEnd);\n\t\t\t};\n\n\t\t\tdocument.addEventListener('mousemove', onDrag);\n\t\t\tdocument.addEventListener('mouseup', onDragEnd);\n\t\t}\n\t}\n\n\tshortcutHandler(e) {\n\t\tconst { position } = this.props;\n\n\t\tif (!e.shiftKey && !e.ctrlKey && e.key === 'ArrowRight') {\n\t\t\tconst data = Object.assign({}, position, {\n\t\t\t\tnode: this.box.current,\n\t\t\t\tleft: position.left + 1,\n\t\t\t\tx: position.x + 1\n\t\t\t});\n\t\t\tthis.props.onKeyUp && this.props.onKeyUp(e, data);\n\t\t} else if (e.shiftKey && !e.ctrlKey && e.key === 'ArrowRight') {\n\t\t\tconst data = Object.assign({}, position, {\n\t\t\t\tnode: this.box.current,\n\t\t\t\tleft: position.left + 10,\n\t\t\t\tx: position.x + 10\n\t\t\t});\n\t\t\tthis.props.onKeyUp && this.props.onKeyUp(e, data);\n\t\t} else if (!e.shiftKey && !e.ctrlKey && e.key === 'ArrowLeft') {\n\t\t\tconst data = Object.assign({}, position, {\n\t\t\t\tnode: this.box.current,\n\t\t\t\tleft: position.left - 1,\n\t\t\t\tx: position.x - 1\n\t\t\t});\n\t\t\tthis.props.onKeyUp && this.props.onKeyUp(e, data);\n\t\t} else if (e.shiftKey && !e.ctrlKey && e.key === 'ArrowLeft') {\n\t\t\tconst data = Object.assign({}, position, {\n\t\t\t\tnode: this.box.current,\n\t\t\t\tleft: position.left - 10,\n\t\t\t\tx: position.x - 10\n\t\t\t});\n\t\t\tthis.props.onKeyUp && this.props.onKeyUp(e, data);\n\t\t} else if (!e.shiftKey && !e.ctrlKey && e.key === 'ArrowUp') {\n\t\t\tconst data = Object.assign({}, position, {\n\t\t\t\tnode: this.box.current,\n\t\t\t\ttop: position.top - 1,\n\t\t\t\ty: position.y - 1\n\t\t\t});\n\t\t\tthis.props.onKeyUp && this.props.onKeyUp(e, data);\n\t\t} else if (e.shiftKey && !e.ctrlKey && e.key === 'ArrowUp') {\n\t\t\tconst data = Object.assign({}, position, {\n\t\t\t\tnode: this.box.current,\n\t\t\t\ttop: position.top - 10,\n\t\t\t\ty: position.y - 10\n\t\t\t});\n\t\t\tthis.props.onKeyUp && this.props.onKeyUp(e, data);\n\t\t} else if (!e.shiftKey && !e.ctrlKey && e.key === 'ArrowDown') {\n\t\t\tconst data = Object.assign({}, position, {\n\t\t\t\tnode: this.box.current,\n\t\t\t\ttop: position.top + 1,\n\t\t\t\ty: position.y + 1\n\t\t\t});\n\t\t\tthis.props.onKeyUp && this.props.onKeyUp(e, data);\n\t\t} else if (e.shiftKey && !e.ctrlKey && e.key === 'ArrowDown') {\n\t\t\tconst data = Object.assign({}, position, {\n\t\t\t\tnode: this.box.current,\n\t\t\t\ttop: position.top + 10,\n\t\t\t\ty: position.y + 10\n\t\t\t});\n\t\t\tthis.props.onKeyUp && this.props.onKeyUp(e, data);\n\t\t} else if (e.ctrlKey && !e.shiftKey && e.key === 'ArrowRight') {\n\t\t\tconst data = Object.assign({}, position, {\n\t\t\t\tnode: this.box.current,\n\t\t\t\twidth: position.width + 1\n\t\t\t});\n\t\t\tthis.props.onKeyUp && this.props.onKeyUp(e, data);\n\t\t} else if (e.ctrlKey && e.shiftKey && e.key === 'ArrowRight') {\n\t\t\tconst data = Object.assign({}, position, {\n\t\t\t\tnode: this.box.current,\n\t\t\t\twidth: position.width + 10\n\t\t\t});\n\t\t\tthis.props.onKeyUp && this.props.onKeyUp(e, data);\n\t\t} else if (e.ctrlKey && !e.shiftKey && e.key === 'ArrowLeft') {\n\t\t\tconst data = Object.assign({}, position, {\n\t\t\t\tnode: this.box.current,\n\t\t\t\twidth: position.width - 1\n\t\t\t});\n\t\t\tthis.props.onKeyUp && this.props.onKeyUp(e, data);\n\t\t} else if (e.ctrlKey && e.shiftKey && e.key === 'ArrowLeft') {\n\t\t\tconst data = Object.assign({}, position, {\n\t\t\t\tnode: this.box.current,\n\t\t\t\twidth: position.width - 10\n\t\t\t});\n\t\t\tthis.props.onKeyUp && this.props.onKeyUp(e, data);\n\t\t} else if (e.ctrlKey && !e.shiftKey && e.key === 'ArrowDown') {\n\t\t\tconst data = Object.assign({}, position, {\n\t\t\t\tnode: this.box.current,\n\t\t\t\theight: position.height + 1\n\t\t\t});\n\t\t\tthis.props.onKeyUp && this.props.onKeyUp(e, data);\n\t\t} else if (e.ctrlKey && e.shiftKey && e.key === 'ArrowDown') {\n\t\t\tconst data = Object.assign({}, position, {\n\t\t\t\tnode: this.box.current,\n\t\t\t\theight: position.height + 10\n\t\t\t});\n\t\t\tthis.props.onKeyUp && this.props.onKeyUp(e, data);\n\t\t} else if (e.ctrlKey && !e.shiftKey && e.key === 'ArrowUp') {\n\t\t\tconst data = Object.assign({}, position, {\n\t\t\t\tnode: this.box.current,\n\t\t\t\theight: position.height - 1\n\t\t\t});\n\t\t\tthis.props.onKeyUp && this.props.onKeyUp(e, data);\n\t\t} else if (e.ctrlKey && e.shiftKey && e.key === 'ArrowUp') {\n\t\t\tconst data = Object.assign({}, position, {\n\t\t\t\tnode: this.box.current,\n\t\t\t\theight: position.height - 10\n\t\t\t});\n\t\t\tthis.props.onKeyUp && this.props.onKeyUp(e, data);\n\t\t}\n\t}\n\n\tonResizeStart(e) {\n\t\tif (this.props.position.resize || this.props.position.resize === undefined) { // Allow resize only if resize property for the box is true or undefined\n\t\t\te.stopPropagation();\n\t\t\tconst { target, clientX: startX, clientY: startY } = e;\n\t\t\tconst boundingBox = this.props.getBoundingBoxElement();\n\t\t\tconst { position } = this.props;\n\t\t\tconst rotateAngle = position.rotateAngle ? position.rotateAngle : 0;\n\t\t\tconst startingDimensions = getOffsetCoordinates(this.box.current);\n\t\t\tconst boundingBoxPosition = getOffsetCoordinates(boundingBox.current);\n\t\t\tconst { left, top, width, height } = startingDimensions;\n\t\t\tconst { cx, cy } = topLeftToCenter({ left, top, width, height, rotateAngle });\n\t\t\tconst rect = { width, height, cx, cy, rotateAngle };\n\t\t\tlet data = {\n\t\t\t\twidth: startingDimensions.width,\n\t\t\t\theight: startingDimensions.height,\n\t\t\t\tx: startingDimensions.left + boundingBoxPosition.x,\n\t\t\t\ty: startingDimensions.top + boundingBoxPosition.y,\n\t\t\t\tleft: startingDimensions.left + boundingBoxPosition.x,\n\t\t\t\ttop: startingDimensions.top + boundingBoxPosition.y,\n\t\t\t\tnode: this.box.current\n\t\t\t};\n\t\t\t// if (rotateAngle !== 0) {\n\t\t\t// \tdata = {\n\t\t\t// \t\twidth: startingDimensions.width,\n\t\t\t// \t\theight: startingDimensions.height,\n\t\t\t// \t\tx: startingDimensions.left + boundingBoxPosition.x,\n\t\t\t// \t\ty: startingDimensions.top + boundingBoxPosition.y,\n\t\t\t// \t\tleft: startingDimensions.left + boundingBoxPosition.x,\n\t\t\t// \t\ttop: startingDimensions.top + boundingBoxPosition.y,\n\t\t\t// \t\tnode: this.box.current\n\t\t\t// \t};\n\t\t\t// }\n\n\t\t\tthis.props.onResizeStart && this.props.onResizeStart(e, data);\n\t\t\tlet didResizeHappen = false;\n\t\t\tconst onResize = (e) => {\n\t\t\t\tconst { clientX, clientY } = e;\n\t\t\t\tconst deltaX = clientX - startX;\n\t\t\t\tconst deltaY = clientY - startY;\n\t\t\t\tconst alpha = Math.atan2(deltaY, deltaX);\n\t\t\t\tconst deltaL = getLength(deltaX, deltaY);\n\n\t\t\t\t// const { minWidth, minHeight } = this.props;\n\t\t\t\tconst beta = alpha - degToRadian(rotateAngle);\n\t\t\t\tconst deltaW = deltaL * Math.cos(beta);\n\t\t\t\tconst deltaH = deltaL * Math.sin(beta);\n\t\t\t\t// TODO: Account for ratio when there are more points for resizing and when adding extras like constant aspect ratio resizing, shift + resize etc.\n\t\t\t\t// const ratio = rect.width / rect.height;\n\t\t\t\tconst type = target.id.replace('resize-', '');\n\n\t\t\t\tconst { position: { cx, cy }, size: { width, height } } = getNewStyle(type, rect, deltaW, deltaH, 10, 10); // Use a better way to set minWidth and minHeight\n\t\t\t\tconst tempPosition = centerToTopLeft({ cx, cy, width, height, rotateAngle });\n\n\t\t\t\tdata = {\n\t\t\t\t\twidth: tempPosition.width,\n\t\t\t\t\theight: tempPosition.height,\n\t\t\t\t\tx: tempPosition.left,\n\t\t\t\t\ty: tempPosition.top,\n\t\t\t\t\tleft: tempPosition.left,\n\t\t\t\t\ttop: tempPosition.top,\n\t\t\t\t\trotateAngle,\n\t\t\t\t\tnode: this.box.current\n\t\t\t\t};\n\n\t\t\t\t// if (rotateAngle !== 0) {\n\t\t\t\t// \tdata = {\n\t\t\t\t// \t\twidth: tempPosition.width,\n\t\t\t\t// \t\theight: tempPosition.height,\n\t\t\t\t// \t\tx: tempPosition.left,\n\t\t\t\t// \t\ty: tempPosition.top,\n\t\t\t\t// \t\tleft: tempPosition.left,\n\t\t\t\t// \t\ttop: tempPosition.top,\n\t\t\t\t// \t\trotateAngle,\n\t\t\t\t// \t\tnode: this.box.current\n\t\t\t\t// \t};\n\t\t\t\t// }\n\t\t\t\tdidResizeHappen = true;\n\t\t\t\t// Calculate the restrictions if resize goes out of bounds\n\t\t\t\tconst currentPosition = this.props.boundToParent ?\n\t\t\t\t\tcalculateBoundariesForResize(data.left, data.top, tempPosition.width, tempPosition.height, boundingBoxPosition) :\n\t\t\t\t\tObject.assign({}, data);\n\n\t\t\t\tdata = Object.assign({}, data, currentPosition, {\n\t\t\t\t\tx: currentPosition.left,\n\t\t\t\t\ty: currentPosition.top\n\t\t\t\t});\n\n\t\t\t\tthis.props.onResize && this.props.onResize(e, data);\n\t\t\t};\n\n\t\t\tconst onResizeEnd = (e) => {\n\t\t\t\tonResize && document.removeEventListener('mousemove', onResize);\n\t\t\t\tonResizeEnd && document.removeEventListener('mouseup', onResizeEnd);\n\t\t\t\tif (didResizeHappen) {\n\t\t\t\t\tthis.props.onResizeEnd && this.props.onResizeEnd(e, data);\n\t\t\t\t} else {\n\t\t\t\t\tdidResizeHappen = false;\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tonResize && document.addEventListener('mousemove', onResize);\n\t\t\tonResizeEnd && document.addEventListener('mouseup', onResizeEnd);\n\t\t}\n\t}\n\n\tonRotateStart(e) {\n\t\tif (this.props.position.rotate || this.props.position.rotate === undefined) {\n\t\t\te.stopPropagation();\n\t\t\tconst target = this.box.current;\n\t\t\tconst { clientX, clientY } = e;\n\t\t\tconst { rotateAngle } = this.props.position;\n\t\t\tconst boundingBox = this.props.getBoundingBoxElement();\n\t\t\tconst start = target.getBoundingClientRect().toJSON();\n\t\t\tconst boundingBoxPosition = boundingBox.current.getBoundingClientRect().toJSON();\n\t\t\tconst center = {\n\t\t\t\tx: start.left + start.width / 2,\n\t\t\t\ty: start.top + start.height / 2\n\t\t\t};\n\t\t\tconst startVector = {\n\t\t\t\tx: clientX - center.x,\n\t\t\t\ty: clientY - center.y\n\t\t\t};\n\n\t\t\tconst startAngle = rotateAngle ? rotateAngle : 0;\n\t\t\tlet angle = startAngle ? startAngle : 0;\n\t\t\tlet data = {\n\t\t\t\tx: start.x - boundingBoxPosition.x,\n\t\t\t\ty: start.y - boundingBoxPosition.y,\n\t\t\t\ttop: start.top - boundingBoxPosition.top,\n\t\t\t\tleft: start.left - boundingBoxPosition.left,\n\t\t\t\twidth: start.width,\n\t\t\t\theight: start.height,\n\t\t\t\trotateAngle: angle,\n\t\t\t\tnode: target\n\t\t\t};\n\n\t\t\tconst newCoordinates = getNewCoordinates(data);\n\t\t\tthis.props.onRotateStart && this.props.onRotateStart(e, newCoordinates);\n\n\t\t\tconst onRotate = (e) => {\n\t\t\t\te.stopPropagation();\n\t\t\t\tconst { clientX, clientY } = e;\n\t\t\t\tconst rotateVector = {\n\t\t\t\t\tx: clientX - center.x,\n\t\t\t\t\ty: clientY - center.y\n\t\t\t\t};\n\t\t\t\tangle = getAngle(startVector, rotateVector);\n\t\t\t\t// Snap box during rotation at certain angles - 0, 90, 180, 270, 360\n\t\t\t\tlet rotateAngle = Math.round(startAngle + angle)\n\t\t\t\tif (rotateAngle >= 360) {\n\t\t\t\t\trotateAngle -= 360\n\t\t\t\t} else if (rotateAngle < 0) {\n\t\t\t\t\trotateAngle += 360\n\t\t\t\t}\n\t\t\t\tif (rotateAngle > 356 || rotateAngle < 4) {\n\t\t\t\t\trotateAngle = 0\n\t\t\t\t} else if (rotateAngle > 86 && rotateAngle < 94) {\n\t\t\t\t\trotateAngle = 90\n\t\t\t\t} else if (rotateAngle > 176 && rotateAngle < 184) {\n\t\t\t\t\trotateAngle = 180\n\t\t\t\t} else if (rotateAngle > 266 && rotateAngle < 274) {\n\t\t\t\t\trotateAngle = 270\n\t\t\t\t}\n\t\t\t\tdata = Object.assign({}, data, {\n\t\t\t\t\trotateAngle\n\t\t\t\t});\n\n\t\t\t\tconst newCoordinates = getNewCoordinates(data);\n\t\t\t\tthis.props.onRotate && this.props.onRotate(e, newCoordinates);\n\t\t\t};\n\n\t\t\tconst onRotateEnd = (e) => {\n\t\t\t\tonRotate && document.removeEventListener('mousemove', onRotate);\n\t\t\t\tonRotateEnd && document.removeEventListener('mouseup', onRotateEnd);\n\t\t\t\tthis.props.onRotateEnd && this.props.onRotateEnd(e, data);\n\t\t\t};\n\n\t\t\tonRotate && document.addEventListener('mousemove', onRotate);\n\t\t\tonRotateEnd && document.addEventListener('mouseup', onRotateEnd);\n\t\t}\n\t}\n\n\tgetCoordinatesWrapperWidth() {\n\t\tif (this.props.isSelected && this.coordinates && this.coordinates.current) {\n\t\t\treturn this.coordinates.current.offsetWidth;\n\t\t}\n\t}\n\n\trender() {\n\t\tconst { areMultipleBoxesSelected, boxStyle, id, isSelected, position, resolution } = this.props;\n\t\tif (!isNaN(position.top) && !isNaN(position.left) && !isNaN(position.width) && !isNaN(position.height)) {\n\t\t\tconst boundingBox = this.props.getBoundingBoxElement();\n\t\t\tconst boundingBoxDimensions = boundingBox.current.getBoundingClientRect();\n\t\t\tlet xFactor = 1;\n\t\t\tlet yFactor = 1;\n\n\t\t\tif (resolution && resolution.width && resolution.height) {\n\t\t\t\txFactor = resolution.width / boundingBoxDimensions.width;\n\t\t\t\tyFactor = resolution.height / boundingBoxDimensions.height;\n\t\t\t}\n\n\t\t\tconst boxClassNames = isSelected ? `${styles.box} ${styles.selected}` : styles.box;\n\t\t\tconst rotateAngle = position.rotateAngle ? position.rotateAngle : 0;\n\t\t\tconst boxStyles = {\n\t\t\t\t...boxStyle,\n\t\t\t\twidth: `${position.width}px`,\n\t\t\t\theight: `${position.height}px`,\n\t\t\t\ttop: `${position.top}px`,\n\t\t\t\tleft: `${position.left}px`,\n\t\t\t\tzIndex: position.zIndex,\n\t\t\t\ttransform: `rotate(${rotateAngle}deg)`\n\t\t\t};\n\n\t\t\tif (isSelected) {\n\t\t\t\tboxStyles.zIndex = 99;\n\t\t\t}\n\n\t\t\treturn <div\n\t\t\t\tclassName={boxClassNames}\n\t\t\t\tid={id}\n\t\t\t\tonClick={this.selectBox}\n\t\t\t\tonMouseDown={this.props.drag ? this.onDragStart : null} // If this.props.drag is false, remove the mouseDown event handler for drag\n\t\t\t\tonKeyDown={e => { e.persist(); this.keyDownHandler(e); }}\n\t\t\t\tonKeyUp={this.shortcutHandler}\n\t\t\t\tref={this.box}\n\t\t\t\tstyle={boxStyles}\n\t\t\t\ttabIndex=\"0\"\n\t\t\t>\n\t\t\t\t{\n\t\t\t\t\tisSelected && !areMultipleBoxesSelected ?\n\t\t\t\t\t\t<span\n\t\t\t\t\t\t\tref={this.coordinates}\n\t\t\t\t\t\t\tclassName={styles.coordinates}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{`(${Math.round(position.x * xFactor)}, ${Math.round(position.y * yFactor)})`}\n\t\t\t\t\t\t</span> :\n\t\t\t\t\t\tnull\n\t\t\t\t}\n\t\t\t\t{\n\t\t\t\t\tisSelected && !areMultipleBoxesSelected ?\n\t\t\t\t\t\t<span\n\t\t\t\t\t\t\tclassName={`${styles.dimensions} ${styles.width}`}\n\t\t\t\t\t\t\tstyle={{ width: `${position.width}px`, top: `${position.height + 10}px` }}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{`${Math.round(position.width * xFactor)} x ${Math.round(position.height * yFactor)}`}\n\t\t\t\t\t\t</span> :\n\t\t\t\t\t\tnull\n\t\t\t\t}\n\t\t\t\t{\n\t\t\t\t\tisSelected && !areMultipleBoxesSelected ?\n\t\t\t\t\t\tRESIZE_CORNERS.map(handle => {\n\t\t\t\t\t\t\tconst className = `${styles.resizeCorners} ${styles[`resize-${handle}`]}`;\n\t\t\t\t\t\t\treturn <div\n\t\t\t\t\t\t\t\tkey={handle}\n\t\t\t\t\t\t\t\tclassName={className}\n\t\t\t\t\t\t\t\tonMouseDown={this.props.resize ? this.onResizeStart : null} // If this.props.resize is false then remove the mouseDown event handler for resize\n\t\t\t\t\t\t\t\tid={`resize-${handle}`}\n\t\t\t\t\t\t\t/>;\n\t\t\t\t\t\t}) :\n\t\t\t\t\t\tnull\n\t\t\t\t}\n\t\t\t\t{\n\t\t\t\t\tisSelected ?\n\t\t\t\t\t\tROTATE_HANDLES.map(handle => {\n\t\t\t\t\t\t\tconst className = `${styles.rotateHandle} ${styles[`rotate-${handle}`]}`;\n\t\t\t\t\t\t\treturn <div\n\t\t\t\t\t\t\t\tkey={handle}\n\t\t\t\t\t\t\t\tclassName={className}\n\t\t\t\t\t\t\t\tonMouseDown={this.props.rotate ? this.onRotateStart : null} // If this.props.rotate is false then remove the mouseDown event handler for rotate\n\t\t\t\t\t\t\t\tid={`rotate-${handle}`}\n\t\t\t\t\t\t\t/>;\n\t\t\t\t\t\t}) :\n\t\t\t\t\t\tnull\n\t\t\t\t}\n\t\t\t</div>;\n\t\t}\n\n\t\treturn null;\n\t}\n}\n\nBox.propTypes = {\n\tareMultipleBoxesSelected: PropTypes.bool,\n\tboundToParent: PropTypes.bool,\n\tdrag: PropTypes.bool,\n\tgetBoundingBoxElement: PropTypes.func,\n\tid: PropTypes.string,\n\tisSelected: PropTypes.bool,\n\tkeybindings: PropTypes.bool,\n\tonDragStart: PropTypes.func,\n\tonDrag: PropTypes.func,\n\tonDragEnd: PropTypes.func,\n\tonKeyUp: PropTypes.func,\n\tonResizeStart: PropTypes.func,\n\tonResize: PropTypes.func,\n\tonResizeEnd: PropTypes.func,\n\tonRotateStart: PropTypes.func,\n\tonRotate: PropTypes.func,\n\tonRotateEnd: PropTypes.func,\n\tposition: PropTypes.object.isRequired,\n\tresize: PropTypes.bool,\n\tresolution: PropTypes.object,\n\trotate: PropTypes.bool\n};\n\nexport default Box;","/*\nMIT Licence\nCopyright (c) 2012 Barnesandnoble.com, llc, Donavon West, and Domenic Denicola\nhttps://github.com/YuzuJS/setImmediate/blob/f1ccbfdf09cb93aadf77c4aa749ea554503b9234/LICENSE.txt\n*/\n\nvar nextHandle = 1; // Spec says greater than zero\nvar tasksByHandle = {};\nvar currentlyRunningATask = false;\nvar doc = global.document;\nvar registerImmediate;\n\nexport function setImmediate(callback) {\n  // Callback can either be a function or a string\n  if (typeof callback !== \"function\") {\n    callback = new Function(\"\" + callback);\n  }\n  // Copy function arguments\n  var args = new Array(arguments.length - 1);\n  for (var i = 0; i < args.length; i++) {\n      args[i] = arguments[i + 1];\n  }\n  // Store and register the task\n  var task = { callback: callback, args: args };\n  tasksByHandle[nextHandle] = task;\n  registerImmediate(nextHandle);\n  return nextHandle++;\n}\n\nexport function clearImmediate(handle) {\n    delete tasksByHandle[handle];\n}\n\nfunction run(task) {\n    var callback = task.callback;\n    var args = task.args;\n    switch (args.length) {\n    case 0:\n        callback();\n        break;\n    case 1:\n        callback(args[0]);\n        break;\n    case 2:\n        callback(args[0], args[1]);\n        break;\n    case 3:\n        callback(args[0], args[1], args[2]);\n        break;\n    default:\n        callback.apply(undefined, args);\n        break;\n    }\n}\n\nfunction runIfPresent(handle) {\n    // From the spec: \"Wait until any invocations of this algorithm started before this one have completed.\"\n    // So if we're currently running a task, we'll need to delay this invocation.\n    if (currentlyRunningATask) {\n        // Delay by doing a setTimeout. setImmediate was tried instead, but in Firefox 7 it generated a\n        // \"too much recursion\" error.\n        setTimeout(runIfPresent, 0, handle);\n    } else {\n        var task = tasksByHandle[handle];\n        if (task) {\n            currentlyRunningATask = true;\n            try {\n                run(task);\n            } finally {\n                clearImmediate(handle);\n                currentlyRunningATask = false;\n            }\n        }\n    }\n}\n\nfunction installNextTickImplementation() {\n    registerImmediate = function(handle) {\n        process.nextTick(function () { runIfPresent(handle); });\n    };\n}\n\nfunction canUsePostMessage() {\n    // The test against `importScripts` prevents this implementation from being installed inside a web worker,\n    // where `global.postMessage` means something completely different and can't be used for this purpose.\n    if (global.postMessage && !global.importScripts) {\n        var postMessageIsAsynchronous = true;\n        var oldOnMessage = global.onmessage;\n        global.onmessage = function() {\n            postMessageIsAsynchronous = false;\n        };\n        global.postMessage(\"\", \"*\");\n        global.onmessage = oldOnMessage;\n        return postMessageIsAsynchronous;\n    }\n}\n\nfunction installPostMessageImplementation() {\n    // Installs an event handler on `global` for the `message` event: see\n    // * https://developer.mozilla.org/en/DOM/window.postMessage\n    // * http://www.whatwg.org/specs/web-apps/current-work/multipage/comms.html#crossDocumentMessages\n\n    var messagePrefix = \"setImmediate$\" + Math.random() + \"$\";\n    var onGlobalMessage = function(event) {\n        if (event.source === global &&\n            typeof event.data === \"string\" &&\n            event.data.indexOf(messagePrefix) === 0) {\n            runIfPresent(+event.data.slice(messagePrefix.length));\n        }\n    };\n\n    if (global.addEventListener) {\n        global.addEventListener(\"message\", onGlobalMessage, false);\n    } else {\n        global.attachEvent(\"onmessage\", onGlobalMessage);\n    }\n\n    registerImmediate = function(handle) {\n        global.postMessage(messagePrefix + handle, \"*\");\n    };\n}\n\nfunction installMessageChannelImplementation() {\n    var channel = new MessageChannel();\n    channel.port1.onmessage = function(event) {\n        var handle = event.data;\n        runIfPresent(handle);\n    };\n\n    registerImmediate = function(handle) {\n        channel.port2.postMessage(handle);\n    };\n}\n\nfunction installReadyStateChangeImplementation() {\n    var html = doc.documentElement;\n    registerImmediate = function(handle) {\n        // Create a <script> element; its readystatechange event will be fired asynchronously once it is inserted\n        // into the document. Do so, thus queuing up the task. Remember to clean up once it's been called.\n        var script = doc.createElement(\"script\");\n        script.onreadystatechange = function () {\n            runIfPresent(handle);\n            script.onreadystatechange = null;\n            html.removeChild(script);\n            script = null;\n        };\n        html.appendChild(script);\n    };\n}\n\nfunction installSetTimeoutImplementation() {\n    registerImmediate = function(handle) {\n        setTimeout(runIfPresent, 0, handle);\n    };\n}\n\n// If supported, we should attach to the prototype of global, since that is where setTimeout et al. live.\nvar attachTo = Object.getPrototypeOf && Object.getPrototypeOf(global);\nattachTo = attachTo && attachTo.setTimeout ? attachTo : global;\n\n// Don't get fooled by e.g. browserify environments.\nif ({}.toString.call(global.process) === \"[object process]\") {\n    // For Node.js before 0.9\n    installNextTickImplementation();\n\n} else if (canUsePostMessage()) {\n    // For non-IE10 modern browsers\n    installPostMessageImplementation();\n\n} else if (global.MessageChannel) {\n    // For web workers, where supported\n    installMessageChannelImplementation();\n\n} else if (doc && \"onreadystatechange\" in doc.createElement(\"script\")) {\n    // For IE 68\n    installReadyStateChangeImplementation();\n\n} else {\n    // For older browsers\n    installSetTimeoutImplementation();\n}\nexport default {\n  setTimeout: setTimeout,\n  clearTimeout: clearTimeout\n}\n","// License https://jryans.mit-license.org/\n\nimport {setImmediate, clearImmediate} from './setimmediate';\nexport {setImmediate, clearImmediate};\n// DOM APIs, for completeness\nvar apply = Function.prototype.apply;\n\nexport function clearInterval(timeout) {\n  if (typeof timeout === 'number' && typeof global.clearInterval === 'function') {\n    global.clearInterval(timeout);\n  } else {\n    clearFn(timeout)\n  }\n}\nexport function clearTimeout(timeout) {\n  if (typeof timeout === 'number' && typeof global.clearTimeout === 'function') {\n    global.clearTimeout(timeout);\n  } else {\n    clearFn(timeout)\n  }\n}\nfunction clearFn(timeout) {\n  if (timeout && typeof timeout.close === 'function') {\n    timeout.close();\n  }\n}\nexport function setTimeout() {\n  return new Timeout(apply.call(global.setTimeout, window, arguments), clearTimeout);\n}\nexport function setInterval() {\n  return new Timeout(apply.call(global.setInterval, window, arguments), clearInterval);\n}\n\nfunction Timeout(id) {\n  this._id = id;\n}\nTimeout.prototype.unref = Timeout.prototype.ref = function() {};\nTimeout.prototype.close = function() {\n  clearFn(this._id);\n}\n\n// Does not start the time, just sets up the members needed.\nexport function enroll(item, msecs) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = msecs;\n}\n\nexport function unenroll(item) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = -1;\n}\nexport var _unrefActive = active;\nexport function active(item) {\n  clearTimeout(item._idleTimeoutId);\n\n  var msecs = item._idleTimeout;\n  if (msecs >= 0) {\n    item._idleTimeoutId = setTimeout(function onTimeout() {\n      if (item._onTimeout)\n        item._onTimeout();\n    }, msecs);\n  }\n}\n\nexport default {\n  setImmediate: setImmediate,\n  clearImmediate: clearImmediate,\n  setTimeout: setTimeout,\n  clearTimeout: clearTimeout,\n  setInterval: setInterval,\n  clearInterval: clearInterval,\n  active: active,\n  unenroll: unenroll,\n  _unrefActive: _unrefActive,\n  enroll: enroll\n};\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Box from './Box';\nimport { calculateGuidePositions, getGroupCoordinates, proximityListener } from './utils/helpers'\nimport { RESIZE_EDGES } from './utils/constants';\nimport styles from './styles.scss';\nimport { active } from 'rollup-plugin-node-builtins/src/es6/timers'\n\nclass AlignmentGuides extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.boundingBox = React.createRef();\n\t\tthis.state = {\n\t\t\tactive: '',\n\t\t\tactiveBoxes: [],\n\t\t\tboundingBox: null,\n\t\t\tboxes: {},\n\t\t\tdragging: false,\n\t\t\tgroupCoordinates: [],\n\t\t\tguides: {},\n\t\t\tguidesActive: false,\n\t\t\tmatch: {},\n\t\t\tresizing: false,\n\t\t\trotating: false\n\t\t};\n\t\tthis.getBoundingBoxElement = this.getBoundingBoxElement.bind(this);\n\t\tthis.selectBox = this.selectBox.bind(this);\n\t\tthis.unSelectBox = this.unSelectBox.bind(this);\n\t\tthis.dragStartHandler = this.dragStartHandler.bind(this);\n\t\tthis.dragHandler = this.dragHandler.bind(this);\n\t\tthis.dragEndHandler = this.dragEndHandler.bind(this);\n\t\tthis.resizeStartHandler = this.resizeStartHandler.bind(this);\n\t\tthis.resizeHandler = this.resizeHandler.bind(this);\n\t\tthis.resizeEndHandler = this.resizeEndHandler.bind(this);\n\t\tthis.rotateStartHandler = this.rotateStartHandler.bind(this);\n\t\tthis.rotateHandler = this.rotateHandler.bind(this);\n\t\tthis.rotateEndHandler = this.rotateEndHandler.bind(this);\n\t\tthis.keyUpHandler = this.keyUpHandler.bind(this);\n\t}\n\n\t// TODO: Remove duplicated code in componentDidMount() and componentDidUpdate() methods\n\tcomponentDidMount() {\n\t\t// Set the dimensions of the bounding box and the draggable boxes when the component mounts.\n\t\tif (this.boundingBox.current) {\n\t\t\tconst boundingBox = this.boundingBox.current.getBoundingClientRect().toJSON();\n\t\t\tconst boxes = {};\n\t\t\tconst guides = {};\n\n\t\t\t// Adding the guides for the bounding box to the guides object\n\t\t\tguides.boundingBox = {\n\t\t\t\tx: calculateGuidePositions(boundingBox, 'x').map(value => value - boundingBox.left),\n\t\t\t\ty: calculateGuidePositions(boundingBox, 'y').map(value => value - boundingBox.top)\n\t\t\t};\n\n\t\t\tthis.props.boxes.forEach((dimensions, index) => {\n\t\t\t\tboxes[`box${index}`] = dimensions;\n\t\t\t\tguides[`box${index}`] = {\n\t\t\t\t\tx: calculateGuidePositions(dimensions, 'x'),\n\t\t\t\t\ty: calculateGuidePositions(dimensions, 'y')\n\t\t\t\t};\n\t\t\t});\n\n\t\t\tdocument.addEventListener('click', this.unSelectBox);\n\n\t\t\tthis.setState({\n\t\t\t\tboundingBox,\n\t\t\t\tboxes,\n\t\t\t\tguides\n\t\t\t});\n\t\t}\n\t}\n\n\tcomponentWillUnmount() {\n\t\tdocument.removeEventListener('click', this.unSelectBox);\n\t}\n\n\tgetBoundingBoxElement() {\n\t\treturn this.boundingBox;\n\t}\n\n\tselectBox(e) {\n\t\tconst boundingBox = this.getBoundingBoxElement();\n\t\tconst boundingBoxPosition = boundingBox.current.getBoundingClientRect().toJSON();\n\t\tif (e.target.id.indexOf('box') >= 0) {\n\t\t\tconst boxDimensions = e.target.getBoundingClientRect().toJSON();\n\t\t\tconst data = {\n\t\t\t\tx: boxDimensions.x - boundingBoxPosition.x,\n\t\t\t\ty: boxDimensions.y - boundingBoxPosition.y,\n\t\t\t\tleft: boxDimensions.left - boundingBoxPosition.x,\n\t\t\t\ttop: boxDimensions.top - boundingBoxPosition.y,\n\t\t\t\twidth: boxDimensions.width,\n\t\t\t\theight: boxDimensions.height,\n\t\t\t\tnode: e.target,\n\t\t\t\tmetadata: this.state.boxes[e.target.id].metadata\n\t\t\t};\n\t\t\tif (e.shiftKey) {\n\t\t\t\tlet { activeBoxes, boxes } = this.state;\n\t\t\t\tif (activeBoxes.includes(e.target.id)) {\n\t\t\t\t\tactiveBoxes = activeBoxes.filter(activeBox => activeBox !== e.target.id);\n\t\t\t\t} else {\n\t\t\t\t\tactiveBoxes = [\n\t\t\t\t\t\t...activeBoxes,\n\t\t\t\t\t\te.target.id\n\t\t\t\t\t];\n\t\t\t\t}\n\t\t\t\tconst groupCoordinates = getGroupCoordinates(boxes, activeBoxes);\n\t\t\t\tthis.setState({\n\t\t\t\t\tactive: '',\n\t\t\t\t\tactiveBoxes,\n\t\t\t\t\tgroupCoordinates\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tthis.setState({\n\t\t\t\t\tactive: e.target.id,\n\t\t\t\t\tactiveBoxes: [\n\t\t\t\t\t\t...this.state.activeBoxes,\n\t\t\t\t\t\te.target.id\n\t\t\t\t\t]\n\t\t\t\t});\n\t\t\t}\n\t\t\tthis.props.onSelect && this.props.onSelect(e, data);\n\t\t} else if (e.target.parentNode.id.indexOf('box') >= 0) {\n\t\t\tconst boxDimensions = e.target.parentNode.getBoundingClientRect().toJSON();\n\t\t\tconst data = {\n\t\t\t\tx: boxDimensions.x - boundingBoxPosition.x,\n\t\t\t\ty: boxDimensions.y - boundingBoxPosition.y,\n\t\t\t\tleft: boxDimensions.left - boundingBoxPosition.x,\n\t\t\t\ttop: boxDimensions.top - boundingBoxPosition.y,\n\t\t\t\twidth: boxDimensions.width,\n\t\t\t\theight: boxDimensions.height,\n\t\t\t\tnode: e.target.parentNode,\n\t\t\t\tmetadata: this.state.boxes[e.target.parentNode.id].metadata\n\t\t\t};\n\t\t\tthis.setState({\n\t\t\t\tactive: e.target.parentNode.id\n\t\t\t});\n\t\t\tthis.props.onSelect && this.props.onSelect(e, data);\n\t\t}\n\t}\n\n\tunSelectBox(e) {\n\t\tif (e.target && e.target.id.indexOf('box') === -1 && e.target.parentNode.id.indexOf('box') === -1) {\n\t\t\tthis.setState({\n\t\t\t\tactive: '',\n\t\t\t\tactiveBoxes: []\n\t\t\t});\n\t\t\tthis.props.onUnselect && this.props.onUnselect(e);\n\t\t}\n\t}\n\n\tdragStartHandler(e, data) {\n\t\tthis.setState({\n\t\t\tactive: data.node.id,\n\t\t\tdragging: true\n\t\t});\n\t\tconst newData = Object.assign({}, data, {\n\t\t\tmetadata: this.state.boxes[data.node.id].metadata\n\t\t});\n\t\tthis.props.onDragStart && this.props.onDragStart(e, newData);\n\t}\n\n\tdragHandler(e, data) {\n\t\tif (this.state.dragging) {\n\t\t\tconst newData = Object.assign({}, data, {\n\t\t\t\tmetadata: this.state.boxes[this.state.active].metadata\n\t\t\t});\n\t\t\tthis.props.onDrag && this.props.onDrag(e, newData);\n\t\t}\n\n\t\tconst boxes = Object.assign({}, this.state.boxes, {\n\t\t\t[data.node.id]: Object.assign({}, this.state.boxes[data.node.id], {\n\t\t\t\tx: data.x,\n\t\t\t\ty: data.y,\n\t\t\t\tleft: data.left,\n\t\t\t\ttop: data.top,\n\t\t\t\twidth: data.width,\n\t\t\t\theight: data.height\n\t\t\t})\n\t\t});\n\t\tconst guides = Object.assign({}, this.state.guides, {\n\t\t\t[data.node.id]: Object.assign({}, this.state.guides[data.node.id], {\n\t\t\t\tx: calculateGuidePositions(boxes[data.node.id], 'x'),\n\t\t\t\ty: calculateGuidePositions(boxes[data.node.id], 'y')\n\t\t\t})\n\t\t});\n\n\t\tthis.setState({\n\t\t\tguidesActive: true,\n\t\t\tboxes,\n\t\t\tguides\n\t\t}, () => {\n\t\t\tif (this.props.snap) {\n\t\t\t\tconst match = proximityListener(this.state.active, this.state.guides);\n\t\t\t\tlet newActiveBoxLeft = this.state.boxes[this.state.active].left;\n\t\t\t\tlet newActiveBoxTop = this.state.boxes[this.state.active].top;\n\t\t\t\tfor (let axis in match) {\n\t\t\t\t\tconst { activeBoxGuides, matchedArray, proximity } = match[axis];\n\t\t\t\t\tconst activeBoxProximityIndex = proximity.activeBoxIndex;\n\t\t\t\t\tconst matchedBoxProximityIndex = proximity.matchedBoxIndex;\n\n\t\t\t\t\tif (axis === 'x') {\n\t\t\t\t\t\tif (activeBoxGuides[activeBoxProximityIndex] > matchedArray[matchedBoxProximityIndex]) {\n\t\t\t\t\t\t\tnewActiveBoxLeft = this.state.boxes[this.state.active].left - proximity.value;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tnewActiveBoxLeft = this.state.boxes[this.state.active].left + proximity.value;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (activeBoxGuides[activeBoxProximityIndex] > matchedArray[matchedBoxProximityIndex]) {\n\t\t\t\t\t\t\tnewActiveBoxTop = this.state.boxes[this.state.active].top - proximity.value;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tnewActiveBoxTop = this.state.boxes[this.state.active].top + proximity.value;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tconst boxes = Object.assign({}, this.state.boxes, {\n\t\t\t\t\t[this.state.active]: Object.assign({}, this.state.boxes[this.state.active], {\n\t\t\t\t\t\tleft: newActiveBoxLeft,\n\t\t\t\t\t\ttop: newActiveBoxTop\n\t\t\t\t\t})\n\t\t\t\t});\n\t\t\t\tconst guides = Object.assign({}, this.state.guides, {\n\t\t\t\t\t[this.state.active]: Object.assign({}, this.state.guides[this.state.active], {\n\t\t\t\t\t\tx: calculateGuidePositions(boxes[this.state.active], 'x'),\n\t\t\t\t\t\ty: calculateGuidePositions(boxes[this.state.active], 'y')\n\t\t\t\t\t})\n\t\t\t\t})\n\t\t\t\tthis.setState({\n\t\t\t\t\tboxes,\n\t\t\t\t\tguides,\n\t\t\t\t\tmatch\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\tdragEndHandler(e, data) {\n\t\tthis.setState({\n\t\t\tdragging: false,\n\t\t\tguidesActive: false\n\t\t});\n\t\tconst newData = Object.assign({}, data, {\n\t\t\tmetadata: this.state.boxes[this.state.active].metadata\n\t\t});\n\t\tthis.props.onDragEnd && this.props.onDragEnd(e, newData);\n\t}\n\n\tresizeStartHandler(e, data) {\n\t\tthis.setState({\n\t\t\tactive: data.node.id,\n\t\t\tresizing: true\n\t\t});\n\t\tconst newData = Object.assign({}, data, {\n\t\t\tmetadata: this.state.boxes[data.node.id].metadata\n\t\t});\n\t\tthis.props.onResizeStart && this.props.onResizeStart(e, newData);\n\t}\n\n\tresizeHandler(e, data) {\n\t\tif (this.state.resizing) {\n\t\t\tconst newData = Object.assign({}, data, {\n\t\t\t\tmetadata: this.state.boxes[this.state.active].metadata\n\t\t\t});\n\t\t\tthis.props.onResize && this.props.onResize(e, newData);\n\t\t}\n\n\t\tconst boxes = Object.assign({}, this.state.boxes, {\n\t\t\t[data.node.id]: Object.assign({}, this.state.boxes[data.node.id], {\n\t\t\t\tx: data.x,\n\t\t\t\ty: data.y,\n\t\t\t\tleft: data.left,\n\t\t\t\ttop: data.top,\n\t\t\t\twidth: data.width,\n\t\t\t\theight: data.height\n\t\t\t})\n\t\t});\n\t\tconst guides = Object.assign({}, this.state.guides, {\n\t\t\t[data.node.id]: Object.assign({}, this.state.guides[data.node.id], {\n\t\t\t\tx: calculateGuidePositions(boxes[data.node.id], 'x'),\n\t\t\t\ty: calculateGuidePositions(boxes[data.node.id], 'y')\n\t\t\t})\n\t\t});\n\n\t\tthis.setState({\n\t\t\tboxes,\n\t\t\tguides\n\t\t});\n\t}\n\n\tresizeEndHandler(e, data) {\n\t\tif (this.state.resizing) {\n\t\t\tconst newData = Object.assign({}, data, {\n\t\t\t\tmetadata: this.state.boxes[this.state.active].metadata\n\t\t\t});\n\t\t\tthis.props.onResizeEnd && this.props.onResizeEnd(e, newData);\n\t\t}\n\n\t\tthis.setState({\n\t\t\tresizing: false,\n\t\t\tguidesActive: false\n\t\t});\n\t}\n\n\trotateStartHandler(e, data) {\n\t\tthis.setState({\n\t\t\tactive: data.node.id,\n\t\t\trotating: true\n\t\t});\n\t\tthis.props.onRotateStart && this.props.onRotateStart(e, data);\n\t}\n\n\trotateHandler(e, data) {\n\t\tconst boxes = Object.assign({}, this.state.boxes, {\n\t\t\t[this.state.active]: Object.assign({}, this.state.boxes[this.state.active], {\n\t\t\t\t...this.state.boxes[this.state.active],\n\t\t\t\tx: data.x,\n\t\t\t\ty: data.y,\n\t\t\t\trotateAngle: data.rotateAngle\n\t\t\t})\n\t\t});\n\n\t\tthis.setState({\n\t\t\tboxes\n\t\t});\n\n\t\tthis.props.onRotate && this.props.onRotate(e, data);\n\t}\n\n\trotateEndHandler(e, data) {\n\t\tthis.props.onRotateEnd && this.props.onRotateEnd(e, data);\n\t}\n\n\tkeyUpHandler(e, data) {\n\t\tconst newData = Object.assign({}, data, {\n\t\t\tmetadata: this.state.boxes[data.node.id].metadata\n\t\t});\n\t\tthis.props.onKeyUp && this.props.onKeyUp(e, newData);\n\n\t\tconst boxes = Object.assign({}, this.state.boxes, {\n\t\t\t[data.node.id]: Object.assign({}, this.state.boxes[data.node.id], {\n\t\t\t\tx: data.x,\n\t\t\t\ty: data.y,\n\t\t\t\tleft: data.left,\n\t\t\t\ttop: data.top,\n\t\t\t\twidth: data.width,\n\t\t\t\theight: data.height\n\t\t\t})\n\t\t});\n\t\tconst guides = Object.assign({}, this.state.guides, {\n\t\t\t[data.node.id]: Object.assign({}, this.state.guides[data.node.id], {\n\t\t\t\tx: calculateGuidePositions(boxes[data.node.id], 'x'),\n\t\t\t\ty: calculateGuidePositions(boxes[data.node.id], 'y')\n\t\t\t})\n\t\t});\n\n\t\tthis.setState({\n\t\t\tboxes,\n\t\t\tguides,\n\t\t\tresizing: false,\n\t\t\tguidesActive: false\n\t\t});\n\t}\n\n\trender() {\n\t\tconst { active, boxes, activeBoxes, guides } = this.state;\n\t\tconst areMultipleBoxesSelected = activeBoxes.length > 1;\n\n\t\t// Create the draggable boxes from the position data\n\t\tconst draggableBoxes = Object.keys(boxes).map((box, index) => {\n\t\t\tconst position = boxes[box];\n\t\t\tconst id = box.id || `box${index}`;\n\t\t\tconst isSelected = (active === id || activeBoxes.includes(id));\n\n\t\t\treturn <Box\n\t\t\t\t{...this.props}\n\t\t\t\tareMultipleBoxesSelected={areMultipleBoxesSelected}\n\t\t\t\tboundingBox={this.state.boundingBox}\n\t\t\t\tdragging={this.state.dragging}\n\t\t\t\tgetBoundingBoxElement={this.getBoundingBoxElement}\n\t\t\t\tid={id}\n\t\t\t\tisSelected={isSelected}\n\t\t\t\tkey={id}\n\t\t\t\tonDragStart={this.dragStartHandler}\n\t\t\t\tonDrag={this.dragHandler}\n\t\t\t\tonDragEnd={this.dragEndHandler}\n\t\t\t\tonKeyUp={this.keyUpHandler}\n\t\t\t\tonResizeStart={this.resizeStartHandler}\n\t\t\t\tonResize={this.resizeHandler}\n\t\t\t\tonResizeEnd={this.resizeEndHandler}\n\t\t\t\tonRotateStart={this.rotateStartHandler}\n\t\t\t\tonRotate={this.rotateHandler}\n\t\t\t\tonRotateEnd={this.rotateEndHandler}\n\t\t\t\tposition={position}\n\t\t\t\tresizing={this.state.resizing}\n\t\t\t\trotating={this.state.rotating}\n\t\t\t\tselectBox={this.selectBox}\n\t\t\t/>;\n\t\t});\n\n\t\t// Create a guide(s) when the following conditions are met:\n\t\t// 1. A box aligns with another (top, center or bottom)\n\t\t// 2. An edge of a box touches any of the edges of another box\n\t\t// 3. A box aligns vertically or horizontally with the bounding box\n\t\t// TODO: Use a functional component to generate the guides for both axis instead of duplicating code.\n\t\tconst xAxisGuides = Object.keys(guides).reduce((result, box) => {\n\t\t\tconst guideClassNames = this.state.guidesActive ? `${styles.guide} ${styles.xAxis} ${styles.active}` : `${styles.guide} ${styles.xAxis}`;\n\t\t\tconst xAxisGuidesForCurrentBox = guides[box].x.map((position, index) => {\n\t\t\t\tif (\n\t\t\t\t\tthis.state.active &&\n\t\t\t\t\tthis.state.active === box &&\n\t\t\t\t\tthis.state.match &&\n\t\t\t\t\tthis.state.match.x &&\n\t\t\t\t\tthis.state.match.x.intersection &&\n\t\t\t\t\tthis.state.match.x.intersection === position\n\t\t\t\t) {\n\t\t\t\t\treturn <div key={`${position}-${index}`} className={guideClassNames} style={{ left: position }} />;\n\t\t\t\t} else {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn result.concat(xAxisGuidesForCurrentBox);\n\t\t}, []);\n\n\t\tconst yAxisGuides = Object.keys(guides).reduce((result, box) => {\n\t\t\tconst guideClassNames = this.state.guidesActive ? `${styles.guide} ${styles.yAxis} ${styles.active}` : `${styles.guide} ${styles.yAxis}`;\n\t\t\tconst yAxisGuidesForCurrentBox = guides[box].y.map((position, index) => {\n\t\t\t\tif (\n\t\t\t\t\tthis.state.active &&\n\t\t\t\t\tthis.state.active === box &&\n\t\t\t\t\tthis.state.match &&\n\t\t\t\t\tthis.state.match.y &&\n\t\t\t\t\tthis.state.match.y.intersection &&\n\t\t\t\t\tthis.state.match.y.intersection === position\n\t\t\t\t) {\n\t\t\t\t\treturn <div key={`${position}-${index}`} className={guideClassNames} style={{ top: position }} />\n\t\t\t\t} else {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn result.concat(yAxisGuidesForCurrentBox);\n\t\t}, []);\n\n\t\treturn <div ref={this.boundingBox} className={`${styles.boundingBox} ${this.props.className}`} style={this.props.style}>\n\t\t\t{draggableBoxes}\n\t\t\t{xAxisGuides}\n\t\t\t{yAxisGuides}\n\t\t\t{\n\t\t\t\tareMultipleBoxesSelected ?\n\t\t\t\t\tRESIZE_EDGES.map(handle => {\n\t\t\t\t\t\tconst className = `${styles.resizeEdges} ${styles[`resize-${handle}`]}`;\n\t\t\t\t\t\tconst style = {};\n\t\t\t\t\t\tif (handle === 'top') {\n\t\t\t\t\t\t\tstyle.top = `${this.state.groupCoordinates.y - 2}px`;\n\t\t\t\t\t\t\tstyle.left = `${this.state.groupCoordinates.x - 2}px`;\n\t\t\t\t\t\t\tstyle.width = `${this.state.groupCoordinates.width + 4}px`;\n\t\t\t\t\t\t} else if (handle === 'right') {\n\t\t\t\t\t\t\tstyle.top = `${this.state.groupCoordinates.y}px`;\n\t\t\t\t\t\t\tstyle.left = `${this.state.groupCoordinates.x + this.state.groupCoordinates.width}px`;\n\t\t\t\t\t\t\tstyle.height = `${this.state.groupCoordinates.height + 2}px`;\n\t\t\t\t\t\t} else if (handle === 'bottom') {\n\t\t\t\t\t\t\tstyle.top = `${this.state.groupCoordinates.y + this.state.groupCoordinates.height}px`;\n\t\t\t\t\t\t\tstyle.left = `${this.state.groupCoordinates.x - 2}px`;\n\t\t\t\t\t\t\tstyle.width = `${this.state.groupCoordinates.width + 2}px`;\n\t\t\t\t\t\t} else if (handle === 'left') {\n\t\t\t\t\t\t\tstyle.top = `${this.state.groupCoordinates.y}px`;\n\t\t\t\t\t\t\tstyle.left = `${this.state.groupCoordinates.x - 2}px`;\n\t\t\t\t\t\t\tstyle.height = `${this.state.groupCoordinates.height + 2}px`;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn <div\n\t\t\t\t\t\t\tkey={handle}\n\t\t\t\t\t\t\tclassName={className}\n\t\t\t\t\t\t\tstyle={style}\n\t\t\t\t\t\t\tonMouseDown={this.props.resize ? this.onResizeStart : null} // If this.props.resize is false then remove the mouseDown event handler for resize\n\t\t\t\t\t\t\tid={`resize-${handle}`}\n\t\t\t\t\t\t/>;\n\t\t\t\t\t}) :\n\t\t\t\t\tnull\n\t\t\t}\n\t\t</div>;\n\t}\n}\n\n// Typechecking props for AlignmentGuides component\nAlignmentGuides.propTypes = {\n\tboundToParent: PropTypes.bool,\n\tboxes: PropTypes.array.isRequired,\n\tboxStyle: PropTypes.object,\n\tclassName: PropTypes.string,\n\tdrag: PropTypes.bool,\n\tkeybindings: PropTypes.bool,\n\tonDragStart: PropTypes.func,\n\tonDrag: PropTypes.func,\n\tonDragEnd: PropTypes.func,\n\tonKeyUp: PropTypes.func,\n\tonResizeStart: PropTypes.func,\n\tonResize: PropTypes.func,\n\tonResizeEnd: PropTypes.func,\n\tonRotateStart: PropTypes.func,\n\tonRotate: PropTypes.func,\n\tonRotateEnd: PropTypes.func,\n\tonSelect: PropTypes.func,\n\tonUnselect: PropTypes.func,\n\tresize: PropTypes.bool,\n\trotate: PropTypes.bool,\n\tresolution: PropTypes.object,\n\tsnap: PropTypes.bool,\n\tstyle: PropTypes.object\n};\n\n// Default values for props\nAlignmentGuides.defaultProps = {\n\tboundToParent: true,\n\tboxes: [],\n\tdrag: true,\n\tresize: true,\n\trotate: true,\n\tsnap: true\n};\n\nexport default AlignmentGuides;","'use strict';\n// import React from 'react';\n// import ReactDOM from 'react-dom';\nimport AlignmentGuides from './AlignmentGuides';\n\nexport default AlignmentGuides;\n\n// ReactDOM.render(\n// \t<AlignmentGuides />,\n// \tdocument.getElementById('root')\n// );"],"names":["global","calculateGuidePositions","dimensions","axis","start","left","middle","parseInt","width","end","top","height","proximityListener","active","allGuides","xAxisGuidesForActiveBox","x","yAxisGuidesForActiveBox","y","xAxisAllGuides","getAllGuidesForGivenAxisExceptActiveBox","yAxisAllGuides","xAxisMatchedGuides","checkValueProximities","yAxisMatchedGuides","allMatchedGuides","proximity","activeBoxGuides","guidesForActiveBoxAlongGivenAxis","result","Object","keys","map","box","currentBoxGuidesAlongGivenAxis","filter","guides","undefined","activeBoxGuidesInOneAxis","allOtherGuidesInOneAxis","intersection","matchedArray","snapThreshold","index","length","index2","index3","diff","Math","abs","value","activeBoxIndex","matchedBoxIndex","calculateBoundariesForDrag","bounds","boundingBox","calculateBoundariesForResize","widthDifference","heightDifference","getOffsetCoordinates","node","offsetLeft","offsetTop","offsetWidth","offsetHeight","getLength","sqrt","topLeftToCenter","rotateAngle","cx","cy","centerToTopLeft","setWidthAndDeltaW","deltaW","minWidth","expectedWidth","setHeightAndDeltaH","deltaH","minHeight","expectedHeight","getNewStyle","type","rect","widthFlag","heightFlag","widthAndDeltaW","heightAndDeltaH","cos","sin","position","size","getAngle","x1","y1","x2","y2","dot","det","angle","atan2","PI","getNewCoordinates","tempX","tempY","cosine","sine","rotatedX","rotatedY","degToRadian","deg","getGroupCoordinates","allBoxes","activeBoxes","selectedBoxes","hasOwnProperty","includes","push","reduce","min","b","max","RESIZE_CORNERS","RESIZE_EDGES","ROTATE_HANDLES","Box","props","React","createRef","coordinates","selectBox","bind","onDragStart","shortcutHandler","keyDownHandler","throttle","e","onResizeStart","onRotateStart","getCoordinatesWrapperWidth","current","focus","drag","target","id","indexOf","stopPropagation","getBoundingBoxElement","startingPosition","getBoundingClientRect","toJSON","boundingBoxPosition","didDragHappen","data","deltaX","clientX","deltaY","clientY","onDrag","boundingBoxDimensions","boxWidth","boxHeight","currentPosition","boundToParent","onDragEnd","document","removeEventListener","addEventListener","shiftKey","ctrlKey","key","assign","onKeyUp","resize","startX","startY","startingDimensions","didResizeHappen","onResize","alpha","deltaL","beta","replace","tempPosition","onResizeEnd","rotate","center","startVector","startAngle","newCoordinates","onRotate","rotateVector","round","onRotateEnd","isSelected","areMultipleBoxesSelected","boxStyle","resolution","isNaN","xFactor","yFactor","boxClassNames","styles","selected","boxStyles","zIndex","transform","persist","handle","className","resizeCorners","rotateHandle","PureComponent","propTypes","PropTypes","bool","func","string","keybindings","object","isRequired","AlignmentGuides","state","boxes","dragging","groupCoordinates","guidesActive","match","resizing","rotating","unSelectBox","dragStartHandler","dragHandler","dragEndHandler","resizeStartHandler","resizeHandler","resizeEndHandler","rotateStartHandler","rotateHandler","rotateEndHandler","keyUpHandler","forEach","setState","boxDimensions","metadata","activeBox","onSelect","parentNode","onUnselect","newData","snap","newActiveBoxLeft","newActiveBoxTop","activeBoxProximityIndex","matchedBoxProximityIndex","draggableBoxes","xAxisGuides","guideClassNames","guide","xAxis","xAxisGuidesForCurrentBox","concat","yAxisGuides","yAxis","yAxisGuidesForCurrentBox","style","resizeEdges","Component","array","defaultProps"],"mappings":"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"}