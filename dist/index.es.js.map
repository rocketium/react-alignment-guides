{"version":3,"file":"index.es.js","sources":["../node_modules/lodash.throttle/index.js","../src/utils/helpers.js","../src/utils/constants.js","../node_modules/style-inject/dist/style-inject.es.js","../src/Box.js","../src/AlignmentGuides.js","../src/index.js"],"sourcesContent":["/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the `TypeError` message for \"Functions\" methods. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/** Used to match leading and trailing whitespace. */\nvar reTrim = /^\\s+|\\s+$/g;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        result = wait - timeSinceLastCall;\n\n    return maxing ? nativeMin(result, maxWait - timeSinceLastInvoke) : result;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\n/**\n * Creates a throttled function that only invokes `func` at most once per\n * every `wait` milliseconds. The throttled function comes with a `cancel`\n * method to cancel delayed `func` invocations and a `flush` method to\n * immediately invoke them. Provide `options` to indicate whether `func`\n * should be invoked on the leading and/or trailing edge of the `wait`\n * timeout. The `func` is invoked with the last arguments provided to the\n * throttled function. Subsequent calls to the throttled function return the\n * result of the last `func` invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the throttled function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.throttle` and `_.debounce`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to throttle.\n * @param {number} [wait=0] The number of milliseconds to throttle invocations to.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=true]\n *  Specify invoking on the leading edge of the timeout.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new throttled function.\n * @example\n *\n * // Avoid excessively updating the position while scrolling.\n * jQuery(window).on('scroll', _.throttle(updatePosition, 100));\n *\n * // Invoke `renewToken` when the click event is fired, but not more than once every 5 minutes.\n * var throttled = _.throttle(renewToken, 300000, { 'trailing': false });\n * jQuery(element).on('click', throttled);\n *\n * // Cancel the trailing throttled invocation.\n * jQuery(window).on('popstate', throttled.cancel);\n */\nfunction throttle(func, wait, options) {\n  var leading = true,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  if (isObject(options)) {\n    leading = 'leading' in options ? !!options.leading : leading;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n  return debounce(func, wait, {\n    'leading': leading,\n    'maxWait': wait,\n    'trailing': trailing\n  });\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && objectToString.call(value) == symbolTag);\n}\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = value.replace(reTrim, '');\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nmodule.exports = throttle;\n","export const calculateGuidePositions = (dimensions, axis) => {\n\tif (axis === 'x') {\n\t\tconst start = dimensions.left;\n\t\tconst middle = dimensions.left + parseInt(dimensions.width / 2, 10);\n\t\tconst end = dimensions.left + dimensions.width;\n\n\t\treturn [ start, middle, end ];\n\t} else {\n\t\tconst start = dimensions.top;\n\t\tconst middle = dimensions.top + parseInt(dimensions.height / 2, 10);\n\t\tconst end = dimensions.top + dimensions.height;\n\n\t\treturn [ start, middle, end ];\n\t}\n};\n\nexport const proximityListener = (active, allGuides) => {\n\tconst xAxisGuidesForActiveBox = allGuides[active].x;\n\tconst yAxisGuidesForActiveBox = allGuides[active].y;\n\n\tconst xAxisAllGuides = getAllGuidesForGivenAxisExceptActiveBox(allGuides, xAxisGuidesForActiveBox, 'x');\n\tconst yAxisAllGuides = getAllGuidesForGivenAxisExceptActiveBox(allGuides, yAxisGuidesForActiveBox, 'y');\n\tconst xAxisMatchedGuides = checkValueProximities(xAxisGuidesForActiveBox, xAxisAllGuides);\n\tconst yAxisMatchedGuides = checkValueProximities(yAxisGuidesForActiveBox, yAxisAllGuides);\n\n\tconst allMatchedGuides = {};\n\n\tif (xAxisMatchedGuides.proximity) {\n\t\tallMatchedGuides.x = {\n\t\t\t...xAxisMatchedGuides,\n\t\t\tactiveBoxGuides: xAxisGuidesForActiveBox\n\t\t};\n\t}\n\n\tif (yAxisMatchedGuides.proximity) {\n\t\tallMatchedGuides.y = {\n\t\t\t...yAxisMatchedGuides,\n\t\t\tactiveBoxGuides: yAxisGuidesForActiveBox,\n\t\t};\n\t}\n\n\treturn allMatchedGuides;\n};\n\nexport const getAllGuidesForGivenAxisExceptActiveBox = (allGuides, guidesForActiveBoxAlongGivenAxis, axis) => {\n\tconst result = Object.keys(allGuides).map(box => {\n\t\tif (allGuides && allGuides[box]) {\n\t\t\tconst currentBoxGuidesAlongGivenAxis = allGuides[box][axis];\n\t\t\tif (currentBoxGuidesAlongGivenAxis !== guidesForActiveBoxAlongGivenAxis) {\n\t\t\t\treturn currentBoxGuidesAlongGivenAxis;\n\t\t\t}\n\t\t}\n\t});\n\n\treturn result.filter(guides => guides !== undefined);\n};\n\nexport const checkValueProximities = (activeBoxGuidesInOneAxis, allOtherGuidesInOneAxis) => {\n\tlet proximity = null;\n\tlet intersection = null;\n\tlet matchedArray = [];\n\tconst snapThreshold = 5;\n\tfor (let index = 0; index < allOtherGuidesInOneAxis.length; index += 1) {\n\t\tlet index2 = 0;\n\t\tlet index3 = 0;\n\n\t\twhile (index2 < activeBoxGuidesInOneAxis.length && index3 < allOtherGuidesInOneAxis[index].length) {\n\t\t\tconst diff = Math.abs(activeBoxGuidesInOneAxis[index2] - allOtherGuidesInOneAxis[index][index3]);\n\t\t\tif (diff <= snapThreshold) {\n\t\t\t\tproximity = { value: diff, activeBoxIndex: index2, matchedBoxIndex: index3 };\n\t\t\t\tmatchedArray = allOtherGuidesInOneAxis[index];\n\t\t\t\tintersection = allOtherGuidesInOneAxis[index][index3];\n\t\t\t}\n\n\t\t\tif (activeBoxGuidesInOneAxis[index2] < allOtherGuidesInOneAxis[index][index3]) {\n\t\t\t\tindex2 += 1;\n\t\t\t} else {\n\t\t\t\tindex3 += 1;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn { matchedArray, proximity, intersection };\n};\n\nexport const calculateBoundariesForDrag = (left, top, width, height, bounds) => {\n\tconst boundingBox = { ...bounds };\n\tif (left >= 0 && left <= boundingBox.width - width && top >= 0 && top <= boundingBox.height - height) {\n\t\treturn {\n\t\t\tleft,\n\t\t\ttop\n\t\t};\n\t} else if (left >= 0 && left <= boundingBox.width - width) {\n\t\treturn {\n\t\t\tleft,\n\t\t\ttop: top < 0 ? 0 : (boundingBox.height - height)\n\t\t};\n\t} else if (top >= 0 && top <= boundingBox.height - height) {\n\t\treturn {\n\t\t\tleft: left < 0 ? 0 : (boundingBox.width - width),\n\t\t\ttop\n\t\t};\n\t} else {\n\t\treturn {\n\t\t\tleft: left < 0 ? 0 : (boundingBox.width - width),\n\t\t\ttop: top < 0 ? 0 : (boundingBox.height - height)\n\t\t};\n\t}\n};\n\n// Calculate boundaries for boxes given an output resolution\nexport const calculateBoundariesForResize = (left, top, width, height, bounds) => {\n\tconst boundingBox = { ...bounds };\n\tlet widthDifference = 0;\n\tlet heightDifference = 0;\n\tif (left >= 0 && left + width <= boundingBox.width && top >= 0 && top + height <= boundingBox.height) {\n\t\treturn {\n\t\t\tleft,\n\t\t\ttop,\n\t\t\twidth,\n\t\t\theight\n\t\t};\n\t} else if (left < 0 && top < 0) {\n\t\treturn {\n\t\t\tleft: 0,\n\t\t\ttop: 0,\n\t\t\twidth: width + left <= boundingBox.width ? width + left : boundingBox.width,\n\t\t\theight: height + top <= boundingBox.height ? height + top : boundingBox.height\n\t\t};\n\t} else if (left < 0) {\n\t\treturn {\n\t\t\tleft: 0,\n\t\t\ttop,\n\t\t\twidth: width + left <= boundingBox.width ? width + left : boundingBox.width,\n\t\t\theight: height + top <= boundingBox.height ? height : boundingBox.height - top\n\t\t};\n\t} else if (top < 0) {\n\t\treturn {\n\t\t\tleft,\n\t\t\ttop: 0,\n\t\t\twidth: width + left <= boundingBox.width ? width : boundingBox.width - left,\n\t\t\theight: height + top <= boundingBox.height ? height + top : boundingBox.height\n\t\t};\n\t} else if (left >= 0 && left + width <= boundingBox.width) {\n\t\theightDifference = (top + height) - boundingBox.height;\n\t\treturn {\n\t\t\tleft,\n\t\t\ttop: top < 0 ? 0 : top,\n\t\t\twidth,\n\t\t\theight: height - heightDifference\n\t\t};\n\t} else if (top >= 0 && top + height <= boundingBox.height) {\n\t\twidthDifference = (left + width) - boundingBox.width;\n\t\treturn {\n\t\t\tleft: left < 0 ? 0 : left,\n\t\t\ttop,\n\t\t\twidth: width - widthDifference,\n\t\t\theight\n\t\t};\n\t} else {\n\t\twidthDifference = (left + width) - boundingBox.width;\n\t\theightDifference = (top + height) - boundingBox.height;\n\t\treturn {\n\t\t\tleft: left < 0 ? 0 : left,\n\t\t\ttop: top < 0 ? 0 : top,\n\t\t\twidth: width - widthDifference,\n\t\t\theight: height - heightDifference\n\t\t};\n\t}\n};\n\nexport const getOffsetCoordinates = (node) => {\n\treturn {\n\t\tx: node.offsetLeft,\n\t\ty: node.offsetTop,\n\t\ttop: node.offsetTop,\n\t\tleft: node.offsetLeft,\n\t\twidth: node.offsetWidth,\n\t\theight: node.offsetHeight\n\t};\n};\n\nexport const getLength = (x, y) => Math.sqrt(x * x + y * y);\n\nexport const topLeftToCenter = ({ left, top, width, height, rotateAngle }) => ({\n\tcx: left + width / 2,\n\tcy: top + height / 2,\n\twidth,\n\theight,\n\trotateAngle\n});\n\nexport const centerToTopLeft = ({ cx, cy, width, height, rotateAngle }) => ({\n\ttop: cy - height / 2,\n\tleft: cx - width / 2,\n\twidth,\n\theight,\n\trotateAngle\n});\n\nconst setWidthAndDeltaW = (width, deltaW, minWidth) => {\n\tconst expectedWidth = width + deltaW\n\tif (expectedWidth > minWidth) {\n\t\twidth = expectedWidth\n\t} else {\n\t\tdeltaW = minWidth - width\n\t\twidth = minWidth\n\t}\n\treturn { width, deltaW }\n}\n\nconst setHeightAndDeltaH = (height, deltaH, minHeight) => {\n\tconst expectedHeight = height + deltaH\n\tif (expectedHeight > minHeight) {\n\t\theight = expectedHeight\n\t} else {\n\t\tdeltaH = minHeight - height\n\t\theight = minHeight\n\t}\n\treturn { height, deltaH }\n}\n\nexport const getNewStyle = (type, rect, deltaW, deltaH, minWidth, minHeight) => {\n\tlet { width, height, cx, cy, rotateAngle } = rect;\n\tconst widthFlag = width < 0 ? -1 : 1;\n\tconst heightFlag = height < 0 ? -1 : 1;\n\twidth = Math.abs(width)\n\theight = Math.abs(height)\n\tswitch (type) {\n\t\tcase 'tr': {\n\t\t\tdeltaH = -deltaH\n\t\t\tconst widthAndDeltaW = setWidthAndDeltaW(width, deltaW, minWidth)\n\t\t\twidth = widthAndDeltaW.width\n\t\t\tdeltaW = widthAndDeltaW.deltaW\n\t\t\tconst heightAndDeltaH = setHeightAndDeltaH(height, deltaH, minHeight)\n\t\t\theight = heightAndDeltaH.height\n\t\t\tdeltaH = heightAndDeltaH.deltaH\n\t\t\tcx += deltaW / 2 * cos(rotateAngle) + deltaH / 2 * sin(rotateAngle)\n\t\t\tcy += deltaW / 2 * sin(rotateAngle) - deltaH / 2 * cos(rotateAngle)\n\t\t\tbreak\n\t\t}\n\t\tcase 'br': {\n\t\t\tconst widthAndDeltaW = setWidthAndDeltaW(width, deltaW, minWidth)\n\t\t\twidth = widthAndDeltaW.width\n\t\t\tdeltaW = widthAndDeltaW.deltaW\n\t\t\tconst heightAndDeltaH = setHeightAndDeltaH(height, deltaH, minHeight)\n\t\t\theight = heightAndDeltaH.height\n\t\t\tdeltaH = heightAndDeltaH.deltaH\n\t\t\tcx += deltaW / 2 * cos(rotateAngle) - deltaH / 2 * sin(rotateAngle)\n\t\t\tcy += deltaW / 2 * sin(rotateAngle) + deltaH / 2 * cos(rotateAngle)\n\t\t\tbreak\n\t\t}\n\t\tcase 'bl': {\n\t\t\tdeltaW = -deltaW\n\t\t\tconst widthAndDeltaW = setWidthAndDeltaW(width, deltaW, minWidth)\n\t\t\twidth = widthAndDeltaW.width\n\t\t\tdeltaW = widthAndDeltaW.deltaW\n\t\t\tconst heightAndDeltaH = setHeightAndDeltaH(height, deltaH, minHeight)\n\t\t\theight = heightAndDeltaH.height\n\t\t\tdeltaH = heightAndDeltaH.deltaH\n\t\t\tcx -= deltaW / 2 * cos(rotateAngle) + deltaH / 2 * sin(rotateAngle)\n\t\t\tcy -= deltaW / 2 * sin(rotateAngle) - deltaH / 2 * cos(rotateAngle)\n\t\t\tbreak\n\t\t}\n\t\tcase 'tl': {\n\t\t\tdeltaW = -deltaW\n\t\t\tdeltaH = -deltaH\n\t\t\tconst widthAndDeltaW = setWidthAndDeltaW(width, deltaW, minWidth)\n\t\t\twidth = widthAndDeltaW.width\n\t\t\tdeltaW = widthAndDeltaW.deltaW\n\t\t\tconst heightAndDeltaH = setHeightAndDeltaH(height, deltaH, minHeight)\n\t\t\theight = heightAndDeltaH.height\n\t\t\tdeltaH = heightAndDeltaH.deltaH\n\t\t\tcx -= deltaW / 2 * cos(rotateAngle) - deltaH / 2 * sin(rotateAngle)\n\t\t\tcy -= deltaW / 2 * sin(rotateAngle) + deltaH / 2 * cos(rotateAngle)\n\t\t\tbreak\n\t\t}\n\t\tcase 'ct': {\n\t\t\tdeltaW = 0;\n\t\t\tdeltaH = -deltaH;\n\t\t\tconst widthAndDeltaW = setWidthAndDeltaW(width, deltaW, minWidth)\n\t\t\twidth = widthAndDeltaW.width\n\t\t\tdeltaW = widthAndDeltaW.deltaW\n\t\t\tconst heightAndDeltaH = setHeightAndDeltaH(height, deltaH, minHeight)\n\t\t\theight = heightAndDeltaH.height\n\t\t\tdeltaH = heightAndDeltaH.deltaH\n\t\t\tcx -= - deltaH / 2 * sin(rotateAngle)\n\t\t\tcy -= + deltaH / 2 * cos(rotateAngle)\n\t\t\tbreak\n\t\t}\n\t\tcase 'cb': {\n\t\t\tdeltaW = 0;\n\t\t\tconst widthAndDeltaW = setWidthAndDeltaW(width, deltaW, minWidth)\n\t\t\twidth = widthAndDeltaW.width\n\t\t\tdeltaW = widthAndDeltaW.deltaW\n\t\t\tconst heightAndDeltaH = setHeightAndDeltaH(height, deltaH, minHeight)\n\t\t\theight = heightAndDeltaH.height\n\t\t\tdeltaH = heightAndDeltaH.deltaH\n\t\t\tcx -= deltaH / 2 * sin(rotateAngle)\n\t\t\tcy -= - deltaH / 2 * cos(rotateAngle)\n\t\t\tbreak\n\t\t}\n\t\tcase 'cl': {\n\t\t\tdeltaH = 0;\n\t\t\tdeltaW = -deltaW;\n\t\t\tconst widthAndDeltaW = setWidthAndDeltaW(width, deltaW, minWidth)\n\t\t\twidth = widthAndDeltaW.width\n\t\t\tdeltaW = widthAndDeltaW.deltaW\n\t\t\tconst heightAndDeltaH = setHeightAndDeltaH(height, deltaH, minHeight)\n\t\t\theight = heightAndDeltaH.height\n\t\t\tdeltaH = heightAndDeltaH.deltaH\n\t\t\tcx -= deltaW / 2 * cos(rotateAngle) - deltaH / 2 * sin(rotateAngle)\n\t\t\tcy -= deltaW / 2 * sin(rotateAngle) + deltaH / 2 * cos(rotateAngle)\n\t\t\tbreak\n\t\t}\n\t\tcase 'cr': {\n\t\t\tdeltaH = 0;\n\t\t\tconst widthAndDeltaW = setWidthAndDeltaW(width, deltaW, minWidth)\n\t\t\twidth = widthAndDeltaW.width\n\t\t\tdeltaW = widthAndDeltaW.deltaW\n\t\t\tconst heightAndDeltaH = setHeightAndDeltaH(height, deltaH, minHeight)\n\t\t\theight = heightAndDeltaH.height\n\t\t\tdeltaH = heightAndDeltaH.deltaH\n\t\t\tcx += deltaW / 2 * cos(rotateAngle)\n\t\t\tcy += deltaW / 2 * sin(rotateAngle)\n\t\t\tbreak\n\t\t}\n\t}\n\n\treturn {\n\t\tposition: {\n\t\t\tcx,\n\t\t\tcy\n\t\t},\n\t\tsize: {\n\t\t\twidth: width * widthFlag,\n\t\t\theight: height * heightFlag\n\t\t}\n\t}\n}\n\n// Rotate helpers\nexport const getAngle = ({ x: x1, y: y1 }, { x: x2, y: y2 }) => {\n\tconst dot = x1 * x2 + y1 * y2;\n\tconst det = x1 * y2 - y1 * x2;\n\tconst angle = Math.atan2(det, dot) / Math.PI * 180;\n\treturn (angle + 360) % 360;\n};\n\nexport const getNewCoordinates = (rect) => {\n\tconst { x, y, width, height, rotateAngle, node } = rect;\n\tconst cx = x + (width / 2);\n\tconst cy = y + (height / 2);\n\n\tconst tempX = x - cx;\n\tconst tempY = y - cy;\n\tconst cosine = cos(rotateAngle);\n\tconst sine = sin(rotateAngle);\n\n\tconst rotatedX = cx + (tempX * cosine - tempY * sine);\n\tconst rotatedY = cy + (tempX * sine + tempY * cosine);\n\n\treturn { x: rotatedX, y: rotatedY, top: rotatedX, left: rotatedY, width, height, rotateAngle, node };\n};\n\nexport const degToRadian = (deg) => deg * Math.PI / 180;\nconst cos = (deg) => Math.cos(degToRadian(deg));\nconst sin = (deg) => Math.sin(degToRadian(deg));\n\n// Multiple selection helpers\nexport const getMultipleSelectionCoordinates = (allBoxes, activeBoxes) => {\n\tlet selectedBoxes = [];\n\tfor (let box in allBoxes) {\n\t\tif (allBoxes.hasOwnProperty(box) && activeBoxes.includes(box)) {\n\t\t\tselectedBoxes.push(allBoxes[box]);\n\t\t}\n\t}\n\tif (selectedBoxes.length === 0) {\n\t\treturn {\n\t\t\tx: 0,\n\t\t\ty: 0,\n\t\t\ttop: 0,\n\t\t\tleft: 0,\n\t\t\twidth: 0,\n\t\t\theight: 0\n\t\t};\n\t}\n\n\n\tconst x = selectedBoxes.reduce((min, b) => b.x < min ? b.x : min, selectedBoxes[0].x);\n\tconst y = selectedBoxes.reduce((min, b) => b.y < min ? b.y : min, selectedBoxes[0].y);\n\tconst width = selectedBoxes.reduce((max, b) => b.x + b.width > max ? b.x + b.width : max, (selectedBoxes[0].x + selectedBoxes[0].width)) - x;\n\tconst height = selectedBoxes.reduce((max, b) => b.y + b.height > max ? b.y + b.height : max, (selectedBoxes[0].y + selectedBoxes[0].height)) - y;\n\n\treturn { x, y, top: y, left: x, width, height };\n};\n\nexport const getGroupCoordinates = (allBoxes, groupedBoxes) => {\n\tlet selectedBoxes = [];\n\tfor (let box in allBoxes) {\n\t\tif (allBoxes.hasOwnProperty(box) && groupedBoxes.includes(allBoxes?.[box]?.metadata?.captionIndex)) {\n\t\t\tselectedBoxes.push(allBoxes[box]);\n\t\t}\n\t}\n\tif (selectedBoxes.length === 0) {\n\t\treturn {\n\t\t\tx: 0,\n\t\t\ty: 0,\n\t\t\ttop: 0,\n\t\t\tleft: 0,\n\t\t\twidth: 0,\n\t\t\theight: 0\n\t\t};\n\t}\n\n\n\tconst x = selectedBoxes.reduce((min, b) => b.x < min ? b.x : min, selectedBoxes[0].x);\n\tconst y = selectedBoxes.reduce((min, b) => b.y < min ? b.y : min, selectedBoxes[0].y);\n\tconst width = selectedBoxes.reduce((max, b) => b.x + b.width > max ? b.x + b.width : max, (selectedBoxes[0].x + selectedBoxes[0].width)) - x;\n\tconst height = selectedBoxes.reduce((max, b) => b.y + b.height > max ? b.y + b.height : max, (selectedBoxes[0].y + selectedBoxes[0].height)) - y;\n\n\treturn { x, y, top: y, left: x, width, height };\n};\nexport const getBoxMetadata = () => {};\n\nconst getResizeSVGCursor = (angle) => {\n\treturn `data:image/svg+xml;utf8,<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"32px\" height=\"32px\" viewBox=\"0 0 32 32\" ><path d=\"M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z\" stroke-linejoin=\"round\" stroke-width=\"1.2\" fill=\"black\" stroke=\"white\" style=\"transform:rotate(${angle}deg);transform-origin: 16px 16px\"></path></svg>`;\n}\n\nexport const getResizeCursorCSS = (handle, degree = 0) => {\n\tlet angle = degree;\n\n\tif (handle === 'cr' || handle === 'cl') {\n\t\tangle += 90;\n\t} else if (handle === 'tr' || handle === 'bl') {\n\t\tangle += 45;\n\t} else if (handle === 'br' || handle === 'tl') {\n\t\tangle -= 45;\n\t}\n\n\tconst cursor = getResizeSVGCursor(angle);\n\n\treturn `url('${cursor}') 16 16, auto`;\n}\nexport const checkGroupChildElementsLocked = (captions) => {\n\tlet isLocked = true;\n\tcaptions?.forEach(caption => {\n\t\tif (!caption.isLayerLocked) {\n\t\t\tisLocked = false;\n\t\t\treturn isLocked;\n\t\t}\n\t});\n\treturn isLocked;\n}","// Key map for changing the position and size of draggable boxes\n// Key map follows the Mousetrap syntax: https://craig.is/killing/mice\nexport const KEY_MAP = {\n\tMOVE_LEFT_1_PX: 'left',\n\tMOVE_RIGHT_1_PX: 'right',\n\tMOVE_UP_1_PX: 'up',\n\tMOVE_DOWN_1_PX: 'down',\n\tMOVE_LEFT_10_PX: 'shift+left',\n\tMOVE_RIGHT_10_PX: 'shift+right',\n\tMOVE_UP_10_PX: 'shift+up',\n\tMOVE_DOWN_10_PX: 'shift+down',\n}\n\n// Positions for resize handles\nexport const RESIZE_CORNERS = ['tr', 'tl', 'br', 'bl', 'ct', 'cl', 'cb', 'cr']\nexport const RESIZE_CORNERS_FOR_NO_HEIGHT = ['tr', 'tl']\nexport const RESIZE_CORNERS_FOR_NO_WIDTH = ['tl', 'bl']\nexport const RESIZE_SIDES = ['ct', 'cl', 'cb', 'cr']\n\n// Positions for rotate handles\nexport const ROTATE_HANDLES = ['tr', 'tl', 'br', 'bl']\n\nexport const GROUP_BOX_PREFIX = 'box-ms-'\n","function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport throttle from 'lodash.throttle';\nimport {\n\tcalculateBoundariesForDrag,\n\tcalculateBoundariesForResize,\n\tdegToRadian,\n\tgetAngle,\n\ttopLeftToCenter,\n\tgetLength,\n\tgetNewCoordinates,\n\tgetNewStyle,\n\tgetOffsetCoordinates,\n\tcenterToTopLeft,\n\tgetResizeCursorCSS,\n} from './utils/helpers';\nimport { RESIZE_CORNERS, RESIZE_CORNERS_FOR_NO_HEIGHT, GROUP_BOX_PREFIX, RESIZE_CORNERS_FOR_NO_WIDTH, RESIZE_SIDES, ROTATE_HANDLES } from './utils/constants';\nimport styles from './styles.scss';\nconst DRAG_THRESHOLD = 4;\nconst DEFAULT_SIZE = 10;\nconst DIMENSION_ZERO_OFFSET = -12.5;\nconst PREVENT_DEFAULT_KEYS = ['ArrowRight', 'ArrowLeft', 'ArrowUp', 'ArrowDown'];\n\nclass Box extends Component{\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.box = React.createRef();\n\t\tthis.coordinates = React.createRef();\n\t\tthis.height = React.createRef();\n\t\tthis.callSelectBox = false;\n\t\tthis.didDragHappen = false;\n\t\tthis.didResizeHappen = false;\n\t\tthis.selectBox = this.selectBox.bind(this);\n\t\tthis.unHoverBox = this.unHoverBox.bind(this);\n\t\tthis.hoverBox = this.hoverBox.bind(this);\n\t\tthis.onDragStart = this.onDragStart.bind(this);\n\t\tthis.shortcutHandler = this.shortcutHandler.bind(this);\n\t\tthis.onShortcutKeyUp = this.onShortcutKeyUp.bind(this);\n\t\tthis.keyDownHandler = throttle(e => {\n\t\t\tthis.shortcutHandler(e);\n\t\t}, 300);\n\t\tthis.onResizeStart = this.onResizeStart.bind(this);\n\t\tthis.onRotateStart = this.onRotateStart.bind(this);\n\t\tthis.getCoordinatesWrapperWidth = this.getCoordinatesWrapperWidth.bind(this);\n\t\tthis.handleDoubleClick = this.handleDoubleClick.bind(this);\n\t\tthis.endCropMode = this.endCropMode.bind(this);\n\t\tthis.dragOverBox = this.dragOverBox.bind(this);\n\t\tthis.unDragOverBox = this.unDragOverBox.bind(this);\n\t\tthis.onDropElementBox = this.onDropElementBox.bind(this);\n\t\tthis.filterControls = this.filterControls.bind(this);\n\t\tthis.state = {\n\t\t\tcallKeyEnd: false\n\t\t};\n\t}\n\n\tendCropMode( data ) {\n\t\tconst {position, metadata} = this.props;\n\t\tdata.newBoxData = {\n\t\t\tx: position.left + data.boxTranslateX,\n\t\t\ty: position.top + data.boxTranslateY,\n\t\t\ttop: position.top + data.boxTranslateY,\n\t\t\tleft: position.left + data.boxTranslateX,\n\t\t\twidth: position.width + data.boxDeltaWidth,\n\t\t\theight: position.height + data.boxDeltaHeight,\n\t\t\tnode: this.box.current,\n\t\t\tmetadata: metadata,\n\t\t\tdeltaX: data.boxTranslateX, //currentPosition.left - startingPosition.left,\n\t\t\tdeltaY: data.boxTranslateY, // currentPosition.top - startingPosition.top\t\t\t\t\t\t\n\t\t}\n\t\tthis.props.updateBoxAfterCrop(data);\n\t}\n\n\thandleDoubleClick() {\n\n\t\tif (this.props.dragDisabled) {\n\t\t\tthis.props.cropDisabledCallback();\n\t\t} else {\n\t\t\tthis.props.onDoubleClickElement(this.props.identifier);\t\t\t\n\t\t}\n\t};\n\n\tselectBox(e) {\n\t\t// To make sure AlignmentGuides' selectBox method is not called at the end of drag or resize.\n\t\tif (this.callSelectBox && e.currentTarget.hasAttribute('identifier') || ( this.callSelectBox && e.target.id.indexOf('box-ms') >= 0)) {\n\t\t\tthis.props.selectBox(e);\n\t\t}\n\t\tif (this.box && this.box.current) {\n\t\t\tthis.box.current.focus();\n\t\t}\n\t}\n\n\thoverBox(e) {\n\t\tif (this.props.cropActiveForElement !== undefined)\n\t\t\treturn;\n\t\tif (e.currentTarget.hasAttribute('identifier'))\n\t\t\te.currentTarget.classList.add(this.props.toggleHover);\n\t}\n\n\tunHoverBox(e) {\n\t\te.currentTarget.classList.remove(this.props.toggleHover);\n\t}\n\n\tdragOverBox(e) {\n\t\tif (this.props.cropActiveForElement !== undefined)\n\t\t\treturn;\n\n\t\tif (e.currentTarget.hasAttribute('identifier'))\n\t\t\te.currentTarget.classList.add(this.props.dragToggleHoverBgStyle);\n\t}\n\n\tonDropElementBox() {\n\t\tif (this.props.onDragOver) {\n\t\t\tthis.props.onDragOver(Number.isInteger(this.props.metadata?.captionIndex) ?  this.props.metadata?.captionIndex : null);\n\t\t}\n\t}\n\n\tunDragOverBox(e) {\n\t\te.currentTarget.classList.remove(this.props.dragToggleHoverBgStyle);\n\t}\n\n\tonDragStart(e) {\n\t\tif ((this.props.position.drag || this.props.position.drag === undefined) && e.target.id.indexOf('box') !== -1) { // Allow drag only if drag property for the box is true or undefined\n\t\t\te.stopPropagation();\n\t\t\tconst target = this.box.current;\n\t\t\tconst boundingBox = this.props.getBoundingBoxElement();\n\t\t\tconst { position } = this.props;\n\t\t\tlet startingPosition = position.rotateAngle === 0 ? target.getBoundingClientRect().toJSON() : getOffsetCoordinates(target);\n\t\t\tconst boundingBoxPosition = boundingBox.current.getBoundingClientRect().toJSON();\n\n\t\t\tlet data = {\n\t\t\t\tx: startingPosition.x - boundingBoxPosition.x,\n\t\t\t\ty: startingPosition.y - boundingBoxPosition.y,\n\t\t\t\ttop: startingPosition.y - boundingBoxPosition.y,\n\t\t\t\tleft: startingPosition.x - boundingBoxPosition.x,\n\t\t\t\twidth: startingPosition.width,\n\t\t\t\theight: startingPosition.height,\n\t\t\t\tnode: target,\n\t\t\t\trotateAngle: position.rotateAngle\n\t\t\t};\n\t\t\tif (position.rotateAngle !== 0) {\n\t\t\t\tdata = {\n\t\t\t\t\tx: startingPosition.x,\n\t\t\t\t\ty: startingPosition.y,\n\t\t\t\t\ttop: startingPosition.y,\n\t\t\t\t\tleft: startingPosition.x,\n\t\t\t\t\twidth: startingPosition.width,\n\t\t\t\t\theight: startingPosition.height,\n\t\t\t\t\tnode: target, \n\t\t\t\t\trotateAngle: position.rotateAngle\n\t\t\t\t};\n\t\t\t}\n\t\t\tthis.didDragHappen = false;\n\n\t\t\t// if a box type is passed (ex: group) send it back to the parent so all boxes in the group can be updated.\n\t\t\tif (this.props.position.type) {\n\t\t\t\tdata.type = this.props.position.type;\n\t\t\t}\n\t\t\tthis.props.onDragStart && this.props.onDragStart(e, data);\n\n\t\t\t// Update the starting position\n\t\t\tstartingPosition = Object.assign({}, data);\n\n\t\t\tconst deltaX = e.clientX - target.offsetLeft;\n\t\t\tconst deltaY = e.clientY - target.offsetTop;\n\t\t\tthis.callSelectBox = true;\n\n\t\t\tconst onDrag = (e) => {\n\t\t\t\te.stopPropagation();\n\t\t\t\t!this.props.didDragOrResizeHappen && this.props.setDragOrResizeState && this.props.setDragOrResizeState(true);\n\t\t\t\tconst boundingBox = this.props.getBoundingBoxElement();\n\t\t\t\tif (!boundingBox.current) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tconst boundingBoxDimensions = boundingBox.current.getBoundingClientRect().toJSON();\n\t\t\t\tconst boxWidth = this.props.position.width;\n\t\t\t\tconst boxHeight = this.props.position.height;\n\t\t\t\tconst left = e.clientX - deltaX;\n\t\t\t\tconst top = e.clientY - deltaY;\n\t\t\t\tlet currentPosition = this.props.boundToParent ?\n\t\t\t\t\tcalculateBoundariesForDrag(left, top, boxWidth, boxHeight, boundingBoxDimensions) :\n\t\t\t\t\t{\n\t\t\t\t\t\tleft,\n\t\t\t\t\t\ttop,\n\t\t\t\t\t\twidth: this.props.position.width,\n\t\t\t\t\t\theight: this.props.position.height,\n\t\t\t\t\t\tx: left,\n\t\t\t\t\t\ty: top,\n\t\t\t\t\t\tnode: this.box.current\n\t\t\t\t\t};\n\t\t\t\tdata = {\n\t\t\t\t\tx: currentPosition.left,\n\t\t\t\t\ty: currentPosition.top,\n\t\t\t\t\ttop: currentPosition.top,\n\t\t\t\t\tleft: currentPosition.left,\n\t\t\t\t\twidth: this.props.position.width,\n\t\t\t\t\theight: this.props.position.height,\n\t\t\t\t\tnode: this.box.current,\n\t\t\t\t\tdeltaX: currentPosition.left - startingPosition.left,\n\t\t\t\t\tdeltaY: currentPosition.top - startingPosition.top,\n\t\t\t\t\trotateAngle: position.rotateAngle\n\n\t\t\t\t};\n\t\t\t\tif (this.props.position.type) {\n\t\t\t\t\tdata.type = this.props.position.type;\n\t\t\t\t}\n\t\t\t\tif ((data.deltaX * data.deltaX + data.deltaY * data.deltaY) > DRAG_THRESHOLD) {\n\t\t\t\t\tthis.didDragHappen = true;\n\t\t\t\t\tif (this.props.dragDisabled !== true) {\n\t\t\t\t\t\tthis.props.onDrag && this.props.onDrag(e, data);\n\t\t\t\t\t} else if (typeof this.props.dragDisabledCallback === 'function') {\n\t\t\t\t\t\tthis.props.dragDisabledCallback();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tconst onDragEnd = (e) => {\n\t\t\t\tdata.rotateAngle = position.rotateAngle ;\n\t\t\t\tif (this.didDragHappen) {\n\t\t\t\t\tthis.props.didDragOrResizeHappen && this.props.setDragOrResizeState && this.props.setDragOrResizeState(false);\n\t\t\t\t\tthis.callSelectBox = false;\n\t\t\t\t\tif (this.props.dragDisabled !== true) {\n\t\t\t\t\t\tthis.props.onDragEnd && this.props.onDragEnd(e, data);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tdocument.removeEventListener('mousemove', onDrag);\n\t\t\t\tdocument.removeEventListener('mouseup', onDragEnd);\n\t\t\t};\n\n\t\t\tdocument.addEventListener('mousemove', onDrag);\n\t\t\tdocument.addEventListener('mouseup', onDragEnd);\n\t\t}\n\t}\n\n\tshortcutHandler(e) {\n\t\tif (this.props.preventShortcutEvents || !PREVENT_DEFAULT_KEYS.includes(e.key)) {\n\t\t\treturn;\n\t\t}\n\t\tconst { areMultipleBoxesSelected } = this.props;\n\t\tif (\n\t\t\tthis.props.isSelected && \n\t\t\t(\n\t\t\t\t!areMultipleBoxesSelected || \n\t\t\t\t(\n\t\t\t\t\tthis.props.position && \n\t\t\t\t\tthis.props.position.type === 'group'\n\t\t\t\t)\n\t\t\t) \n\t\t) {  // Only Selected boxes will move on arrow keys\n\t\t\tif (PREVENT_DEFAULT_KEYS.includes(e.key)) {\n\t\t\t\te.preventDefault();\n\t\t\t}\n\t\t\tconst { position } = this.props;\n\n\t\t\tlet DELTA = e.shiftKey ? 10 : 1;\n\n\t\t\tif ((e.ctrlKey || e.metaKey) && position?.isWidthZero && (e.key === 'ArrowRight' || e.key === 'ArrowLeft')) {\n\t\t\t\tDELTA = 0;\n\t\t\t} else if ((e.ctrlKey || e.metaKey) && position?.isHeightZero && (e.key === 'ArrowBottom' || e.key === 'ArrowTop')) {\n\t\t\t\tDELTA = 0;\n\t\t\t}\n\n\t\t\tlet newValues = {};\n\t\t\tlet changedValues = {};\n\n\t\t\tif (e.key === 'ArrowRight') {\n\t\t\t\tif (!this.state.callKeyEnd) {\n\t\t\t\t\tthis.setState({ callKeyEnd: true });\n\t\t\t\t}\n\t\t\t\tnewValues = e.ctrlKey || e.metaKey ? {\n\t\t\t\t\twidth: position.width + DELTA,\n\t\t\t\t\tmovingSides: ['bottom', 'right'], \n\t\t\t\t} : {\n\t\t\t\t\tleft: position.left + DELTA,\n\t\t\t\t\tx: position.x + DELTA\n\t\t\t\t}\n\t\t\t\tchangedValues = e.ctrlKey || e.metaKey ? {\n\t\t\t\t\twidth: DELTA\n\t\t\t\t} : {\n\t\t\t\t\tleft: DELTA,\n\t\t\t\t\tx: DELTA\n\t\t\t\t}\t\t\t\n\t\t\t} else if (e.key === 'ArrowLeft') {\n\t\t\t\tif (!this.state.callKeyEnd) {\n\t\t\t\t\tthis.setState({ callKeyEnd: true });\n\t\t\t\t}\n\t\t\t\tnewValues = e.ctrlKey || e.metaKey ? {\n\t\t\t\t\twidth: position.width - DELTA,\n\t\t\t\t\tmovingSides: ['bottom', 'right'], \n\t\t\t\t} :  {\n\t\t\t\t\tleft: position.left - DELTA,\n\t\t\t\t\tx: position.x - DELTA\n\t\t\t\t};\n\t\t\t\tchangedValues = e.ctrlKey || e.metaKey ? {\n\t\t\t\t\twidth: 0 - DELTA\n\t\t\t\t} :  {\n\t\t\t\t\tleft: 0 - DELTA,\n\t\t\t\t\tx: 0 - DELTA\n\t\t\t\t};\n\t\t\t} else if (e.key === 'ArrowUp') {\n\t\t\t\tif (!this.state.callKeyEnd) {\n\t\t\t\t\tthis.setState({ callKeyEnd: true });\n\t\t\t\t}\n\t\t\t\tnewValues = e.ctrlKey || e.metaKey ? {\n\t\t\t\t\theight: position.height - DELTA,\n\t\t\t\t\tmovingSides: ['bottom', 'right'], \n\t\t\t\t} : {\n\t\t\t\t\ttop: position.top - DELTA,\n\t\t\t\t\ty: position.y - DELTA\n\t\t\t\t};\n\t\t\t\tchangedValues = e.ctrlKey || e.metaKey ? {\n\t\t\t\t\theight: 0 - DELTA\n\t\t\t\t} : {\n\t\t\t\t\ttop: 0 - DELTA,\n\t\t\t\t\ty: 0 - DELTA\n\t\t\t\t};\n\t\t\t}  else if (e.key === 'ArrowDown') {\n\t\t\t\tif (!this.state.callKeyEnd) {\n\t\t\t\t\tthis.setState({ callKeyEnd: true });\n\t\t\t\t}\n\t\t\t\tnewValues = e.ctrlKey || e.metaKey ? {\n\t\t\t\t\theight: position.height + DELTA,\n\t\t\t\t\tmovingSides: ['bottom', 'right'], \n\t\t\t\t} : {\n\t\t\t\t\ttop: position.top + DELTA,\n\t\t\t\t\ty: position.y + DELTA\n\t\t\t\t};\n\t\t\t\tchangedValues = e.ctrlKey || e.metaKey ? {\n\t\t\t\t\theight: DELTA\n\t\t\t\t} : {\n\t\t\t\t\ttop: DELTA,\n\t\t\t\t\ty: DELTA\n\t\t\t\t};\n\t\t\t} \n\n\t\t\tif (this.box && this.box.current)\n\t\t\t\tnewValues.node = this.box.current\n\n\n\t\t\tconst data = Object.assign({}, position, newValues, {\n\t\t\t\tchangedValues, // for group shortcut keys\n\t\t\t});\n\t\t\tif (this.props.dragDisabled === true) {\n\t\t\t\tif (typeof this.props.dragDisabledCallback === 'function') {\n\t\t\t\t\tthis.props.dragDisabledCallback();\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.props.onKeyUp && this.props.onKeyUp(e, data);\n\t\t}\n\t}\n\n\tonShortcutKeyUp(e) {\n\t\tif (this.props.preventShortcutEvents) {\n\t\t\treturn;\n\t\t}\n\t\tif (this.props.isSelected) {  // Only Selected boxes will move on arrow keys\n\t\t\tif (PREVENT_DEFAULT_KEYS.includes(e.key)) {\n\t\t\t\te.preventDefault();\n\t\t\t}\n\t\t\tconst { position } = this.props;\n\t\t\tlet newValues = {};\n\t\t\tif (this.box && this.box.current)\n\t\t\t\tnewValues.node = this.box.current\n\t\t\tconst data = Object.assign({}, position, newValues, {\n\t\t\t\tmovingSides: ['bottom', 'right'],\n\t\t\t});\n\t\t\tconst keysAllowed = ['ArrowRight', 'ArrowLeft', 'ArrowUp', 'ArrowDown', 'Meta', 'Control'];\n\t\t\tif (this.props.dragDisabled === true) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (keysAllowed.includes(e.key) && this.state.callKeyEnd) {\n\t\t\t\tthis.props.onKeyEnd && this.props.onKeyEnd(e, data);\n\t\t\t\tthis.setState({ callKeyEnd: false });\n\t\t\t}\n\t\t}\n\t}\n\n\tgetMovingSides(currentResizeHandle) {\n\t\tswitch (currentResizeHandle) {\n\t\t\tcase 'resize-tl': {\n\t\t\t\treturn ['top', 'left'];\n\t\t\t}\n\t\t\tcase 'resize-ct': {\n\t\t\t\treturn ['top'];\n\t\t\t}\n\t\t\tcase 'resize-tr': {\n\t\t\t\treturn ['top', 'right'];\n\t\t\t}\n\t\t\tcase 'resize-cl': {\n\t\t\t\treturn ['left'];\n\t\t\t}\n\t\t\tcase 'resize-cr': {\n\t\t\t\treturn ['right'];\n\t\t\t}\n\t\t\tcase 'resize-bl': {\n\t\t\t\treturn ['bottom', 'left'];\n\t\t\t}\n\t\t\tcase 'resize-cb': {\n\t\t\t\treturn ['bottom'];\n\t\t\t}\n\t\t\tcase 'resize-br': {\n\t\t\t\treturn ['bottom', 'right'];\n\t\t\t}\n\t\t\tdefault: {\n\t\t\t\treturn [];\n\t\t\t}\n\t\t}\n\t}\n\n\tonResizeStart(e) {\n\t\tconst boundingBox = this.props.getBoundingBoxElement();\n\t\tif (this.props.position.resize || this.props.position.resize === undefined && this.box.current && boundingBox && boundingBox.current) { // Allow resize only if resize property for the box is true or undefined\n\t\t\te.stopPropagation();\n\t\t\tif (this.box?.current?.style) {\n\t\t\t\tthis.box.current.style.zIndex = 99;\n\t\t\t}\n\t\t\tconst { target, clientX: startX, clientY: startY } = e;\n\t\t\tconst { position } = this.props;\n\t\t\tconst rotateAngle = position.rotateAngle ? position.rotateAngle : 0;\n\t\t\tconst startingDimensions = getOffsetCoordinates(this.box.current);\n\t\t\tconst boundingBoxPosition = getOffsetCoordinates(boundingBox.current);\n\t\t\tconst { left, top, width, height } = startingDimensions;\n\t\t\tconst { cx, cy } = topLeftToCenter({ left, top, width, height, rotateAngle });\n\t\t\tconst rect = { width, height, cx, cy, rotateAngle };\n\t\t\tlet data = {\n\t\t\t\twidth: startingDimensions.width,\n\t\t\t\theight: startingDimensions.height,\n\t\t\t\tx: startingDimensions.left + boundingBoxPosition.x,\n\t\t\t\ty: startingDimensions.top + boundingBoxPosition.y,\n\t\t\t\tleft: startingDimensions.left + boundingBoxPosition.x,\n\t\t\t\ttop: startingDimensions.top + boundingBoxPosition.y,\n\t\t\t\tnode: this.box.current\n\t\t\t};\n\t\t\t// if (rotateAngle !== 0) {\n\t\t\t// \tdata = {\n\t\t\t// \t\twidth: startingDimensions.width,\n\t\t\t// \t\theight: startingDimensions.height,\n\t\t\t// \t\tx: startingDimensions.left + boundingBoxPosition.x,\n\t\t\t// \t\ty: startingDimensions.top + boundingBoxPosition.y,\n\t\t\t// \t\tleft: startingDimensions.left + boundingBoxPosition.x,\n\t\t\t// \t\ttop: startingDimensions.top + boundingBoxPosition.y,\n\t\t\t// \t\tnode: this.box.current\n\t\t\t// \t};\n\t\t\t// }\n\t\t\tthis.didResizeHappen = false;\n\n\t\t\t// if a box type is passed (ex: group) send it back to the parent so all boxes in the group can be updated.\n\t\t\tif (this.props.position.type) {\n\t\t\t\tdata.type = this.props.position.type;\n\t\t\t}\n\n\t\t\tconst ratio = rect.width / rect.height;\n\t\t\t// used to increase or decrease deltaY accordingly\n\t\t\tconst sign = e.target.id === 'resize-br' || e.target.id === 'resize-tl' ? 1 : -1; \n\t\t\tthis.callSelectBox = true;\n\n\t\t\tthis.props.onResizeStart && this.props.onResizeStart(e, data);\n\t\t\tconst startingPosition = Object.assign({}, data);\n\t\t\tconst movingSides = this.getMovingSides(e.target && e.target.getAttribute('id'));\n\n\t\t\tlet movingSidesObj = {};\n\t\t\tmovingSides.forEach(side => movingSidesObj[side] = true);\n\t\t\tconst resizeAroundCenter = e.altKey;\n\n\t\t\tconst onResize = (e) => {\n\t\t\t\t!this.props.didDragOrResizeHappen && this.props.setDragOrResizeState && this.props.setDragOrResizeState(true);\n\t\t\t\tconst { clientX, clientY } = e;\n\n\t\t\t\tlet deltaX = this.props.position?.isWidthZero ? 0 : clientX - startX;\n\t\t\t\tlet deltaY = this.props.position?.isHeightZero ? 0 : clientY - startY; //!e.shiftKey && !e.ctrlKey ? sign * deltaX / ratio : clientY - startY;\n\n\t\t\t\tif ((movingSidesObj.right || movingSidesObj.left) &&\n\t\t\t\t\t(movingSidesObj.top || movingSidesObj.bottom)\n\t\t\t\t) {\n\t\t\t\t\tif (!e.shiftKey && !e.ctrlKey && ( !this.props.position?.isWidthZero && !this.props.position?.isHeightZero )) {\n\t\t\t\t\t\tdeltaY = sign * deltaX / ratio;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tconst alpha = Math.atan2(deltaY, deltaX);\n\t\t\t\tconst deltaL = getLength(deltaX, deltaY);\n\n\t\t\t\t// const { minWidth, minHeight } = this.props;\n\t\t\t\tconst beta = alpha - degToRadian(rotateAngle);\n\t\t\t\tlet deltaW = deltaL * Math.cos(beta);\n\t\t\t\tlet deltaH = deltaL * Math.sin(beta);\n\n\t\t\t\tconst type = target.id.replace('resize-', '');\n\n\t\t\t\tif (resizeAroundCenter) {\n\t\t\t\t\tif (movingSidesObj.right || movingSidesObj.left) deltaW = deltaW * 2;\n\t\t\t\t\tif (movingSidesObj.top || movingSidesObj.bottom) deltaH = deltaH * 2;\n\t\t\t\t}\n\n\t\t\t\tconst { position: { cx, cy }, size: { width, height } } = getNewStyle(type, rect, deltaW, deltaH, this.props.position?.isWidthZero ? 0 : 10, this.props.position?.isHeightZero ? 0 : 10); // Use a better way to set minWidth and minHeight\n\t\t\t\tconst tempPosition = centerToTopLeft({ cx, cy, width, height, rotateAngle });\n\n\t\t\t\tif (resizeAroundCenter) {\n\t\t\t\t\tif (movingSidesObj.right || movingSidesObj.left) tempPosition.left = tempPosition.left - (deltaW / 2);\n\t\t\t\t\tif (movingSidesObj.top || movingSidesObj.bottom) tempPosition.top = tempPosition.top - (deltaH / 2);\n\t\t\t\t}\n\n\t\t\t\tdata = {\n\t\t\t\t\twidth: this.props.position?.isWidthZero ? 0 : tempPosition.width,\n\t\t\t\t\theight: this.props.position?.isHeightZero ? 0 : tempPosition.height,\n\t\t\t\t\tx: tempPosition.left,\n\t\t\t\t\ty: tempPosition.top,\n\t\t\t\t\tleft: tempPosition.left,\n\t\t\t\t\ttop: tempPosition.top,\n\t\t\t\t\trotateAngle,\n\t\t\t\t\tnode: this.box.current,\n\t\t\t\t\tmovingSides\n\t\t\t\t};\n\n\t\t\t\tthis.didResizeHappen = true;\n\t\t\t\t// Calculate the restrictions if resize goes out of bounds\n\t\t\t\tconst currentPosition = this.props.boundToParent ?\n\t\t\t\t\tcalculateBoundariesForResize(data.left, data.top, tempPosition.width, tempPosition.height, boundingBoxPosition) :\n\t\t\t\t\tObject.assign({}, data);\n\n\t\t\t\tdata = Object.assign({}, data, currentPosition, {\n\t\t\t\t\tx: currentPosition.left,\n\t\t\t\t\ty: currentPosition.top,\n\t\t\t\t\tdeltaX: currentPosition.left - startingPosition.left,\n\t\t\t\t\tdeltaY: currentPosition.top - startingPosition.top,\n\t\t\t\t\tdeltaW: currentPosition.width - startingPosition.width,\n\t\t\t\t\tdeltaH: currentPosition.height - startingPosition.height\n\t\t\t\t});\n\n\t\t\t\tif (this.props.position.type) {\n\t\t\t\t\tdata.type = this.props.position.type;\n\t\t\t\t}\n\t\t\t\tif (this.props.dragDisabled !== true) {\n\t\t\t\t\tthis.props.onResize && this.props.onResize(e, data);\n\t\t\t\t} else if (typeof this.props.dragDisabledCallback === 'function') {\n\t\t\t\t\tthis.props.dragDisabledCallback();\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tconst onResizeEnd = (e) => {\n\t\t\t\tif (this.box?.current?.style) {\n\t\t\t\t\tthis.box.current.style.zIndex = this.props.position?.zIndex ? this.props.position.zIndex : 98;\n\t\t\t\t}\n\t\t\t\tif (this.didResizeHappen) {\n\t\t\t\t\tthis.callSelectBox = false;\n\t\t\t\t\tthis.props.didDragOrResizeHappen && this.props.setDragOrResizeState && this.props.setDragOrResizeState(false);\n\t\t\t\t\tif (this.props.dragDisabled !== true) {\n\t\t\t\t\t\tthis.props.onResizeEnd && this.props.onResizeEnd(e, data);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tonResize && document.removeEventListener('mousemove', onResize);\n\t\t\t\tonResizeEnd && document.removeEventListener('mouseup', onResizeEnd);\n\t\t\t};\n\n\t\t\tonResize && document.addEventListener('mousemove', onResize);\n\t\t\tonResizeEnd && document.addEventListener('mouseup', onResizeEnd);\n\t\t}\n\t}\n\n\tonRotateStart(e) {\n\t\tif (this.props.position.rotate || this.props.position.rotate === undefined) {\n\t\t\te.stopPropagation();\n\t\t\tconst target = this.box.current;\n\t\t\tconst { clientX, clientY } = e;\n\t\t\tconst { rotateAngle } = this.props.position;\n\t\t\tconst boundingBox = this.props.getBoundingBoxElement();\n\t\t\tconst start = target.getBoundingClientRect().toJSON();\n\t\t\tconst boundingBoxPosition = boundingBox.current.getBoundingClientRect().toJSON();\n\t\t\tconst center = {\n\t\t\t\tx: start.left + start.width / 2,\n\t\t\t\ty: start.top + start.height / 2\n\t\t\t};\n\t\t\tconst startVector = {\n\t\t\t\tx: clientX - center.x,\n\t\t\t\ty: clientY - center.y\n\t\t\t};\n\n\t\t\tconst startAngle = rotateAngle ? rotateAngle : 0;\n\t\t\tlet angle = startAngle ? startAngle : 0;\n\t\t\tlet data = {\n\t\t\t\tx: start.x - boundingBoxPosition.x,\n\t\t\t\ty: start.y - boundingBoxPosition.y,\n\t\t\t\ttop: start.top - boundingBoxPosition.top,\n\t\t\t\tleft: start.left - boundingBoxPosition.left,\n\t\t\t\twidth: start.width,\n\t\t\t\theight: start.height,\n\t\t\t\trotateAngle: angle,\n\t\t\t\tnode: target\n\t\t\t};\n\n\t\t\tconst newCoordinates = getNewCoordinates(data);\n\t\t\tthis.props.onRotateStart && this.props.onRotateStart(e, newCoordinates);\n\n\t\t\tconst onRotate = (e) => {\n\t\t\t\te.stopPropagation();\n\t\t\t\tconst { clientX, clientY } = e;\n\t\t\t\tconst rotateVector = {\n\t\t\t\t\tx: clientX - center.x,\n\t\t\t\t\ty: clientY - center.y\n\t\t\t\t};\n\t\t\t\tangle = getAngle(startVector, rotateVector);\n\t\t\t\t// Snap box during rotation at certain angles - 0, 90, 180, 270, 360\n\t\t\t\tlet rotateAngle = Math.round(startAngle + angle)\n\t\t\t\tif (rotateAngle >= 360) {\n\t\t\t\t\trotateAngle -= 360\n\t\t\t\t} else if (rotateAngle < 0) {\n\t\t\t\t\trotateAngle += 360\n\t\t\t\t}\n\t\t\t\tif (rotateAngle > 356 || rotateAngle < 4) {\n\t\t\t\t\trotateAngle = 0\n\t\t\t\t} else if (rotateAngle > 86 && rotateAngle < 94) {\n\t\t\t\t\trotateAngle = 90\n\t\t\t\t} else if (rotateAngle > 176 && rotateAngle < 184) {\n\t\t\t\t\trotateAngle = 180\n\t\t\t\t} else if (rotateAngle > 266 && rotateAngle < 274) {\n\t\t\t\t\trotateAngle = 270\n\t\t\t\t}\n\t\t\t\tdata = Object.assign({}, data, {\n\t\t\t\t\trotateAngle\n\t\t\t\t});\n\n\t\t\t\tconst newCoordinates = getNewCoordinates(data);\n\t\t\t\tif (this.props.dragDisabled !== true) {\n\t\t\t\t\tthis.props.onRotate && this.props.onRotate(e, newCoordinates);\n\t\t\t\t} else if (typeof this.props.dragDisabledCallback === 'function') {\n\t\t\t\t\tthis.props.dragDisabledCallback();\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tconst onRotateEnd = (e) => {\n\t\t\t\tonRotate && document.removeEventListener('mousemove', onRotate);\n\t\t\t\tonRotateEnd && document.removeEventListener('mouseup', onRotateEnd);\n\t\t\t\tif (this.props.dragDisabled !== true) {\n\t\t\t\t\tthis.props.onRotateEnd && this.props.onRotateEnd(e, data);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tonRotate && document.addEventListener('mousemove', onRotate);\n\t\t\tonRotateEnd && document.addEventListener('mouseup', onRotateEnd);\n\t\t}\n\t}\n\n\tgetCoordinatesWrapperWidth() {\n\t\tif (this.props.isSelected && this.coordinates && this.coordinates.current) {\n\t\t\treturn this.coordinates.current.offsetWidth;\n\t\t}\n\t}\n\n\tfilterControls(control, index) {\n\t\tif (this.props.position?.isHeightZero) {\n\t\t\treturn RESIZE_CORNERS_FOR_NO_HEIGHT.includes(control);\n\t\t} else if (this.props.position?.isWidthZero) {\n\t\t\treturn RESIZE_CORNERS_FOR_NO_WIDTH.includes(control);\n\t\t}\n\t\treturn true;\n\t}\n\n\tcomponentDidMount() {\n\t\tif (this.props.areMultipleBoxesSelected && this.props.isSelected) {\n\t\t\tdocument.addEventListener('keydown', this.shortcutHandler);\n\t\t\tdocument.addEventListener('keyup', this.onShortcutKeyUp);\n\t\t}\n\t}\n\n\tcomponentDidUpdate(prevProps) {\n\t\t// Added Events to document to accommodate group position shortcuts\n\t\tif (prevProps.areMultipleBoxesSelected !== this.props.areMultipleBoxesSelected || prevProps.isSelected !== this.props.isSelected) {\n\t\t\tdocument.removeEventListener('keydown', this.shortcutHandler);\n\t\t\tdocument.removeEventListener('keyup', this.onShortcutKeyUp);\n\t\t\t\n\t\t\tif (this.props.areMultipleBoxesSelected && this.props.isSelected) {\n\t\t\t\tdocument.addEventListener('keydown', this.shortcutHandler);\n\t\t\t\tdocument.addEventListener('keyup', this.onShortcutKeyUp);\n\t\t\t}\n\t\t}\n\t}\n\n\tcomponentWillUnmount() {\n\t\tdocument.removeEventListener('keydown', this.shortcutHandler);\n\t\tdocument.removeEventListener('keyup', this.onShortcutKeyUp);\n\t}\n\t\n\trender() {\n\t\tconst { areMultipleBoxesSelected, boxStyle, id, identifier, isSelected, isShiftKeyActive, position, resolution, cropActiveForElement} = this.props;\n\t\tif (!isNaN(position.top) && !isNaN(position.left) && !isNaN(position.width) && !isNaN(position.height)) {\n\t\t\tconst boundingBox = this.props.getBoundingBoxElement();\n\t\t\tconst boundingBoxDimensions = boundingBox.current.getBoundingClientRect();\n\t\t\tconst dashedCentreNodes = position.dashedCentreNodes;\n\t\t\tlet xFactor = 1;\n\t\t\tlet yFactor = 1;\n\n\t\t\tif (resolution && resolution.width && resolution.height) {\n\t\t\t\txFactor = resolution.width / boundingBoxDimensions.width;\n\t\t\t\tyFactor = resolution.height / boundingBoxDimensions.height;\n\t\t\t}\n\n\t\t\tconst isCropModeActive = cropActiveForElement === identifier;\n\t\t\t\n\t\t\tlet boxClassNames = `\n\t\t\t\t${(position.isWidthZero || position.isHeightZero) ? styles.hideBorders : ''}\n\t\t\t\t${\n\t\t\t\t\tisSelected ? `${this.props.overRideSelected ? this.props.overRideSelected : styles.selected} ${this.props.overRideStyles ? this.props.overRideStyles: styles.box}` : `${this.props.overRideStyles? this.props.overRideStyles : styles.box}`\n\t\t\t\t}\n\t\t\t`\n\t\t\tboxClassNames = position.type === 'group' && this.props.isSelected ? `${boxClassNames} ${this.props.overRideSelected}` : boxClassNames;\n\t\t\tboxClassNames = isSelected && areMultipleBoxesSelected && position.type !== 'group' ? `${boxClassNames} ${styles.groupElement}` : boxClassNames;\n\t\t\tconst rotateAngle = position.rotateAngle ? position.rotateAngle : 0;\n\t\t\tconst boxStyles = {\n\t\t\t\t...boxStyle,\n\t\t\t\twidth: `${position.width}px`,\n\t\t\t\theight: `${position.height}px`,\n\t\t\t\ttop: `${position.top}px`,\n\t\t\t\tleft: `${position.left}px`,\n\t\t\t\tzIndex: position.zIndex ? position.zIndex : 98,\n\t\t\t\ttransform: isCropModeActive ? '' : `translate(${position.isWidthZero ? -5 : 0}px, ${position.isHeightZero ? -5 : 0}px) rotate(${rotateAngle}deg)`,\n\t\t\t\tpointerEvents: this.props.isLayerLocked ? 'none' : '',\n\t\t\t};\n\n\t\t\tif (position.isWidthZero || position.isHeightZero) {\n\t\t\t\tboxStyles.display = 'flex';\n\t\t\t\tboxStyles.justifyContent = 'center';\n\t\t\t\tboxStyles.alignItems = 'center';\n\t\t\t\tboxStyles.width = `${position.isWidthZero ? DEFAULT_SIZE : position.width}px`;\n\t\t\t\tboxStyles.height = `${position.isHeightZero ? DEFAULT_SIZE : position.height}px`;\n\t\t\t}\n\n\t\t\t// if (isSelected) {\n\t\t\t// \tboxStyles.zIndex = 99;\n\t\t\t// }\n\n\t\t\tif (position.type && position.type === 'group' && isShiftKeyActive ) {\n\t\t\t\tif (!areMultipleBoxesSelected) {\n\t\t\t\t\tboxStyles.pointerEvents = 'none';\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}\n\n\t\t\tif (cropActiveForElement !== undefined && !isCropModeActive)\n\t\t\t\treturn null;\n\n\t\t\treturn <div\n\t\t\t\tclassName={boxClassNames}\n\t\t\t\tid={id}\n\t\t\t\tonClick={this.selectBox}\n\t\t\t\tonMouseDown={this.props.drag ? this.onDragStart : null} // If this.props.drag is false, remove the mouseDown event handler for drag\n\t\t\t\tonKeyDown={areMultipleBoxesSelected ? null : this.shortcutHandler} // remove event from div when multiple boxes are selected\n\t\t\t\tonKeyUp={areMultipleBoxesSelected ? null : this.onShortcutKeyUp} // remove event from div when multiple boxes are selected\n\t\t\t\tonMouseOver={this.hoverBox}\n\t\t\t\tonMouseOut={this.unHoverBox}\n\t\t\t\tonDragOver={this.dragOverBox}\n\t\t\t\tonDragLeave={this.unDragOverBox}\n\t\t\t\tonDrop={this.onDropElementBox}\n\t\t\t\tref={this.box}\n\t\t\t\tstyle={boxStyles}\n\t\t\t\tidentifier={identifier}\n\t\t\t\ttabIndex=\"0\"\n\t\t\t\tonDoubleClick={this.handleDoubleClick}\n\t\t\t\tonFocus={() => {\n\t\t\t\t\tif (this.props.preventShortcutEvents) {\n\t\t\t\t\t\tthis.props.setPreventShortcutEvents(false);\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t{(position.isWidthZero || position.isHeightZero) && <div \n\t\t\t\tclassName={`${isSelected ? styles.zeroDimensionBoxSelected : ''} ${styles.zeroDimensionBox}`}\n\t\t\t\tstyle={{\n\t\t\t\t\twidth: `${position.isWidthZero ? 0 : position.width}px`,\n\t\t\t\t\theight: `${position.isHeightZero ? 0 : position.height}px`,\n\t\t\t\t\ttop: `${position.top}px`,\n\t\t\t\t\tleft: `${position.left}px`,\n\t\t\t\t\tzIndex: position.zIndex ? position.zIndex : 98,\n\t\t\t\t\tpointerEvents: 'none',\n\t\t\t\t}}></div>}\n\t\t\t\t{<>\n\t\t\t\t\t{\n\t\t\t\t\t\t(isSelected && !areMultipleBoxesSelected) || (isSelected &&  position.type && position.type === 'group') ?\n\t\t\t\t\t\t(this.props.didDragOrResizeHappen) ? <span\n\t\t\t\t\t\t\t\tref={this.coordinates}\n\t\t\t\t\t\t\t\tclassName={styles.coordinates}\n\t\t\t\t\t\t\t\tstyle={{transform: `rotate(-${this.props.position?.rotateAngle}deg)`}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{`${Math.round(position.x * xFactor)}, ${Math.round(position.y * yFactor)}`}\n\t\t\t\t\t\t</span> :\n\t\t\t\t\t\t\tnull :null\n\t\t\t\t\t}\n\t\t\t\t\t{\n\t\t\t\t\t\t(isSelected && !areMultipleBoxesSelected) || (isSelected && position.type && position.type === 'group') ?\n\t\t\t\t\t\t(this.props.didDragOrResizeHappen) ? <span\n\t\t\t\t\t\t\t\tclassName={`${styles.dimensions} `}\n\t\t\t\t\t\t\t\tstyle={{ width: `${position.width}px`, top: `${position.height + 10}px`, minWidth:'66px', transform: `rotate(-${this.props.position?.rotateAngle}deg)` }}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div className={`${styles.dimensions_style}`}>{`${Math.round(position.width * xFactor)} x ${Math.round(position.height * yFactor)}`}</div>\n\t\t\t\t\t\t</span> :\n\t\t\t\t\t\t\tnull :null\n\t\t\t\t\t}\n\t\t\t\t\t{\n\t\t\t\t\t\t(isSelected && !areMultipleBoxesSelected) || (position.type && position.type === 'group' && isSelected) ?\n\t\t\t\t\t\t\tRESIZE_CORNERS.filter(this.filterControls).map(handle => {\n\t\t\t\t\t\t\t\tlet visibleHandle = handle;\n\t\t\t\t\t\t\t\tconst additionalStyles = {};\n\t\t\t\t\t\t\t\tif (position.isHeightZero) {\n\t\t\t\t\t\t\t\t\tif (handle.includes('r')) {\n\t\t\t\t\t\t\t\t\t\tvisibleHandle = 'cr';\n\t\t\t\t\t\t\t\t\t} else if (handle.includes('l')) {\n\t\t\t\t\t\t\t\t\t\tvisibleHandle = 'cl';\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t// additionalStyles.bottom = 0;\n\t\t\t\t\t\t\t\t\tadditionalStyles.top = 0;\n\t\t\t\t\t\t\t\t} else if (position.isWidthZero) {\n\t\t\t\t\t\t\t\t\tif (handle.includes('t')) {\n\t\t\t\t\t\t\t\t\t\tvisibleHandle = 'ct';\n\t\t\t\t\t\t\t\t\t} else if (handle.includes('b')) {\n\t\t\t\t\t\t\t\t\t\tvisibleHandle = 'cb';\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t// additionalStyles.right = 0;\n\t\t\t\t\t\t\t\t\tadditionalStyles.left = 0;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tconst className = `${styles.resizeCorners} ${styles[`resize-${handle}`]} ` + `${dashedCentreNodes ? styles[`stretchable-resize-${handle}`] : null}`;\n\t\t\t\t\t\t\t\treturn <div\n\t\t\t\t\t\t\t\t\tkey={handle}\n\t\t\t\t\t\t\t\t\tclassName={className}\n\t\t\t\t\t\t\t\t\tonMouseDown={\n\t\t\t\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\t\t\t\t(!position.isHeightZero  && !position.isWidthZero) ||\n\t\t\t\t\t\t\t\t\t\t\t!RESIZE_SIDES.includes(handle)\n\t\t\t\t\t\t\t\t\t\t) && this.props.resize ? this.onResizeStart : null\n\t\t\t\t\t\t\t\t\t} // If this.props.resize is false then remove the mouseDown event handler for resize\n\t\t\t\t\t\t\t\t\tid={`resize-${handle}`}\n\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\t...additionalStyles,\n\t\t\t\t\t\t\t\t\t\tpointerEvents: this.props.isLayerLocked ? 'none' : '', \n\t\t\t\t\t\t\t\t\t\tcursor: getResizeCursorCSS(visibleHandle, this.props.position?.rotateAngle)\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>;\n\t\t\t\t\t\t\t}) :\n\t\t\t\t\t\t\tnull\n\t\t\t\t\t}\n\t\t\t\t\t{\n\t\t\t\t\t\tisSelected && !areMultipleBoxesSelected ?\n\t\t\t\t\t\t\tROTATE_HANDLES.filter(this.filterControls).map(handle => {\n\t\t\t\t\t\t\t\tconst className = `${styles.rotateHandle} ${styles[`rotate-${handle}`]}`;\n\t\t\t\t\t\t\t\treturn <div\n\t\t\t\t\t\t\t\t\tkey={handle}\n\t\t\t\t\t\t\t\t\tclassName={className}\n\t\t\t\t\t\t\t\t\tonMouseDown={this.props.rotate ? this.onRotateStart : null} // If this.props.rotate is false then remove the mouseDown event handler for rotate\n\t\t\t\t\t\t\t\t\tid={`rotate-${handle}`}\n\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\tpointerEvents: this.props.isLayerLocked ? 'none' : '',\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>;\n\t\t\t\t\t\t\t}) :\n\t\t\t\t\t\t\tnull\n\t\t\t\t\t}\n\t\t\t\t</>}\n\t\t\t</div>\n\t\t}\n\n\t\treturn null;\n\t}\n}\n\nBox.propTypes = {\n\tareMultipleBoxesSelected: PropTypes.bool,\n\tboundToParent: PropTypes.bool,\n\tdrag: PropTypes.bool,\n\tgetBoundingBoxElement: PropTypes.func,\n\tid: PropTypes.string,\n\tisSelected: PropTypes.bool,\n\tkeybindings: PropTypes.bool,\n\tonDragStart: PropTypes.func,\n\tonDrag: PropTypes.func,\n\tonDragEnd: PropTypes.func,\n\tonKeyUp: PropTypes.func,\n\tonKeyEnd: PropTypes.func,\n\tonResizeStart: PropTypes.func,\n\tonResize: PropTypes.func,\n\tonResizeEnd: PropTypes.func,\n\tonRotateStart: PropTypes.func,\n\tonRotate: PropTypes.func,\n\tonRotateEnd: PropTypes.func,\n\tposition: PropTypes.object.isRequired,\n\tresize: PropTypes.bool,\n\tresolution: PropTypes.object,\n\trotate: PropTypes.bool\n};\n\nexport default Box;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Box from './Box';\nimport {\n\tcalculateGuidePositions,\n\tgetMultipleSelectionCoordinates,\n\tgetOffsetCoordinates,\n\tproximityListener,\n\tgetGroupCoordinates,\n\tcheckGroupChildElementsLocked\n} from './utils/helpers'\nimport styles from './styles.scss';\nimport {GROUP_BOX_PREFIX} from './utils/constants';\nlet mousedown = false;\nlet last_mousex = 0;\nlet last_mousey = 0;\nlet posX = 0;\nlet posY = 0;\n// let rect2 = null;\n\nclass AlignmentGuides extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.boundingBox = React.createRef();\n\t\tthis.state = {\n\t\t\tactive: '', // stores the active box to be shown on preview\n\t\t\tactiveBoxes: [], // store all captions box which are currently selected in multiple selection state\n\t\t\tboundingBox: null,\n\t\t\tboxes: {}, // store all data of each caption\n\t\t\tdragging: false,\n\t\t\tguides: {},\n\t\t\tguidesActive: false,\n\t\t\tisShiftKeyActive: false,\n\t\t\tmatch: {},\n\t\t\tresizing: false,\n\t\t\trotating: false,\n\t\t\tactiveBoxSnappedPosition: {},\n\t\t\tpreventShortcutEvents: false,\n\t\t\tactiveCaptionGroupCaptions: [], // this is to store all the captions selected while selecting 1 group or multiple groups\n\t\t\tcaptionGroupsToIndexMap:{} //  we store all the group and its map to the caption index that are inside it as it's selection\n\t\t};\n\t\tthis.setShiftKeyState = this.setShiftKeyState.bind(this);\n\t\tthis.getBoundingBoxElement = this.getBoundingBoxElement.bind(this);\n\t\tthis.setDragOrResizeState = this.setDragOrResizeState.bind(this);\n\t\tthis.selectBox = this.selectBox.bind(this);\n\t\tthis.unSelectBox = this.unSelectBox.bind(this);\n\t\tthis.dragStartHandler = this.dragStartHandler.bind(this);\n\t\tthis.dragHandler = this.dragHandler.bind(this);\n\t\tthis.dragEndHandler = this.dragEndHandler.bind(this);\n\t\tthis.resizeStartHandler = this.resizeStartHandler.bind(this);\n\t\tthis.resizeHandler = this.resizeHandler.bind(this);\n\t\tthis.resizeEndHandler = this.resizeEndHandler.bind(this);\n\t\tthis.rotateStartHandler = this.rotateStartHandler.bind(this);\n\t\tthis.rotateHandler = this.rotateHandler.bind(this);\n\t\tthis.rotateEndHandler = this.rotateEndHandler.bind(this);\n\t\tthis.keyUpHandler = this.keyUpHandler.bind(this);\n\t\tthis.keyEndHandler = this.keyEndHandler.bind(this);\n\t\tthis.setPreventShortcutEvents = this.setPreventShortcutEvents.bind(this);\n\t\tthis.startingPositions = null;\n\t\tthis.didDragOrResizeHappen = false;\n\t\tthis.didResizeHappen = false;\n\t\tthis.didRotateHappen = false;\n\t\tthis.mouseDragHandler = this.mouseDragHandler.bind(this);\n\t\tthis.boxSelectByDrag  = this.boxSelectByDrag.bind(this);\n\t\tthis.createRectByDrag  = this.createRectByDrag.bind(this);\n\t\tthis.updateBoxAfterCrop = this.updateBoxAfterCrop.bind(this);\n\t\tthis.addGuidelinesForSnapping = this.addGuidelinesForSnapping.bind(this);\n\t\tthis.getReorderedBoxes = this.getReorderedBoxes.bind(this);\n\t}\n\n\tcomponentDidMount() {\n\t\t// Set the dimensions of the bounding box and the draggable boxes when the component mounts.\n\t\tif (this.boundingBox.current) {\n\t\t\tconst boundingBox = this.boundingBox.current.getBoundingClientRect().toJSON();\n\t\t\tconst boxes = {};\n\t\t\tconst guides = {};\n\t\t\tconst activeBoxes = [];\n\t\t\tlet active = '';\n\t\t\tconst captionGroupsToIndexMap = {};\n\n\t\t\t// Adding the guides for the bounding box to the guides object\n\t\t\tguides.boundingBox = {\n\t\t\t\tx: calculateGuidePositions(boundingBox, 'x').map(value => value - boundingBox.left),\n\t\t\t\ty: calculateGuidePositions(boundingBox, 'y').map(value => value - boundingBox.top)\n\t\t\t};\n\n\t\t\tthis.props.boxes.forEach((dimensions, index) => {\n\t\t\t\tboxes[`box${index}`] = Object.assign({}, dimensions, {\n\t\t\t\t\tisHeightZero: !isNaN(Number(dimensions?.height)) ? Math.round(dimensions?.height) <= 0 : undefined,\n\t\t\t\t\tisWidthZero: !isNaN(Number(dimensions?.width)) ? Math.round(dimensions?.width) <= 0 : undefined,\n\t\t\t\t});\n\t\t\t\tguides[`box${index}`] = {\n\t\t\t\t\tx: calculateGuidePositions(dimensions, 'x'),\n\t\t\t\t\ty: calculateGuidePositions(dimensions, 'y')\n\t\t\t\t};\n\t\t\t\tif (dimensions.active) {\n\t\t\t\t\tactiveBoxes.push(`box${index}`);\n\t\t\t\t}\n\n\t\t\t\tif (dimensions?.metadata?.url) {\n\t\t\t\t\tconst img = new Image();\n\t\t\t\t\timg.src = dimensions.metadata.url;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif (activeBoxes.length > 1) {\n\t\t\t\tboxes['box-ms'] = getMultipleSelectionCoordinates(boxes, activeBoxes);\n\t\t\t\tboxes['box-ms'].type = 'group';\n\t\t\t\tboxes['box-ms'].zIndex = 12;\n\t\t\t\tconst selections = [];\n\t\t\t\tfor (let box in boxes) {\n\t\t\t\t\tif (boxes.hasOwnProperty(box) && activeBoxes.includes(box)) {\n\t\t\t\t\t\tselections.push(boxes[box]);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tboxes['box-ms'].selections = selections;\n\t\t\t\tactive = 'box-ms';\n\t\t\t} else if (activeBoxes.length === 1) {\n\t\t\t\tactive = activeBoxes[0];\n\t\t\t}\n\t\t\t// Checking if Groups are present and if the length of array of group > 0 then we create grouped boxes.\n\t\t\tif (this.props?.groups?.length > 0) {\n\t\t\t\t// for each group we are creating a new box starting with 'box-ms-'\n\t\t\t\tthis.props.groups.forEach((groupArray, index) => {\n\t\t\t\t\tboxes[`${GROUP_BOX_PREFIX}${index}`] = getGroupCoordinates(boxes, groupArray);\n\t\t\t\t\tboxes[`${GROUP_BOX_PREFIX}${index}`].type = 'group';\n\t\t\t\t\tboxes[`${GROUP_BOX_PREFIX}${index}`].zIndex = 12;\n\t\t\t\t\tconst selections = [];\n\t\t\t\t\tconst selectedIndexes = [];\n\t\t\t\t\tlet allElementsInsideGroupAreSelected = true;\n\t\t\t\t\t// Checking for all the boxes present inside that group and storing them in selections\n\t\t\t\t\tfor (let box in boxes) {\n\t\t\t\t\t\tif (boxes.hasOwnProperty(box) && groupArray.includes(boxes?.[box]?.metadata?.captionIndex)) {\n\t\t\t\t\t\t\tselections.push(boxes[box]);\n\t\t\t\t\t\t\tselectedIndexes.push(box);\n\t\t\t\t\t\t\tif (boxes[box].active !== true) {\n\t\t\t\t\t\t\t\tallElementsInsideGroupAreSelected = false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (allElementsInsideGroupAreSelected) {\n\t\t\t\t\t\tselectedIndexes.forEach(val => {\n\t\t\t\t\t\t\tactiveBoxes.splice(activeBoxes.indexOf(val), 1);\n\t\t\t\t\t\t});\n\t\t\t\t\t\tactiveBoxes.push(`${GROUP_BOX_PREFIX}${index}`);\n\t\t\t\t\t}\n\t\t\t\t\tboxes[`${GROUP_BOX_PREFIX}${index}`].metadata = {type:'group'};\n\t\t\t\t\tboxes[`${GROUP_BOX_PREFIX}${index}`].selections = selections;\n\t\t\t\t\tboxes[`${GROUP_BOX_PREFIX}${index}`].identifier = `${GROUP_BOX_PREFIX}${index}`;\n\t\t\t\t\tboxes[`${GROUP_BOX_PREFIX}${index}`].isLayerLocked = checkGroupChildElementsLocked(selections);\n\t\t\t\t\t// storing all the indexes inside a particular group to map it later if we need\n\t\t\t\t\tcaptionGroupsToIndexMap[`${GROUP_BOX_PREFIX}${index}`] = groupArray;\n\t\t\t\t\t// active = `box-ms-${index}`;\n\t\t\t\t});\n\t\t\t\tdelete boxes['box-ms'];\n\t\t\t}\n\t\t\tif (activeBoxes.length > 1) {\n\t\t\t\tboxes['box-ms'] = getMultipleSelectionCoordinates(boxes, activeBoxes);\n\t\t\t\tboxes['box-ms'].type = 'group';\n\t\t\t\tboxes['box-ms'].zIndex = 12;\n\t\t\t\tconst selections = [];\n\t\t\t\tfor (let box in boxes) {\n\t\t\t\t\tif (boxes.hasOwnProperty(box) && activeBoxes.includes(box)) {\n\t\t\t\t\t\tselections.push(boxes[box]);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tboxes['box-ms'].selections = selections;\n\t\t\t\tactive = 'box-ms';\n\t\t\t} else if (activeBoxes.length === 1) {\n\t\t\t\tactive = activeBoxes[0];\n\t\t\t}\n\t\t\t// adding guidelines for snapping\n\t\t\tthis.addGuidelinesForSnapping(guides);\n\n\t\t\tdocument.addEventListener('click', this.unSelectBox);\n\t\t\twindow.addEventListener('blur', this.unSelectBox);\n\t\t\tdocument.addEventListener('keydown', this.setShiftKeyState);\n\t\t\tdocument.addEventListener('keydown', this.unSelectBox);\n\t\t\tdocument.addEventListener('keyup', this.setShiftKeyState);\n\t\t\tdocument.addEventListener('contextmenu', this.selectBox);\n\n\t\t\tthis.setState({\n\t\t\t\tboundingBox,\n\t\t\t\tboxes,\n\t\t\t\tguides,\n\t\t\t\tactiveBoxes,\n\t\t\t\tactive,\n\t\t\t\tcaptionGroupsToIndexMap,\n\t\t\t});\n\t\t}\n\t\tif (this.props.isStylingPanelEnabled) {\n\t\t\tthis.mouseDragHandler();\n\t\t}\n\t}\n\n\tcomponentWillUnmount() {\n\t\tdocument.removeEventListener('click', this.unSelectBox);\n\t\twindow.removeEventListener('blur', this.unSelectBox);\n\t\tdocument.removeEventListener('keydown', this.setShiftKeyState);\n\t\tdocument.removeEventListener('keydown', this.unSelectBox);\n\t\tdocument.removeEventListener('keyup', this.setShiftKeyState);\n\t\tdocument.removeEventListener('contextmenu', this.selectBox);\n\t}\n\n\tcomponentDidUpdate(prevProps, prevState) {\n\t\tconst captionGroupsToIndexMap = {};\n\t\tif (this.state.activeBoxes.length > 0) {\n\t\t\tconst activeBoxWithoutLock = this.state.activeBoxes.filter(activeBox => {\n\t\t\t\treturn !this.state.boxes[activeBox] || !this.state.boxes[activeBox].isLayerLocked;\n\t\t\t});\n\t\t\tif (JSON.stringify(this.state.activeBoxes) !== JSON.stringify(activeBoxWithoutLock)) {\n\t\t\t\tthis.setState({\n\t\t\t\t\tactiveBoxes: activeBoxWithoutLock\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tif (this.props?.groups !== prevProps.groups) {\n\t\t\tlet {boxes} = this.state;\n\t\t\tboxes = Object.fromEntries(\n\t\t\t\tObject.entries(boxes)\n\t\t\t\t\t.filter(([key]) => !key.startsWith(`${GROUP_BOX_PREFIX}`))\n\t\t\t);\n\t\t\tif (this.props?.groups?.length === 0) {\n\t\t\t\tthis.setState({\n\t\t\t\t\tboxes\n\t\t\t\t});\n\t\t\t} else if (this.props?.groups?.length > 0) {\n\t\t\t\tlet active = this.state.active;\n\t\t\t\tthis.props?.groups?.forEach((groupArray, index) => {\n\t\t\t\t\tboxes[`${GROUP_BOX_PREFIX}${index}`] = getGroupCoordinates(boxes, groupArray);\n\t\t\t\t\tboxes[`${GROUP_BOX_PREFIX}${index}`].type = 'group';\n\t\t\t\t\tboxes[`${GROUP_BOX_PREFIX}${index}`].zIndex = 12;\n\t\t\t\t\tconst selections = [];\n\t\t\t\t\tfor (let box in boxes) {\n\t\t\t\t\t\tif (boxes.hasOwnProperty(box) && groupArray.includes(boxes?.[box]?.metadata?.captionIndex)) {\n\t\t\t\t\t\t\tselections.push(boxes[box]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tboxes[`${GROUP_BOX_PREFIX}${index}`].metadata = {type:'group'};\n\t\t\t\t\tboxes[`${GROUP_BOX_PREFIX}${index}`].selections = selections;\n\t\t\t\t\tboxes[`${GROUP_BOX_PREFIX}${index}`].identifier = `${GROUP_BOX_PREFIX}${index}`;\n\t\t\t\t\tboxes[`${GROUP_BOX_PREFIX}${index}`].groupedCaptions = groupArray;\n\t\t\t\t\tboxes[`${GROUP_BOX_PREFIX}${index}`].isLayerLocked = checkGroupChildElementsLocked(selections);\n\t\t\t\t\tcaptionGroupsToIndexMap[`${GROUP_BOX_PREFIX}${index}`] = groupArray;\n\t\t\t\t\t// To check if we added new group, then we select it as active\n\t\t\t\t\tif (this.props.groups?.length > prevProps.groups?.length) {\n\t\t\t\t\t\tactive = `${GROUP_BOX_PREFIX}${index}`;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tdelete boxes['box-ms'];\n\t\t\t\t\n\t\t\t\tthis.setState({\n\t\t\t\t\tboxes,\n\t\t\t\t\tcaptionGroupsToIndexMap,\n\t\t\t\t\tactive\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\t// adding user guides for snapping\n\t\tif (\n\t\t\tthis.props.xFactor !== prevProps.xFactor ||\n\t\t\tthis.props.yFactor !== prevProps.yFactor ||\n\t\t\tthis.props.userXGuides !== prevProps.userXGuides ||\n\t\t\tthis.props.userYGuides !== prevProps.userYGuides\n\t\t) {\n\t\t\tconst guides = this.state.guides\n\t\t\tthis.addGuidelinesForSnapping(guides)\n\t\t\tthis.setState({\n\t\t\t\tguides,\n\t\t\t})\n\t\t}\n\t}\n\n\t// keeping the z-index of group box with the last element in group\n\tgetReorderedBoxes(boxes, captionGroupsToIndexMap) {\n\t\tconst selectionBoxesWithHigherIndex = {};\n\n\t\tconst reversedKeys = Object.keys(boxes).reverse();\n\t\tObject.keys(captionGroupsToIndexMap).forEach(group => {\n\t\t\tif (boxes[group]) {\n\t\t\t\tfor (let i=0; i<reversedKeys.length; i++) {\n\t\t\t\t\tif (captionGroupsToIndexMap[group].includes(boxes[reversedKeys[i]].identifier)) {\n\t\t\t\t\t\tselectionBoxesWithHigherIndex[reversedKeys[i]] = group;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tconst reorderedBoxes = [];\n\t\tObject.keys(boxes).forEach(key => {\n\t\t\tif (!key.startsWith(GROUP_BOX_PREFIX)) {\n\t\t\t\treorderedBoxes.push(boxes[key]);\n\t\t\t\treorderedBoxes[reorderedBoxes.length - 1].id = key;\n\t\t\t}\n\t\t\tif (selectionBoxesWithHigherIndex[key]) {\n\t\t\t\treorderedBoxes.push(boxes[selectionBoxesWithHigherIndex[key]]);\n\t\t\t\treorderedBoxes[reorderedBoxes.length - 1].id = selectionBoxesWithHigherIndex[key];\n\t\t\t}\n\t\t});\n\n\t\treturn reorderedBoxes;\n\t}\n\n\taddGuidelinesForSnapping(guides) {\n\t\tconst xFactor = this.props.xFactor || 1\n\t\tconst yFactor = this.props.yFactor || 1\n\t\tconst userXGuidesPos = this.props.userXGuides\n\t\t\t? Object.keys(this.props.userXGuides).map((guideId) =>\n\t\t\t\t\tMath.round(this.props.userXGuides[guideId] / xFactor)\n\t\t\t\t)\n\t\t\t: []\n\t\tconst userYGuidesPos = this.props.userYGuides\n\t\t\t? Object.keys(this.props.userYGuides).map((guideId) =>\n\t\t\t\t\tMath.round(this.props.userYGuides[guideId] / yFactor)\n\t\t\t\t)\n\t\t\t: []\n\t\tguides.userGuides = {\n\t\t\tx: userXGuidesPos.sort((x, y) => x - y),\n\t\t\ty: userYGuidesPos.sort((x, y) => x - y),\n\t\t}\n\t}\n\n\tsetShiftKeyState(e) {\n\t\tthis.setState({\n\t\t\tisShiftKeyActive: e.shiftKey\n\t\t});\n\t}\n\n\tgetBoundingBoxElement() {\n\t\treturn this.boundingBox;\n\t}\n\n\tsetDragOrResizeState(state) {\n\t\tif (this.props.onDragOrResize) {\n\t\tthis.props.onDragOrResize(state);\n\t\t}\n\t\tthis.didDragOrResizeHappen = state;\n\t}\n\n\tsetPreventShortcutEvents(val) {\n\t\tthis.setState({ preventShortcutEvents: val });\n\t}\n\n\tupdateBoxAfterCrop(data) {\n\t\tconst boxes = Object.assign({}, this.state.boxes, {\n\t\t\t[data.newBoxData.node.id]: Object.assign({}, this.state.boxes[data.newBoxData.node.id], {\n\t\t\t\tx: data.newBoxData.x,\n\t\t\t\ty: data.newBoxData.y,\n\t\t\t\tleft: data.newBoxData.left,\n\t\t\t\ttop: data.newBoxData.top,\n\t\t\t\twidth: data.newBoxData.width,\n\t\t\t\theight: data.newBoxData.height\n\t\t\t})\n\t\t});\n\n\t\tconst guides = Object.assign({}, this.state.guides, {\n\t\t\t[data.newBoxData.node.id]: Object.assign({}, this.state.guides[data.newBoxData.node.id], {\n\t\t\t\tx: calculateGuidePositions(boxes[data.newBoxData.node.id], 'x'),\n\t\t\t\ty: calculateGuidePositions(boxes[data.newBoxData.node.id], 'y')\n\t\t\t})\n\t\t});\n\n\t\tthis.props.onCropEnd(data);\n\n\t\t// this.setState({\n\t\t// \tboxes,\n\t\t// \tguides\n\t\t// }, () => {\n\t\t\t\n\t\t// })\n\t}\n\n\tselectBox(e) {\n\t\tconst boundingBox = this.getBoundingBoxElement();\n\t\tconst boundingBoxPosition = boundingBox.current.getBoundingClientRect().toJSON();\n\t\tif (e.target && e.target.id?.indexOf('box') >= 0) {\n\t\t\tconst boxDimensions = e.target.getBoundingClientRect().toJSON();\n\t\t\tlet data = {\n\t\t\t\tx: boxDimensions.x - boundingBoxPosition.x,\n\t\t\t\ty: boxDimensions.y - boundingBoxPosition.y,\n\t\t\t\tleft: boxDimensions.left - boundingBoxPosition.x,\n\t\t\t\ttop: boxDimensions.top - boundingBoxPosition.y,\n\t\t\t\twidth: boxDimensions.width,\n\t\t\t\theight: boxDimensions.height,\n\t\t\t\tnode: e.target,\n\t\t\t\tmetadata: this.state.boxes[e.target.id].metadata\n\t\t\t};\n\t\t\tif (e.shiftKey || e.metaKey || e.ctrlKey || (e.type === 'contextmenu' && this.state.activeBoxes.length > 1) || ( e.target?.id?.indexOf(GROUP_BOX_PREFIX) >= 0 && this.props?.groups?.length > 0)) { // Here we are checking if the selected elements are greater than one or if any group is selected\n\t\t\t\tlet { activeBoxes, boxes, activeCaptionGroupCaptions } = this.state;\n\t\t\t\tif (activeBoxes.includes(e.target.id)) {\n\t\t\t\t\tif (e.unselect || !this.isDragHappening) {\n\t\t\t\t\t\tactiveBoxes = activeBoxes.filter(activeBox => activeBox !== e.target.id);\n\t\t\t\t\t}\n\t\t\t\t} else if (e.target.id !== 'box-ms') {\n\t\t\t\t\tif (e.target.id.startsWith(GROUP_BOX_PREFIX) && !e.shiftKey) {\n\t\t\t\t\t\tdelete boxes['box-ms'];\n\t\t\t\t\t\tactiveBoxes = [\n\t\t\t\t\t\t\te.target.id\n\t\t\t\t\t\t];\n\t\t\t\t\t} else {\n\t\t\t\t\t\tactiveBoxes = [\n\t\t\t\t\t\t\t...activeBoxes,\n\t\t\t\t\t\t\te.target.id\n\t\t\t\t\t\t];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (activeBoxes.length === 0) {\n\t\t\t\t\tlet { boxes } = this.state;\n\t\t\t\t\tdelete boxes['box-ms'];\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\tactiveBoxes: [],\n\t\t\t\t\t\tactiveCaptionGroupCaptions: [],\n\t\t\t\t\t\tboxes\n\t\t\t\t\t});\n\t\t\t\t} else if (this.props?.groups?.length > 0 && e.target.id.includes(GROUP_BOX_PREFIX)) { // Checking if the selected box is a group and then according to the selected box, we update the selections\n\t\t\t\t\tlet { boxes, active} = this.state;\n\t\t\t\t\tconst selections = boxes[e.target.id]?.selections;\n\n\n\t\t\t\t\t// testing if shift pressed and selecting 2 groups together. How it works. \n\t\t\t\t\tif (this.state.activeCaptionGroupCaptions.length > 1 && this.state.isShiftKeyActive) {\n\t\t\t\t\t\t\n\t\t\t\t\t\t// first take all the previous selected data. \n\t\t\t\t\t\t// store all the selections in an array, then add more.\n\t\t\t\t\t\tlet allCaptionsForMultipleSelections = [...this.state.activeCaptionGroupCaptions];\n\t\t\t\t\t\tboxes[e.target.id]?.selections?.forEach(selection => {\n\t\t\t\t\t\t\tconst currentBox = Object.keys(this.state.boxes).find(key => this.state.boxes[key].identifier === selection.metadata.captionIndex);\n\t\t\t\t\t\t\tallCaptionsForMultipleSelections.push(currentBox);\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\t// create new temp box to store both of the groups together\n\n\t\t\t\t\t\tboxes['box-ms'] = getMultipleSelectionCoordinates(boxes, allCaptionsForMultipleSelections);\n\t\t\t\t\t\tboxes['box-ms'].type = 'group';\n\t\t\t\t\t\tboxes['box-ms'].zIndex = 12;\n\t\t\t\t\t\tif (boxes['box-ms'].width === 0 && boxes['box-ms'].height === 0) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst selections = [];\n\t\t\t\t\t\tfor (let box in boxes) {\n\t\t\t\t\t\t\tif (boxes.hasOwnProperty(box) && allCaptionsForMultipleSelections.includes(box)) {\n\t\t\t\t\t\t\t\tselections.push(boxes[box]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (selections.length > 1) {\n\t\t\t\t\t\t\tdata = Object.assign({}, boxes['box-ms'], {\n\t\t\t\t\t\t\t\tmetadata: { type: 'group' },\n\t\t\t\t\t\t\t\tselections\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\tboxes['box-ms'] = data; // new temp box.\n\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\tboxes, // stores all the caption data \n\t\t\t\t\t\t\tactive: 'box-ms', // determine which box comes as active in preview, should be string always\n\t\t\t\t\t\t\tactiveBoxes: ['box-ms'], // we store all selected elements in a multiple selection in this state\n\t\t\t\t\t\t\tactiveCaptionGroupCaptions: allCaptionsForMultipleSelections // store all the captions from all the groups that are currently selected\n\t\t\t\t\t\t});\n\t\t\t\t\t} else if (this.state.activeBoxes.length > 0 && this.state.isShiftKeyActive) {\n\t\t\t\t\t\t// when single element was selected and then we are selecting group\n\t\t\t\t\t\tlet allCaptionsForMultipleSelections = [...this.state.activeBoxes];\n\t\t\t\t\t\tboxes[e.target.id]?.selections?.forEach(selection => {\n\t\t\t\t\t\t\tconst currentBox = Object.keys(this.state.boxes).find(key => this.state.boxes[key].identifier === selection.metadata.captionIndex);\n\t\t\t\t\t\t\tallCaptionsForMultipleSelections.push(currentBox);\n\t\t\t\t\t\t});\n\t\t\t\t\t\tboxes['box-ms'] = getMultipleSelectionCoordinates(boxes, allCaptionsForMultipleSelections);\n\t\t\t\t\t\tboxes['box-ms'].type = 'group';\n\t\t\t\t\t\tboxes['box-ms'].zIndex = 12;\n\t\t\t\t\t\tif (boxes['box-ms'].width === 0 && boxes['box-ms'].height === 0) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst selections = [];\n\t\t\t\t\t\tfor (let box in boxes) {\n\t\t\t\t\t\t\tif (boxes.hasOwnProperty(box) && activeBoxes.includes(box)) {\n\t\t\t\t\t\t\t\tselections.push(boxes[box]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (selections.length > 1) {\n\t\t\t\t\t\t\tdata = Object.assign({}, boxes['box-ms'], {\n\t\t\t\t\t\t\t\tmetadata: { type: 'group' },\n\t\t\t\t\t\t\t\tselections\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\tboxes['box-ms'] = data;\n\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\tactive: 'box-ms',\n\t\t\t\t\t\t\tactiveBoxes: ['box-ms'],\n\t\t\t\t\t\t\tboxes,\n\t\t\t\t\t\t\tactiveCaptionGroupCaptions: allCaptionsForMultipleSelections\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconst tempActiveBoxes =[];\n\t\t\t\t\t\tif (selections?.length > 1) {\n\t\t\t\t\t\t\tselections?.forEach(select => {\n\t\t\t\t\t\t\t\tconst currentBox = Object.keys(this.state.boxes).find(key => this.state.boxes[key].identifier === select.metadata.captionIndex);\n\t\t\t\t\t\t\t\ttempActiveBoxes.push(currentBox);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\tboxes[e.target.id] = getMultipleSelectionCoordinates(boxes, active);\n\t\t\t\t\t\tboxes[e.target.id].type = 'group';\n\t\t\t\t\t\tboxes[e.target.id].zIndex = 12;\n\t\t\t\t\t\tboxes[e.target.id].identifier = e.target.id;\n\t\t\t\t\t\tif (boxes[e.target.id].width === 0 && boxes[e.target.id].height === 0) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (selections?.length > 0) {\n\t\t\t\t\t\t\tdata = Object.assign({}, boxes[e.target.id], {\n\t\t\t\t\t\t\t\tmetadata: { type: 'group' },\n\t\t\t\t\t\t\t\tselections,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\tboxes[e.target.id].metadata = { type: 'group' };\n\t\t\t\t\t\tboxes[e.target.id].selections = selections;\n\n\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\t...this.state,\n\t\t\t\t\t\t\tactive: active,\n\t\t\t\t\t\t\tactiveBoxes: [active],\n\t\t\t\t\t\t\tboxes,\n\t\t\t\t\t\t\tactiveCaptionGroupCaptions: tempActiveBoxes\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\n\n\t\t\t\t\t\n\t\t\t\t} else {\n\t\t\t\t\tboxes['box-ms'] = getMultipleSelectionCoordinates(boxes, activeBoxes);\n\t\t\t\t\tboxes['box-ms'].type = 'group';\n\t\t\t\t\tboxes['box-ms'].zIndex = 12;\n\t\t\t\t\tif (boxes['box-ms'].width === 0 && boxes['box-ms'].height === 0) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tconst selections = [];\n\t\t\t\t\tfor (let box in boxes) {\n\t\t\t\t\t\tif (boxes.hasOwnProperty(box) && activeBoxes.includes(box)) {\n\t\t\t\t\t\t\tselections.push(boxes[box]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (selections.length > 1) {\n\t\t\t\t\t\tdata = Object.assign({}, boxes['box-ms'], {\n\t\t\t\t\t\t\tmetadata: { type: 'group' },\n\t\t\t\t\t\t\tselections\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\tactive: 'box-ms',\n\t\t\t\t\t\tactiveBoxes,\n\t\t\t\t\t\tboxes\n\t\t\t\t\t}, () => {\n\t\t\t\t\t\tthis.startingPositions = {};\n\t\t\t\t\t\tthis.state.activeBoxes.forEach(box => {\n\t\t\t\t\t\t\tthis.startingPositions[box] = this.state.boxes[box];\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tlet { activeBoxes, boxes } = this.state;\n\t\t\t\tdelete boxes['box-ms'];\n\t\t\t\tthis.setState({\n\t\t\t\t\tactive: e.target.id,\n\t\t\t\t\tactiveBoxes: [\n\t\t\t\t\t\te.target.id\n\t\t\t\t\t],\n\t\t\t\t\tboxes\n\t\t\t\t});\n\t\t\t}\n\t\t\tif (e.type === 'contextmenu') {\n\t\t\t\treturn this.props.onSecondaryClick && this.props.onSecondaryClick(e, data);\n\t\t\t}\n\t\t\tthis.props.onSelect && this.props.onSelect(e, data);\n\t\t} else if (e.target?.parentNode?.id?.indexOf('box') >= 0) {\n\t\t\tif (e.target.parentNode.id === '' || e.target.parentNode.id.startsWith('box-ms')) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst boxDimensions = e.target.parentNode.getBoundingClientRect().toJSON();\n\t\t\tlet data = {\n\t\t\t\tx: boxDimensions.x - boundingBoxPosition.x,\n\t\t\t\ty: boxDimensions.y - boundingBoxPosition.y,\n\t\t\t\tleft: boxDimensions.left - boundingBoxPosition.x,\n\t\t\t\ttop: boxDimensions.top - boundingBoxPosition.y,\n\t\t\t\twidth: boxDimensions.width,\n\t\t\t\theight: boxDimensions.height,\n\t\t\t\tnode: e.target.parentNode,\n\t\t\t\tmetadata: this.state.boxes[e.target.parentNode.id].metadata\n\t\t\t};\n\t\t\tif (e.shiftKey || e.metaKey || e.ctrlKey || (e.type === 'contextmenu' && this.state.activeBoxes.length > 1)) {\n\t\t\t\tlet { activeBoxes, boxes } = this.state;\n\t\t\t\tif (activeBoxes.includes(e.target.parentNode.id)) {\n\t\t\t\t\tactiveBoxes = activeBoxes.filter(activeBox => activeBox !== e.target.parentNode.id);\n\t\t\t\t} else if (e.target.id !== 'box-ms') {\n\t\t\t\t\tactiveBoxes = [\n\t\t\t\t\t\t...activeBoxes,\n\t\t\t\t\t\te.target.id\n\t\t\t\t\t];\n\t\t\t\t}\n\t\t\t\tboxes['box-ms'] = getMultipleSelectionCoordinates(boxes, activeBoxes);\n\t\t\t\tboxes['box-ms'].type = 'group';\n\t\t\t\tboxes['box-ms'].zIndex = 12;\n\t\t\t\tconst selections = [];\n\t\t\t\tfor (let box in boxes) {\n\t\t\t\t\tif (boxes.hasOwnProperty(box) && activeBoxes.includes(box)) {\n\t\t\t\t\t\tselections.push(boxes[box]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tdata = Object.assign({}, boxes['box-ms'], {\n\t\t\t\t\tmetadata: { type: 'group' },\n\t\t\t\t\tselections\n\t\t\t\t});\n\t\t\t\tthis.setState({\n\t\t\t\t\tactive: 'box-ms',\n\t\t\t\t\tactiveBoxes,\n\t\t\t\t\tboxes\n\t\t\t\t}, () => {\n\t\t\t\t\tthis.startingPositions = {};\n\t\t\t\t\tthis.state.activeBoxes.forEach(box => {\n\t\t\t\t\t\tthis.startingPositions[box] = this.state.boxes[box];\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tlet { boxes } = this.state;\n\t\t\t\tdelete boxes['box-ms'];\n\t\t\t\tthis.setState({\n\t\t\t\t\tactive: e.target.parentNode.id,\n\t\t\t\t\tactiveBoxes: [\n\t\t\t\t\t\te.target.parentNode.id\n\t\t\t\t\t],\n\t\t\t\t\tboxes\n\t\t\t\t});\n\t\t\t}\n\t\t\tif (e.type === 'contextmenu') {\n\t\t\t\treturn this.props.onSecondaryClick && this.props.onSecondaryClick(e, data);\n\t\t\t}\n\t\t\tthis.props.onSelect && this.props.onSelect(e, data);\n\t\t}\n\t}\n\n\tunSelectBox(e) {\n\t\tif (\n\t\t\tthis.didDragHappen &&\n\t\t\t!(e.type === 'keydown' && (e.key === 'Escape' || e.key === 'Esc'))\n\t\t) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.didResizeHappen || this.didRotateHappen) {\n\t\t\tthis.didResizeHappen = false;\n\t\t\tthis.didRotateHappen = false;\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.props.isEscUnselectActive && (e.type === 'keydown' && (e.key === 'Escape' || e.key === 'Esc'))) {\n\t\t\tthis.setState({\n\t\t\t\t...this.state,\n\t\t\t\tactiveBoxes: [],\n\t\t\t\tactiveCaptionGroupCaptions: [],\n\t\t\t})\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tif (this.props.isDragging || (e.type === 'keydown' && (e.shiftKey || e.altKey || e.ctrlKey || e.metaKey || e.keyCode === 13))) {\n\t\t\treturn;\n\t\t}\n\n\t\t// prevent de-selection on pressing custom keycodes (configured as props)\n\t\tif (\n\t\t\te.type === 'keydown' &&\n\t\t\tArray.isArray(this.props.preventDeselectionKeyCodes) &&\n\t\t\tthis.props.preventDeselectionKeyCodes.includes(e.keyCode)\n\t\t) {\n\t\t\treturn;\n\t\t}\n\t\t\t\t\n\t\tif (\n\t\t\t(e.type === 'keydown' && (e.key === 'Escape' || e.key === 'Esc')) ||\n\t\t\te.target === window ||\n\t\t\t(\n\t\t\t\te.target &&\n\t\t\t\te.target.id?.indexOf('box') === -1 &&\n\t\t\t\te.target.parentNode &&\n\t\t\t\te.target.parentNode.id?.indexOf('box') === -1\n\t\t\t)\n\t\t) {\n\t\t\tif (typeof this.props.isValidUnselect === 'function' && this.props.isValidUnselect(e) === false) {\n\t\t\t\tthis.setPreventShortcutEvents(true);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst { boxes } = this.state;\n\t\t\tdelete boxes['box-ms'];\n\t\t\tthis.setState({\n\t\t\t\tactive: '',\n\t\t\t\tactiveBoxes: [],\n\t\t\t\tboxes,\n\t\t\t\tpreventShortcutEvents: false,\n\t\t\t\tactiveCaptionGroupCaptions: [],\n\t\t\t});\n\t\t\tthis.props.onUnselect && this.props.onUnselect(e);\n\t\t}\n\t}\n\n\tdragStartHandler(e, data) {\n\t\tthis.setState({\n\t\t\tactive: data.node.id,\n\t\t\tdragging: true\n\t\t});\n\n\t\tlet newData = Object.assign({}, data);\n\t\tif (this.state.boxes?.[data.node.id]?.metadata && data.node?.id?.indexOf(GROUP_BOX_PREFIX) < 0 && (this.state.activeCaptionGroupCaptions.length <= 0 && this.state.active !== 'box-ms')) { // Just updating if the group is present then we skip metadata as we use to to update single captions\n\t\t\tnewData.metadata = this.state.boxes[data.node.id].metadata;\n\t\t}\n\t\tif (data.type && data.type === 'group') {\n\t\t\tif (this.state.activeCaptionGroupCaptions.length > 0 && this.state.active === 'box-ms' && data.node?.id === 'box-ms') { // so here we don't have all the boxes in activeBoxes for group so now we store it in captionGroupsToIndexMap and we traverse it\n\t\t\t\tnewData.selections = this.state.activeCaptionGroupCaptions?.map(box => {\n\t\t\t\t\treturn Object.assign({}, this.state.boxes[box]);\n\t\t\t\t});\n\t\t\t} else if (data.node?.id?.indexOf(GROUP_BOX_PREFIX) >= 0) { // so here we don't have all the boxes in activeBoxes for group so now we store it in captionGroupsToIndexMap and we traverse it\n\t\t\t\tnewData.selections = this.state.captionGroupsToIndexMap?.[data.node.id]?.map(index => {\n\t\t\t\t\tconst currentBox = Object.keys(this.state.boxes).find(key => this.state.boxes[key].identifier === index);\n\t\t\t\t\treturn Object.assign({}, this.state.boxes[currentBox]);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tnewData.selections = this.state.activeBoxes.map(box => {\n\t\t\t\t\treturn Object.assign({}, this.state.boxes[box]);\n\t\t\t\t});\n\t\t\t}\n\t\t} else if (!(e.shiftKey || e.metaKey || e.ctrlKey)) {\n\t\t\tthis.setState({\n\t\t\t\tactiveBoxes: [\n\t\t\t\t\te.target.parentNode.id\n\t\t\t\t],\n\t\t\t});\n\t\t}\n\n\t\tthis.props.onDragStart && this.props.onDragStart(e, newData);\n\n\t\t// Update starting positions so we can use it to update when group resize happens\n\t\tif (data.type && data.type === 'group') {\n\t\t\tthis.startingPositions = {};\n\t\t\tif (this.state.active === 'box-ms' && data.node?.id === 'box-ms') { // so here we don't have all the boxes in activeBoxes for group so now we store it in captionGroupsToIndexMap and we traverse it\n\t\t\t\tif (this.state.activeBoxes.length > 1) { // if one element and group is selected\n\t\t\t\t\tthis.state.activeBoxes.forEach(box => {\n\t\t\t\t\t\tif (box.startsWith(GROUP_BOX_PREFIX) || box === 'box-ms') { // if more than 1 group is selected\n\t\t\t\t\t\t\tthis.state.activeCaptionGroupCaptions?.forEach(activeBox => {\n\t\t\t\t\t\t\t\tthis.startingPositions[activeBox] = this.state.boxes[activeBox];\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.startingPositions[box] = this.state.boxes[box];\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t} else if (this.state.activeBoxes.length === 1 && this.state.activeBoxes[0] !== 'box-ms' && this.state.activeBoxes[0].indexOf(GROUP_BOX_PREFIX) < 0) {\n\t\t\t\t\tthis.startingPositions = {};\n\t\t\t\t\tconst boxKey = this.state.activeBoxes[0];\n\t\t\t\t\tthis.startingPositions[boxKey] = Object.assign({}, this.state.boxes[boxKey]);\n\t\t\t\t} else { // if multiple selection and only groups selected\n\t\t\t\t\tthis.state.activeCaptionGroupCaptions.forEach(box => {\n\t\t\t\t\t\tthis.startingPositions[box] = this.state.boxes[box];\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t} else if (data.node?.id?.indexOf(GROUP_BOX_PREFIX) >= 0) {\n\t\t\t\tthis.state.captionGroupsToIndexMap[data.node.id].forEach(index => {\n\t\t\t\t\tconst currentBox = Object.keys(this.state.boxes).find(key => this.state.boxes[key].identifier === index);\n\t\t\t\t\tthis.startingPositions[currentBox] = this.state.boxes[currentBox];\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tthis.state.activeBoxes.forEach(activeBox => {\n\t\t\t\t\tthis.startingPositions[activeBox] = this.state.boxes[activeBox];\n\t\t\t\t});\n\t\t\t}\n\t\t} else {\n\t\t\tthis.startingPositions = {};\n\t\t\tthis.startingPositions[data.node.id] = Object.assign({}, this.state.boxes[data.node.id]);\n\t\t}\n\t}\n\n\tdragHandler(e, data) {\n\t\tlet newData;\n\t\tif (this.state.dragging) {\n\t\t\tnewData = Object.assign({}, data);\n\t\t\tif ((this.state.boxes?.[this.state.active]?.metadata && this.state.active?.indexOf(GROUP_BOX_PREFIX) < 0) && (this.state.activeCaptionGroupCaptions.length <= 0 && this.state.active !== 'box-ms')) {\n\t\t\t\tnewData.metadata = this.state.boxes[this.state.active].metadata;\n\t\t\t}\n\t\t\tif (data.type && data.type === 'group') {\n\t\t\t\tnewData.selections = [];\n\n\t\t\t\tif (this.state.active === 'box-ms' && data.node?.id === 'box-ms') { // so here we don't have all the boxes in activeBoxes for group so now we store it in captionGroupsToIndexMap and we traverse it\n\t\t\t\t\tif (this.state.activeBoxes.length > 1) { // if one element and group is selected\n\t\t\t\t\t\tthis.state.activeBoxes.forEach(box => {\n\t\t\t\t\t\t\tif (box.startsWith(GROUP_BOX_PREFIX) || box === 'box-ms') {\n\t\t\t\t\t\t\t\tthis.state.activeCaptionGroupCaptions?.forEach(activeBox => {\n\t\t\t\t\t\t\t\t\tconst currentBox = Object.assign({}, this.state.boxes[activeBox], {\n\t\t\t\t\t\t\t\t\t\tdeltaX: data.deltaX,\n\t\t\t\t\t\t\t\t\t\tdeltaY: data.deltaY,\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\tnewData.selections.push(currentBox);\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tconst currentBox = Object.assign({}, this.state.boxes[box], {\n\t\t\t\t\t\t\t\t\tdeltaX: data.deltaX,\n\t\t\t\t\t\t\t\t\tdeltaY: data.deltaY,\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tnewData.selections.push(currentBox);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t} else if (this.state.activeBoxes.length === 1 && this.state.activeBoxes[0] !== 'box-ms' && this.state.activeBoxes[0].indexOf(GROUP_BOX_PREFIX) < 0) {\n\t\t\t\t\t\tconst currentBox = Object.assign({}, this.state.boxes[this.state.activeBoxes[0]], {\n\t\t\t\t\t\t\tdeltaX: data.deltaX,\n\t\t\t\t\t\t\tdeltaY: data.deltaY,\n\t\t\t\t\t\t});\n\t\t\t\t\t\tnewData.selections.push(currentBox);\n\t\t\t\t\t} else { // if multiple selection and only groups selected\n\t\t\t\t\t\tthis.state.activeCaptionGroupCaptions.forEach(activeBox => {\n\t\t\t\t\t\t\tconst currentBox = Object.assign({}, this.state.boxes[activeBox], {\n\t\t\t\t\t\t\t\tdeltaX: data.deltaX,\n\t\t\t\t\t\t\t\tdeltaY: data.deltaY,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tnewData.selections.push(currentBox);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t} else if (data.node?.id?.indexOf(GROUP_BOX_PREFIX) >= 0) {\n\t\t\t\t\tthis.state.captionGroupsToIndexMap[data.node.id].forEach(captionIndex => {\n\t\t\t\t\t\tconst currentBoxKey = Object.keys(this.state.boxes).find(key => this.state.boxes[key].identifier === captionIndex);\n\t\t\t\t\t\tconst currentBox = Object.assign({}, this.state.boxes[currentBoxKey], {\n\t\t\t\t\t\t\tdeltaX: data.deltaX,\n\t\t\t\t\t\t\tdeltaY: data.deltaY,\n\t\t\t\t\t\t});\n\t\t\t\t\t\tnewData.selections.push(currentBox);\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tthis.state.activeBoxes.forEach(activeBox => {\n\t\t\t\t\t\tconst currentBox = Object.assign({}, this.state.boxes[activeBox], {\n\t\t\t\t\t\t\tdeltaX: data.deltaX,\n\t\t\t\t\t\t\tdeltaY: data.deltaY,\n\t\t\t\t\t\t});\n\t\t\t\t\t\tnewData.selections.push(currentBox);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// this.props.onDrag && this.props.onDrag(e, newData);\n\t\t}\n\n\t\tlet boxes = null;\n\t\tlet guides = null;\n\t\tlet hoverGroupedData = [];\n\n\t\tif (this.state.active === 'box-ms' && data.node?.id === 'box-ms') { // so here we don't have all the boxes in activeBoxes for group so now we store it in captionGroupsToIndexMap and we traverse it\n\t\t\tif (this.state.activeBoxes.length > 1) { // if one element and group is selected\n\t\t\t\tthis.state.activeBoxes.forEach(box => {\n\t\t\t\t\tif (box.startsWith(GROUP_BOX_PREFIX) || box === 'box-ms') {\n\t\t\t\t\t\tthis.state.activeCaptionGroupCaptions?.forEach(activeBox => {\n\t\t\t\t\t\t\thoverGroupedData.push(activeBox);\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\thoverGroupedData.push(box);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else if (this.state.activeBoxes.length === 1 && this.state.activeBoxes[0] !== 'box-ms' && this.state.activeBoxes[0].indexOf(GROUP_BOX_PREFIX) < 0) {\n\t\t\t\thoverGroupedData.push(this.state.activeBoxes[0]);\n\t\t\t} else { // if multiple selection and only groups selected\n\t\t\t\tthis.state.activeCaptionGroupCaptions.forEach(activeBox => {\n\t\t\t\t\thoverGroupedData.push(activeBox);\n\t\t\t\t});\n\t\t\t}\n\t\t} else if (data.node?.id?.indexOf(GROUP_BOX_PREFIX) >= 0) {\t\n\t\t\tthis.state.captionGroupsToIndexMap[data.node.id].forEach(captionIndex => {\n\t\t\t\tconst currentBoxKey = Object.keys(this.state.boxes).find(key => this.state.boxes[key].identifier === captionIndex);\n\t\t\t\thoverGroupedData.push(currentBoxKey);\n\t\t\t});\n\t\t} else {\n\t\t\tthis.state.activeBoxes.forEach(activeBox => {\n\t\t\t\thoverGroupedData.push(activeBox);\n\t\t\t});\n\t\t}\n\n\t\tif (data.type && data.type === 'group') {\n\t\t\tboxes = {};\n\t\t\tfor (let box in this.state.boxes) {\n\t\t\t\tif (this.state.boxes.hasOwnProperty(box)) {\n\t\t\t\t\tif (hoverGroupedData.includes(box)) {\n\t\t\t\t\t\tboxes[box] = Object.assign({}, this.state.boxes[box], {\n\t\t\t\t\t\t\tx: this.startingPositions[box].x + data.deltaX,\n\t\t\t\t\t\t\ty: this.startingPositions[box].y + data.deltaY,\n\t\t\t\t\t\t\tleft: this.startingPositions[box].left + data.deltaX,\n\t\t\t\t\t\t\ttop: this.startingPositions[box].top + data.deltaY,\n\t\t\t\t\t\t\tdeltaX: data.deltaX,\n\t\t\t\t\t\t\tdeltaY: data.deltaY,\n\t\t\t\t\t\t});\n\t\t\t\t\t} else if (this.state.activeBoxes?.includes(box) && this.state.active?.indexOf(GROUP_BOX_PREFIX) < 0 && this.state.activeCaptionGroupCaptions.length <= 0) {\n\t\t\t\t\t\tboxes[box] = Object.assign({}, this.state.boxes[box], {\n\t\t\t\t\t\t\tx: this.startingPositions[box].x + data?.deltaX ?? 0,\n\t\t\t\t\t\t\ty: this.startingPositions[box].y + data?.deltaY ?? 0,\n\t\t\t\t\t\t\tleft: this.startingPositions[box].left + data?.deltaX ?? 0,\n\t\t\t\t\t\t\ttop: this.startingPositions[box].top + data?.deltaY ?? 0,\n\t\t\t\t\t\t\tdeltaX: data.deltaX,\n\t\t\t\t\t\t\tdeltaY: data.deltaY,\n\t\t\t\t\t\t});\n\t\t\t\t\t} else if (box === 'box-ms' || box?.indexOf(GROUP_BOX_PREFIX) >= 0) {\n\t\t\t\t\t\tboxes[box] = Object.assign({}, data);\n\t\t\t\t\t\tdelete boxes[box].deltaX;\n\t\t\t\t\t\tdelete boxes[box].deltaY;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tboxes[box] = this.state.boxes[box];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tguides = Object.keys(this.state.guides).map(guide => {\n\t\t\t\tif (this.state.active?.indexOf(GROUP_BOX_PREFIX) >= 0 || (this.state.activeCaptionGroupCaptions.length > 0 && this.state.active === 'box-ms')) { // Checking it for group inside activeCaptionGroupCaptions state instead of activeBoxes\n\t\t\t\t\tif (this.state.activeCaptionGroupCaptions.includes(guide)) {\n\t\t\t\t\t\treturn Object.assign({}, this.state.guides[guide], {\n\t\t\t\t\t\t\tx: calculateGuidePositions(boxes[guide], 'x'),\n\t\t\t\t\t\t\ty: calculateGuidePositions(boxes[guide], 'y')\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (this.state.activeBoxes.includes(guide)) {\n\t\t\t\t\t\treturn Object.assign({}, this.state.guides[guide], {\n\t\t\t\t\t\t\tx: calculateGuidePositions(boxes[guide], 'x'),\n\t\t\t\t\t\t\ty: calculateGuidePositions(boxes[guide], 'y')\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn this.state.guides[guide];\n\t\t\t});\n\t\t} else {\n\t\t\tboxes = Object.assign({}, this.state.boxes, {\n\t\t\t\t[data.node.id]: Object.assign({}, this.state.boxes[data.node.id], {\n\t\t\t\t\tx: data.x,\n\t\t\t\t\ty: data.y,\n\t\t\t\t\tleft: data.left,\n\t\t\t\t\ttop: data.top,\n\t\t\t\t\twidth: data.width,\n\t\t\t\t\theight: data.height,\n\t\t\t\t\tdeltaX: data.deltaX,\n\t\t\t\t\tdeltaY: data.deltaY,\n\t\t\t\t})\n\t\t\t});\n\n\t\t\tguides = Object.assign({}, this.state.guides, {\n\t\t\t\t[data.node.id]: Object.assign({}, this.state.guides[data.node.id], {\n\t\t\t\t\tx: calculateGuidePositions(boxes[data.node.id], 'x'),\n\t\t\t\t\ty: calculateGuidePositions(boxes[data.node.id], 'y')\n\t\t\t\t})\n\t\t\t});\n\t\t}\n\n\t\tthis.setState({\n\t\t\tguidesActive: true,\n\t\t\tboxes,\n\t\t\tguides\n\t\t}, () => {\n\t\t\tif (this.props.snap && this.state.active && this.state.guides && data.type !== 'group') {\n\t\t\t\tconst match = proximityListener(this.state.active, this.state.guides);\n\t\t\t\tlet newActiveBoxLeft = this.state.boxes[this.state.active].left;\n\t\t\t\tlet newActiveBoxTop = this.state.boxes[this.state.active].top;\n\t\t\t\tfor (let axis in match) {\n\t\t\t\t\tconst { activeBoxGuides, matchedArray, proximity } = match[axis];\n\t\t\t\t\tconst activeBoxProximityIndex = proximity.activeBoxIndex;\n\t\t\t\t\tconst matchedBoxProximityIndex = proximity.matchedBoxIndex;\n\n\t\t\t\t\tif (axis === 'x') {\n\t\t\t\t\t\tif (activeBoxGuides[activeBoxProximityIndex] > matchedArray[matchedBoxProximityIndex]) {\n\t\t\t\t\t\t\tnewActiveBoxLeft = this.state.boxes[this.state.active].left - proximity.value;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tnewActiveBoxLeft = this.state.boxes[this.state.active].left + proximity.value;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (activeBoxGuides[activeBoxProximityIndex] > matchedArray[matchedBoxProximityIndex]) {\n\t\t\t\t\t\t\tnewActiveBoxTop = this.state.boxes[this.state.active].top - proximity.value;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tnewActiveBoxTop = this.state.boxes[this.state.active].top + proximity.value;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tconst boxes = Object.assign({}, this.state.boxes, {\n\t\t\t\t\t[this.state.active]: Object.assign({}, this.state.boxes[this.state.active], {\n\t\t\t\t\t\tleft: newActiveBoxLeft,\n\t\t\t\t\t\ttop: newActiveBoxTop\n\t\t\t\t\t})\n\t\t\t\t});\n\t\t\t\tconst guides = Object.assign({}, this.state.guides, {\n\t\t\t\t\t[this.state.active]: Object.assign({}, this.state.guides[this.state.active], {\n\t\t\t\t\t\tx: calculateGuidePositions(boxes[this.state.active], 'x'),\n\t\t\t\t\t\ty: calculateGuidePositions(boxes[this.state.active], 'y')\n\t\t\t\t\t})\n\t\t\t\t})\n\n\t\t\t\tconst activeBox = {\n\t\t\t\t\tleft: this.state.boxes[this.state.active].left,\n\t\t\t\t\ttop: this.state.boxes[this.state.active].top,\n\t\t\t\t\tx: this.state.boxes[this.state.active]?.x || 0,\n\t\t\t\t\ty: this.state.boxes[this.state.active]?.y || 0,\n\t\t\t\t}\n\n\t\t\t\tObject.keys(guides).map(box => {\n\t\t\t\t\tguides?.[box]?.x.map(position => {\n\t\t\t\t\t\tif (match?.x?.intersection === position) {\n\t\t\t\t\t\t\tactiveBox.left = newActiveBoxLeft;\n\t\t\t\t\t\t\tactiveBox.x = newActiveBoxLeft;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\tguides?.[box]?.y.map(position => {\n\t\t\t\t\t\tif (match?.y?.intersection === position) {\n\t\t\t\t\t\t\tactiveBox.top = newActiveBoxTop;\n\t\t\t\t\t\t\tactiveBox.y = newActiveBoxTop;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\n\t\t\t\tnewData = Object.assign({}, newData, {\n\t\t\t\t\t// calculating starting position: (newData.x - newData.deltaX) for snapped delta\n\t\t\t\t\tdeltaX: activeBox?.x - (newData?.x - newData?.deltaX) || 0,\n\t\t\t\t\tdeltaY: activeBox?.y - (newData?.y - newData?.deltaY) || 0,\n\t\t\t\t\t...activeBox\n\t\t\t\t});\n\n\t\t\t\tconst newBoxes = Object.assign({}, this.state.boxes, {\n\t\t\t\t\t[this.state.active] : Object.assign({}, this.state.boxes[this.state.active], {\n\t\t\t\t\t\t...activeBox,\n\t\t\t\t\t\tdeltaX: newData.deltaX,\n\t\t\t\t\t\tdeltaY: newData.deltaY,\n\t\t\t\t\t})\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tthis.setState({\n\t\t\t\t\tboxes: newBoxes,\n\t\t\t\t\tguides,\n\t\t\t\t\tmatch,\n\t\t\t\t\tactiveBoxSnappedPosition: Object.assign({}, {\n\t\t\t\t\t\tdeltaX: activeBox?.x - (newData?.x - newData.deltaX),\n\t\t\t\t\t\tdeltaY: activeBox?.y - (newData?.y - newData.deltaY),\n\t\t\t\t\t\t...activeBox\n\t\t\t\t\t})\n\t\t\t\t});\n\t\t\t}\n\t\t\tthis.state.dragging && this.props.onDrag && this.props.onDrag(e, newData);\n\t\t});\n\t}\n\n\tdragEndHandler(e, data) {\n\t\tthis.setState({\n\t\t\tdragging: false,\n\t\t\tguidesActive: false\n\t\t});\n\n\t\tlet newData = Object.assign({}, data);\n\t\tif ((this.state.boxes?.[this.state.active]?.metadata && this.state.active?.indexOf(GROUP_BOX_PREFIX) < 0) && (this.state.activeCaptionGroupCaptions.length <= 0 && this.state.active !== 'box-ms')) {\n\t\t\tnewData.metadata = this.state.boxes[this.state.active].metadata;\n\t\t}\n\n\t\tif (data.type && data.type === 'group') {\n\t\t\tnewData.selections = [];\n\t\t\tif (this.state.active === 'box-ms' && data.node?.id === 'box-ms') { // so here we don't have all the boxes in activeBoxes for group so now we store it in captionGroupsToIndexMap and we traverse it\n\t\t\t\tif (this.state.activeBoxes.length > 1) { // if one element and group is selected\n\t\t\t\t\tthis.state.activeBoxes.forEach(box => {\n\t\t\t\t\t\tif (box.startsWith(GROUP_BOX_PREFIX) || box === 'box-ms') {\n\t\t\t\t\t\t\tthis.state.activeCaptionGroupCaptions?.forEach(activeBox => {\n\t\t\t\t\t\t\t\tconst currentBox = Object.assign({}, this.state.boxes[activeBox], {\n\t\t\t\t\t\t\t\t\tdeltaX: data.deltaX,\n\t\t\t\t\t\t\t\t\tdeltaY: data.deltaY,\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tnewData.selections.push(currentBox);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconst currentBox = Object.assign({}, this.state.boxes[box], {\n\t\t\t\t\t\t\t\tdeltaX: data.deltaX,\n\t\t\t\t\t\t\t\tdeltaY: data.deltaY,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tnewData.selections.push(currentBox);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t} else if (this.state.activeBoxes.length === 1 && this.state.activeBoxes[0] !== 'box-ms' && this.state.activeBoxes[0].indexOf(GROUP_BOX_PREFIX) < 0) {\n\t\t\t\t\tconst currentBox = Object.assign({}, this.state.boxes[this.state.activeBoxes[0]], {\n\t\t\t\t\t\tdeltaX: data.deltaX,\n\t\t\t\t\t\tdeltaY: data.deltaY,\n\t\t\t\t\t});\n\t\t\t\t\tnewData.selections.push(currentBox);\n\t\t\t\t} else { // if multiple selection and only groups selected\n\t\t\t\t\tthis.state.activeCaptionGroupCaptions.forEach(activeBox => {\n\t\t\t\t\t\tconst currentBox = Object.assign({}, this.state.boxes[activeBox], {\n\t\t\t\t\t\t\tdeltaX: data.deltaX,\n\t\t\t\t\t\t\tdeltaY: data.deltaY,\n\t\t\t\t\t\t});\n\t\t\t\t\t\tnewData.selections.push(currentBox);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t} else if (data.node?.id?.indexOf(GROUP_BOX_PREFIX) >= 0) {\n\t\t\t\tthis.state.captionGroupsToIndexMap[data.node.id].forEach(captionIndex => {\n\t\t\t\t\tconst currentBoxKey = Object.keys(this.state.boxes).find(key => this.state.boxes[key].identifier === captionIndex);\n\t\t\t\t\tconst currentBox = Object.assign({}, this.state.boxes[currentBoxKey], {\n\t\t\t\t\t\tdeltaX: data.deltaX,\n\t\t\t\t\t\tdeltaY: data.deltaY,\n\t\t\t\t\t});\n\t\t\t\t\tnewData.selections.push(currentBox);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tthis.state.activeBoxes.forEach(activeBox => {\n\t\t\t\t\tconst currentBox = Object.assign({}, this.state.boxes[activeBox], {\n\t\t\t\t\t\tdeltaX: data.deltaX,\n\t\t\t\t\t\tdeltaY: data.deltaY,\n\t\t\t\t\t});\n\t\t\t\t\tnewData.selections.push(currentBox);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tif (this.props.snap && this.state.active && this.state.guides && data.type !== 'group') {\n\t\t\tnewData = Object.assign({}, newData, {\n\t\t\t\t...this.state.activeBoxSnappedPosition\n\t\t\t});\n\t\t}\n\t\tif (this.state.activeCaptionGroupCaptions.length > 0 && this.state.active === 'box-ms') {\n\t\t\tthis.setState({\n\t\t\t\t...this.state,\n\t\t\t\tactive: '',\n\t\t\t\tactiveBoxes: [],\n\t\t\t\tactiveCaptionGroupCaptions: [],\n\t\t\t});\n\t\t};\n\t\tthis.props.onDragEnd && this.props.onDragEnd(e, newData);\n\t}\n\n\tresizeStartHandler(e, data) {\n\t\tthis.setState({\n\t\t\tactive: data.node.id,\n\t\t\tresizing: true\n\t\t});\n\t\tthis.didResizeHappen = true;\n\t\tlet newData = Object.assign({}, data);\n\t\tif (this.state.boxes[data.node.id].metadata) {\n\t\t\tnewData.metadata = this.state.boxes[data.node.id].metadata;\n\t\t}\n\t\tthis.props.onResizeStart && this.props.onResizeStart(e, newData);\n\n\t\t// Update starting positions so we can use it to update when group resize happens\n\t\tif (data.type && data.type === 'group') {\n\t\t\tthis.startingPositions = {};\n\t\t\tif (this.state.active?.indexOf(GROUP_BOX_PREFIX) >= 0 || (this.state.activeCaptionGroupCaptions.length > 0 && this.state.active === 'box-ms')) {\n\t\t\t\tthis.state.activeCaptionGroupCaptions.forEach(box => {\n\t\t\t\t\tthis.startingPositions[box] = this.state.boxes[box];\n\t\t\t\t});\n\t\t\t\tthis.startingPositions[this.state.active] = this.state.boxes[this.state.active];\n\t\t\t} else {\n\t\t\t\tthis.state.activeBoxes.forEach(box => {\n\t\t\t\t\tthis.startingPositions[box] = this.state.boxes[box];\n\t\t\t\t});\n\t\t\t\tthis.startingPositions['box-ms'] = this.state.boxes['box-ms'];\n\t\t\t}\n\t\t} else {\n\t\t\tthis.startingPositions = {};\n\t\t\tthis.startingPositions[this.state.active] = this.state.boxes[this.state.active];\n\t\t}\n\t}\n\n\tresizeHandler(e, data) {\n\t\tif (this.state.resizing) {\n\t\t\tlet newData = Object.assign({}, data);\n\t\t\tif (this.state.boxes?.[this.state.active]?.metadata && this.state.active?.indexOf(GROUP_BOX_PREFIX) < 0 && (this.state.activeCaptionGroupCaptions.length <= 0 && this.state.active !== 'box-ms')) {\n\t\t\t\tnewData.metadata = this.state.boxes[this.state.active].metadata;\n\t\t\t}\n\t\t\tthis.props.onResize && this.props.onResize(e, newData);\n\t\t}\n\n\t\tlet boxes = null;\n\t\tlet guides = null;\n\t\tif (data.type && data.type === 'group') {\n\t\t\tboxes = {};\n\t\t\tconst boundingBox = this.getBoundingBoxElement();\n\t\t\tconst boundingBoxPosition = getOffsetCoordinates(boundingBox.current);\n\t\t\tfor (let box in this.state.boxes) {\n\t\t\t\tif (this.state.boxes.hasOwnProperty(box)) {\n\t\t\t\t\tif (this.state.activeCaptionGroupCaptions.includes(box)) {\n\t\t\t\t\t\t// Adding bounding box's starting position\n\t\t\t\t\t\t// This is because it's added only to the group's box and not the individual members of the group\n\t\t\t\t\t\tif ((this.startingPositions[this.state.active] && this.state.active?.indexOf(GROUP_BOX_PREFIX) >= 0) || (this.state.activeCaptionGroupCaptions.length > 0 && this.state.active === 'box-ms')) { // condition for group, instead of activeBoxes will use the correct inside boxes to resize them\n\t\t\t\t\t\t\tconst widthDiff = ((data.deltaW / Math.abs(this.startingPositions[this.state.active].width)) * Math.abs(this.startingPositions[box].width));\n\t\t\t\t\t\t\tconst heightDiff = ((data.deltaH / Math.abs(this.startingPositions[this.state.active].height)) * Math.abs(this.startingPositions[box].height));\n\n\t\t\t\t\t\t\tconst initialDeltaXPercentage = (this.startingPositions[box].x - this.startingPositions[this.state.active].x) / this.startingPositions[this.state.active].width;\n\t\t\t\t\t\t\tconst xDiff = data.deltaX + initialDeltaXPercentage * (data.deltaW);\n\n\t\t\t\t\t\t\tconst initialDeltaYPercentage = (this.startingPositions[box].y - this.startingPositions[this.state.active].y) / this.startingPositions[this.state.active].height;\n\t\t\t\t\t\t\tconst yDiff = data.deltaY + initialDeltaYPercentage * (data.deltaH);\n\n\t\t\t\t\t\t\tboxes[box] = Object.assign({}, this.state.boxes[box], {\n\t\t\t\t\t\t\t\tx: boundingBoxPosition.x + this.startingPositions[box].x + xDiff,\n\t\t\t\t\t\t\t\ty: boundingBoxPosition.y + this.startingPositions[box].y + yDiff,\n\t\t\t\t\t\t\t\tleft: boundingBoxPosition.left + this.startingPositions[box].left + xDiff,\n\t\t\t\t\t\t\t\ttop: boundingBoxPosition.top + this.startingPositions[box].top + yDiff,\n\t\t\t\t\t\t\t\twidth: this.startingPositions[box].width + widthDiff,\n\t\t\t\t\t\t\t\theight: this.startingPositions[box].height + heightDiff,\n\t\t\t\t\t\t\t\tdeltaW: widthDiff,\n\t\t\t\t\t\t\t\tdeltaH: heightDiff,\n\t\t\t\t\t\t\t\tdeltaX: boundingBoxPosition.x + xDiff,\n\t\t\t\t\t\t\t\tdeltaY: boundingBoxPosition.y + yDiff,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tboxes[box] = Object.assign({}, this.state.boxes[box], {\n\t\t\t\t\t\t\t\tx: boundingBoxPosition.x + this.startingPositions[box].x + data.deltaX,\n\t\t\t\t\t\t\t\ty: boundingBoxPosition.y + this.startingPositions[box].y + data.deltaY,\n\t\t\t\t\t\t\t\tleft: boundingBoxPosition.left + this.startingPositions[box].left + data.deltaX,\n\t\t\t\t\t\t\t\ttop: boundingBoxPosition.top + this.startingPositions[box].top + data.deltaY,\n\t\t\t\t\t\t\t\twidth: this.startingPositions[box].width + data.deltaW,\n\t\t\t\t\t\t\t\theight: this.startingPositions[box].height + data.deltaH\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (this.state.activeBoxes.includes(box)) {\n\t\t\t\t\t\t// Adding bounding box's starting position\n\t\t\t\t\t\t// This is because it's added only to the group's box and not the individual members of the group\n\t\t\t\t\t\t if (this.startingPositions['box-ms']) {\n\t\t\t\t\t\t\tconst widthDiff = ((data.deltaW / Math.abs(this.startingPositions['box-ms'].width)) * Math.abs(this.startingPositions[box].width));\n\t\t\t\t\t\t\tconst heightDiff = ((data.deltaH / Math.abs(this.startingPositions['box-ms'].height)) * Math.abs(this.startingPositions[box].height));\n\n\t\t\t\t\t\t\tconst initialDeltaXPercentage = (this.startingPositions[box].x - this.startingPositions['box-ms'].x) / this.startingPositions['box-ms'].width;\n\t\t\t\t\t\t\tconst xDiff = data.deltaX + initialDeltaXPercentage * (data.deltaW);\n\n\t\t\t\t\t\t\tconst initialDeltaYPercentage = (this.startingPositions[box].y - this.startingPositions['box-ms'].y) / this.startingPositions['box-ms'].height;\n\t\t\t\t\t\t\tconst yDiff = data.deltaY + initialDeltaYPercentage * (data.deltaH);\n\n\t\t\t\t\t\t\tboxes[box] = Object.assign({}, this.state.boxes[box], {\n\t\t\t\t\t\t\t\tx: boundingBoxPosition.x + this.startingPositions[box].x + xDiff,\n\t\t\t\t\t\t\t\ty: boundingBoxPosition.y + this.startingPositions[box].y + yDiff,\n\t\t\t\t\t\t\t\tleft: boundingBoxPosition.left + this.startingPositions[box].left + xDiff,\n\t\t\t\t\t\t\t\ttop: boundingBoxPosition.top + this.startingPositions[box].top + yDiff,\n\t\t\t\t\t\t\t\twidth: this.startingPositions[box].width + widthDiff,\n\t\t\t\t\t\t\t\theight: this.startingPositions[box].height + heightDiff,\n\t\t\t\t\t\t\t\tdeltaW: widthDiff,\n\t\t\t\t\t\t\t\tdeltaH: heightDiff,\n\t\t\t\t\t\t\t\tdeltaX: boundingBoxPosition.x + xDiff,\n\t\t\t\t\t\t\t\tdeltaY: boundingBoxPosition.y + yDiff,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tboxes[box] = Object.assign({}, this.state.boxes[box], {\n\t\t\t\t\t\t\t\tx: boundingBoxPosition.x + this.startingPositions[box].x + data.deltaX,\n\t\t\t\t\t\t\t\ty: boundingBoxPosition.y + this.startingPositions[box].y + data.deltaY,\n\t\t\t\t\t\t\t\tleft: boundingBoxPosition.left + this.startingPositions[box].left + data.deltaX,\n\t\t\t\t\t\t\t\ttop: boundingBoxPosition.top + this.startingPositions[box].top + data.deltaY,\n\t\t\t\t\t\t\t\twidth: this.startingPositions[box].width + data.deltaW,\n\t\t\t\t\t\t\t\theight: this.startingPositions[box].height + data.deltaH,\n\t\t\t\t\t\t\t\tdeltaX: boundingBoxPosition.x + data.deltaX,\n\t\t\t\t\t\t\t\tdeltaY: boundingBoxPosition.y + data.deltaY,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (box === 'box-ms' || box?.indexOf(GROUP_BOX_PREFIX) >= 0) {\n\t\t\t\t\t\tboxes[box] = Object.assign({}, data);\n\t\t\t\t\t\tdelete boxes[box]?.deltaX;\n\t\t\t\t\t\tdelete boxes[box]?.deltaY;\n\t\t\t\t\t\tdelete boxes[box]?.deltaW;\n\t\t\t\t\t\tdelete boxes[box]?.deltaH;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tboxes[box] = this.state.boxes[box];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tguides = Object.keys(this.state.guides).map(guide => {\n\t\t\t\tif (this.state.active?.indexOf(GROUP_BOX_PREFIX) >= 0 || (this.state.activeCaptionGroupCaptions.length > 0 && this.state.active === 'box-ms')) {\n\t\t\t\t\tif (this.state.activeCaptionGroupCaptions.includes(guide)) {\n\t\t\t\t\t\treturn Object.assign({}, this.state.guides[guide], {\n\t\t\t\t\t\t\tx: calculateGuidePositions(boxes[guide], 'x'),\n\t\t\t\t\t\t\ty: calculateGuidePositions(boxes[guide], 'y')\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (this.state.activeBoxes.includes(guide)) {\n\t\t\t\t\t\treturn Object.assign({}, this.state.guides[guide], {\n\t\t\t\t\t\t\tx: calculateGuidePositions(boxes[guide], 'x'),\n\t\t\t\t\t\t\ty: calculateGuidePositions(boxes[guide], 'y')\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t} else {\n\t\t\tboxes = Object.assign({}, this.state.boxes, {\n\t\t\t\t[data.node.id]: Object.assign({}, this.state.boxes[data.node.id], {\n\t\t\t\t\tx: data.x,\n\t\t\t\t\ty: data.y,\n\t\t\t\t\tleft: data.left,\n\t\t\t\t\ttop: data.top,\n\t\t\t\t\twidth: data.width,\n\t\t\t\t\theight: data.height,\n\t\t\t\t})\n\t\t\t});\n\t\t\tguides = Object.assign({}, this.state.guides, {\n\t\t\t\t[data.node.id]: Object.assign({}, this.state.guides[data.node.id], {\n\t\t\t\t\tx: calculateGuidePositions(boxes[data.node.id], 'x'),\n\t\t\t\t\ty: calculateGuidePositions(boxes[data.node.id], 'y')\n\t\t\t\t})\n\t\t\t});\n\t\t}\n\n\t\tthis.setState({\n\t\t\tboxes,\n\t\t\tguides\n\t\t});\n\t}\n\n\tresizeEndHandler(e, data) {\n\t\tif (this.state.resizing) {\n\t\t\tlet newData = Object.assign({}, data);\n\t\t\tif (this.state.boxes?.[this.state.active]?.metadata && this.state.active?.indexOf(GROUP_BOX_PREFIX) < 0 && (this.state.activeCaptionGroupCaptions.length <= 0 && this.state.active !== 'box-ms')) {\n\t\t\t\tnewData.metadata = this.state.boxes[this.state.active].metadata;\n\t\t\t}\n\n\t\t\tif (data.type && data.type === 'group') {\n\t\t\t\tthis.startingPositions = {};\n\t\t\t\tif (this.state.active?.indexOf(GROUP_BOX_PREFIX) >= 0 || (this.state.activeCaptionGroupCaptions.length > 0 && this.state.active === 'box-ms')) {\n\t\t\t\t\tnewData.selections = this.state.activeCaptionGroupCaptions.map(box => {\n\t\t\t\t\t\tthis.startingPositions[box] = Object.assign({}, this.state.boxes[box]);\n\t\t\t\t\t\treturn Object.assign({}, this.state.boxes[box]);\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tnewData.selections = this.state.activeBoxes.map(box => {\n\t\t\t\t\t\tthis.startingPositions[box] = Object.assign({}, this.state.boxes[box]);\n\t\t\t\t\t\treturn Object.assign({}, this.state.boxes[box]);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.startingPositions[this.state.active] = Object.assign({}, this.state.boxes[this.state.active]);\n\t\t\t}\n\n\t\t\tthis.props.onResizeEnd && this.props.onResizeEnd(e, newData);\n\t\t}\n\n\t\tthis.setState({\n\t\t\tresizing: false,\n\t\t\tguidesActive: false,\n\t\t\tactiveCaptionGroupCaptions: [],\n\t\t\tactiveBoxes: [],\n\t\t\tactive: '',\n\t\t});\n\t}\n\n\trotateStartHandler(e, data) {\n\t\tthis.setState({\n\t\t\tactive: data.node.id,\n\t\t\trotating: true\n\t\t});\n\t\tthis.didRotateHappen = true;\n\t\tthis.props.onRotateStart && this.props.onRotateStart(e, data);\n\t}\n\n\trotateHandler(e, data) {\n\t\tconst boxes = Object.assign({}, this.state.boxes, {\n\t\t\t[this.state.active]: Object.assign({}, this.state.boxes[this.state.active], {\n\t\t\t\t...this.state.boxes[this.state.active],\n\t\t\t\tx: data.x,\n\t\t\t\ty: data.y,\n\t\t\t\trotateAngle: data.rotateAngle\n\t\t\t})\n\t\t});\n\n\t\tthis.setState({\n\t\t\tboxes\n\t\t});\n\n\t\tthis.props.onRotate && this.props.onRotate(e, data);\n\t}\n\n\trotateEndHandler(e, data) {\n\t\tlet newData = Object.assign({}, data);\n\t\tif (this.state.boxes?.[this.state.active]?.metadata) {\n\t\t\tnewData.metadata = this.state.boxes[this.state.active].metadata;\n\t\t}\n\t\tthis.startingPositions = {};\n\t\tthis.startingPositions[this.state.active] = this.state.boxes[this.state.active];\n\t\tthis.props.onRotateEnd && this.props.onRotateEnd(e, newData);\n\t}\n\n\tkeyUpHandler(e, data) {\n\t\tif (data.isLayerLocked) {\n\t\t\treturn;\n\t\t}\n\t\tlet newData = Object.assign({}, data);\n\t\tif (this.state.boxes?.[data.node.id]?.metadata && data.node?.id?.indexOf(GROUP_BOX_PREFIX) < 0) {\n\t\t\tnewData.metadata = this.state.boxes[data.node.id].metadata;\n\t\t}\n\n\t\t// for caption groups\n\t\tif(data.node?.id?.indexOf(GROUP_BOX_PREFIX) >= 0) {\n\t\t\tdelete newData.metadata\n\t\t}\n\n\t\tlet boxes = null;\n\t\tlet guides = null;\n\t\tif (data.type && data.type === 'group') {\n\t\t\tboxes = {};\n\t\t\tfor (let box in this.state.boxes) {\n\t\t\t\tif (this.state.boxes.hasOwnProperty(box)) {\n\t\t\t\t\tif (this.state.activeBoxes.includes(box) || (this.state.activeCaptionGroupCaptions.includes(box) && (this.state.active?.indexOf(GROUP_BOX_PREFIX) >= 0 || this.state.activeBoxes?.filter(box => box?.indexOf(GROUP_BOX_PREFIX) >= 0).length > 0))) {\n\t\t\t\t\t\tboxes[box] = Object.assign({}, this.state.boxes[box], {\n\t\t\t\t\t\t\tx: this.state.boxes[box].x + (data.changedValues.x || 0),\n\t\t\t\t\t\t\ty: this.state.boxes[box].y + (data.changedValues.y || 0),\n\t\t\t\t\t\t\tleft: this.state.boxes[box].left + (data.changedValues.left || 0),\n\t\t\t\t\t\t\ttop: this.state.boxes[box].top + (data.changedValues.top || 0),\n\t\t\t\t\t\t\theight: this.state.boxes[box].height + (data.changedValues.height || 0),\n\t\t\t\t\t\t\twidth: this.state.boxes[box].width + (data.changedValues.width || 0),\n\t\t\t\t\t\t\tdeltaX: this.state.boxes[box].x + (data.changedValues.x || 0) - (this.startingPositions?.[box]?.x || 0),\n\t\t\t\t\t\t\tdeltaY: this.state.boxes[box].y + (data.changedValues.y || 0) - (this.startingPositions?.[box]?.y || 0),\n\t\t\t\t\t\t\tdeltaW: this.state.boxes[box].width + (data.changedValues.width || 0) - (this.startingPositions?.[box]?.width || 0),\n\t\t\t\t\t\t\tdeltaH: this.state.boxes[box].height + (data.changedValues.height || 0) - (this.startingPositions?.[box]?.height || 0),\n\t\t\t\t\t\t});\n\t\t\t\t\t}  else if (box === 'box-ms' || box?.indexOf(GROUP_BOX_PREFIX) >= 0) {\n\t\t\t\t\t\tboxes[box] = Object.assign({}, data);\n\t\t\t\t\t\tdelete boxes[box].deltaX;\n\t\t\t\t\t\tdelete boxes[box].deltaY;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tboxes[box] = this.state.boxes[box];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tguides = Object.keys(this.state.guides).map(guide => {\n\t\t\t\tif (this.state.activeBoxes.includes(guide) || this.state.activeCaptionGroupCaptions.includes(guide)) {\n\t\t\t\t\treturn Object.assign({}, this.state.guides[guide], {\n\t\t\t\t\t\tx: calculateGuidePositions(boxes[guide], 'x'),\n\t\t\t\t\t\ty: calculateGuidePositions(boxes[guide], 'y')\n\t\t\t\t\t})\n\t\t\t\t}\n\n\t\t\t\treturn this.state.guides[guide];\n\t\t\t});\n\t\t} else {\n\t\t\tnewData = Object.assign({}, newData, {\n\t\t\t\tdeltaX: data.x - (this.startingPositions?.[data.node.id]?.x || 0),\n\t\t\t\tdeltaY: data.y - (this.startingPositions?.[data.node.id]?.y || 0),\n\t\t\t\tdeltaW: data.width - (this.startingPositions?.[data.node.id]?.width || 0),\n\t\t\t\tdeltaH: data.height - (this.startingPositions?.[data.node.id]?.height || 0),\n\t\t\t});\n\t\t\tboxes = Object.assign({}, this.state.boxes, {\n\t\t\t\t[data.node.id]: Object.assign({}, this.state.boxes[data.node.id], {\n\t\t\t\t\tx: data.x,\n\t\t\t\t\ty: data.y,\n\t\t\t\t\tleft: data.left,\n\t\t\t\t\ttop: data.top,\n\t\t\t\t\twidth: data.width,\n\t\t\t\t\theight: data.height,\n\t\t\t\t\tdeltaX: data.x - (this.startingPositions?.[data.node.id]?.x || 0),\n\t\t\t\t\tdeltaY: data.y - (this.startingPositions?.[data.node.id]?.y || 0),\n\t\t\t\t\tdeltaW: data.width - (this.startingPositions?.[data.node.id]?.width || 0),\n\t\t\t\t\tdeltaH: data.height - (this.startingPositions?.[data.node.id]?.height || 0),\n\t\t\t\t})\n\t\t\t});\n\n\t\t\tguides = Object.assign({}, this.state.guides, {\n\t\t\t\t[data.node.id]: Object.assign({}, this.state.guides[data.node.id], {\n\t\t\t\t\tx: calculateGuidePositions(boxes[data.node.id], 'x'),\n\t\t\t\t\ty: calculateGuidePositions(boxes[data.node.id], 'y')\n\t\t\t\t})\n\t\t\t});\n\t\t}\n\n\t\tthis.setState({\n\t\t\tboxes,\n\t\t\tguides,\n\t\t\tguidesActive: false\n\t\t}, () => {\n\t\t\tif (data.type && data.type === 'group') {\n\t\t\t\tif (this.state.active?.indexOf(GROUP_BOX_PREFIX) >= 0) {\n\t\t\t\t\tnewData.selections = this.state.activeCaptionGroupCaptions.map(box => {\n\t\t\t\t\t\treturn Object.assign({}, this.state.boxes[box]);\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tnewData.selections = this.state.activeBoxes.map(box => {\n\t\t\t\t\t\tif (box?.indexOf(GROUP_BOX_PREFIX) >= 0) {\n\t\t\t\t\t\t\treturn Object.assign({}, this.state.boxes[box], {\n\t\t\t\t\t\t\t\tselections: this.state.activeCaptionGroupCaptions.map(innerBox => {\n\t\t\t\t\t\t\t\t\treturn Object.assign({}, this.state.boxes[innerBox]);\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn Object.assign({}, this.state.boxes[box]);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.props.onKeyUp && this.props.onKeyUp(e, newData);\n\t\t});\n\t}\n\n\tkeyEndHandler(e, data) {\n\t\tlet newData = Object.assign({}, data, {\n\t\t\tdeltaX: data.x - (this.startingPositions?.[data.node.id]?.x || 0),\n\t\t\tdeltaY: data.y - (this.startingPositions?.[data.node.id]?.y || 0),\n\t\t});\n\t\tif (this.state.boxes?.[this.state.active]?.metadata) {\n\t\t\tnewData.metadata = this.state.boxes[this.state.active].metadata;\n\t\t}\n\n\t\tif (this.state.active?.indexOf(GROUP_BOX_PREFIX) >= 0 || this.state.activeBoxes?.filter(box => box?.indexOf(GROUP_BOX_PREFIX) >= 0).length > 0) {\n\t\t\tdelete newData.metadata;\n\t\t}\n\n\t\tif (data.type && data.type === 'group') {\n\t\t\tthis.startingPositions = {};\n\t\t\tif (this.state.active?.indexOf(GROUP_BOX_PREFIX) >= 0) {\n\t\t\t\tnewData.selections = this.state.activeCaptionGroupCaptions.map(box => {\n\t\t\t\t\tthis.startingPositions[box] = Object.assign({}, this.state.boxes[box]);\n\t\t\t\t\treturn Object.assign({}, this.state.boxes[box]);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tnewData.selections = this.state.activeBoxes.map(box => {\n\t\t\t\t\tthis.startingPositions[box] = Object.assign({}, this.state.boxes[box]);\n\t\t\t\t\tif (box?.indexOf(GROUP_BOX_PREFIX) >= 0) {\n\t\t\t\t\t\treturn Object.assign({}, this.state.boxes[box], {\n\t\t\t\t\t\t\tselections: this.state.activeCaptionGroupCaptions.map(innerBox => {\n\t\t\t\t\t\t\t\tthis.startingPositions[innerBox] = Object.assign({}, this.state.boxes[innerBox]);\n\t\t\t\t\t\t\t\treturn Object.assign({}, this.state.boxes[innerBox]);\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t\treturn Object.assign({}, this.state.boxes[box]);\n\t\t\t\t});\n\t\t\t}\n\t\t} else {\n\t\t\tthis.startingPositions = {};\n\t\t\tthis.startingPositions[this.state.active] = this.state.boxes[this.state.active];\n\t\t}\n\n\t\tthis.props.onKeyEnd && this.props.onKeyEnd(e, newData);\n\t\t\n\t\tthis.setState({\n\t\t\tresizing: false,\n\t\t\tdragging: false,\n\t\t\tguidesActive: false\n\t\t});\n\t}\n\n\t// drag select handler\n\tmouseDragHandler() {\n\t\tlet self = this;\n\t\tlet el = document.createElement('div');\n\t\tthis.didDragHappen = false;\n\t\tdocument.addEventListener('mouseup', function(e) {\n\t\t\tmousedown = false;\n\t\t\tlast_mousex = false;\n\t\t\tlast_mousey = false;\n\t\t\tel.style.left = 0;\n\t\t\tel.style.top = 0;\n\t\t\tel.style.width = 0;\n\t\t\tel.style.height= 0;\n\t\t\tself.isDragHappening = false;\n\t\t});\n\t\tdocument.addEventListener('mousedown', function(e) {\n\t\t\tif(self.getBoundingBoxElement() && self.getBoundingBoxElement().current) {\n\t\t\t\tlast_mousex = e.x;\n\t\t\t\tlast_mousey = e.y;\n\t\t\t\tmousedown = true;\n\t\t\t\tel.classList.add('rectangle');\n\t\t\t\tself.didDragHappen = false;\n\t\t\t\tself.isDragHappening = true;\n\t\t\t\t// if the starting point is on top of existing boxes, don't allow drag selection\n\t\t\t\tself.allowDragSelection = false;\n\t\t\t\t// remove offset position for correct calculations.\n\t\t\t\tconst boundingBox = self.getBoundingBoxElement();\n\t\t\t\tconst boundingBoxPosition = boundingBox.current.getBoundingClientRect().toJSON();\n\t\t\t\tconst tempE = {\n\t\t\t\t\tx: e.x,\n\t\t\t\t\ty: e.y\n\t\t\t\t};\n\t\t\t\ttempE.x = e.x - boundingBoxPosition.x;\n\t\t\t\ttempE.y = e.y - boundingBoxPosition.y;\n\t\t\t\tif (self.state.activeBoxes && self.state.activeBoxes.length > 1) {\n\t\t\t\t\tself.allowDragSelection = false;\n\t\t\t\t} else {\n\t\t\t\t\tself.allowDragSelection = true;\n\t\t\t\t}\n\t\t\t\t// if drag is initiated outside box-ms box; allow dragSelection.\n\t\t\t\tif (self.state.boxes && self.state.boxes[self.state.active] && self.state.active?.indexOf(self.state.active) >= 0) { // Specific check for Active group box\n\t\t\t\t\tif (tempE.x >= self.state.boxes[self.state.active].x &&\n\t\t\t\t\t\ttempE.x <= self.state.boxes[self.state.active].x + self.state.boxes[self.state.active].width &&\n\t\t\t\t\t\ttempE.y >= self.state.boxes[self.state.active].y &&\n\t\t\t\t\t\ttempE.y <= self.state.boxes[self.state.active].y + self.state.boxes[self.state.active].height) {\n\t\t\t\t\t\tself.allowDragSelection = false;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tself.allowDragSelection = true;\n\t\t\t\t\t}\n\t\t\t\t} else if (self.state.boxes && self.state.boxes['box-ms']) {\n\t\t\t\t\tif (tempE.x >= self.state.boxes['box-ms'].x &&\n\t\t\t\t\t\ttempE.x <= self.state.boxes['box-ms'].x + self.state.boxes['box-ms'].width &&\n\t\t\t\t\t\ttempE.y >= self.state.boxes['box-ms'].y &&\n\t\t\t\t\t\ttempE.y <= self.state.boxes['box-ms'].y + self.state.boxes['box-ms'].height) {\n\t\t\t\t\t\tself.allowDragSelection = false;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tself.allowDragSelection = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// If drag starts on existing boxes, don't register them.\n\t\t\t\tfor (let box in self.state.boxes) {\n\t\t\t\t\tif ( self.state.boxes[box] && !self.state.boxes[box].isLayerLocked && tempE.x >= self.state.boxes[box].x &&\n\t\t\t\t\t\ttempE.x <= self.state.boxes[box].x + self.state.boxes[box].width &&\n\t\t\t\t\t\ttempE.y >= self.state.boxes[box].y &&\n\t\t\t\t\t\ttempE.y <= self.state.boxes[box].y + self.state.boxes[box].height) {\n\t\t\t\t\t\tself.allowDragSelection = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tdocument.getElementsByTagName('body')[0].appendChild(el);\n\t\t\t\t//add style to rectangle\n\t\t\t\tel.style.border = '1px solid #18a0fb';\n\t\t\t\tel.style.backgroundColor = 'rgba(24, 160, 251, 0.2)';\n\t\t\t\tel.style.position = 'absolute';\n\t\t\t\tel.style.zIndex = 111;\n\t\t\t\tdocument.onmousemove=function(event) {\n\t\t\t\t\tif (e.target.classList.contains('r-preview-bg-wrapper') || e.target.id === 'r-preview-background' || e.target.classList.contains('bounding-box-wrapper') || e.target.classList.contains('videoPreviewClass') || e.target.classList.contains('safeArealines')) {\n\t\t\t\t\t\tif (mousedown && self.allowDragSelection) {\n\t\t\t\t\t\t\tself.didDragHappen = true;\n\t\t\t\t\t\t\tself.createRectByDrag(event, el);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\tcreateRectByDrag(e, el) {\n\t\tposX = e.x;\n\t\tposY = e.y;\n\t\tel.style.left = last_mousex;\n\t\tel.style.top = last_mousey;\n\t\tel.style.width = Math.abs(posX - last_mousex);\n\t\tel.style.height= Math.abs(posY - last_mousey);\n\t\tif (last_mousex) {\n\t\t\tel.style.width = Math.abs(posX-last_mousex)+'px'\n\t\t\tel.style.height = Math.abs(posY-last_mousey)+'px';\n\t\t\tel.style.left = posX-last_mousex<0?posX+'px':last_mousex+'px';\n\t\t\tel.style.top = posY-last_mousey<0?posY+'px':last_mousey+'px';\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t\tthis.boxSelectByDrag(el);\n\t}\n\tboxSelectByDrag(el) {\n\t\tlet rect2 = el && el.getBoundingClientRect();\n\t\tconst boundingBox = this.getBoundingBoxElement();\n\t\tconst boundingBoxPosition = boundingBox.current.getBoundingClientRect().toJSON();\n\t\trect2.x = rect2.x - boundingBoxPosition.x;\n\t\trect2.y = rect2.y - boundingBoxPosition.y;\n\t\tthis.props.boxes.forEach((rect1, index) => {\n\t\t\tconst box = document.getElementById('box' + index);\n\t\t\tif (rect1.x < rect2.x + rect2.width &&\n\t\t\t\trect1.x + rect1.width > rect2.x &&\n\t\t\t\trect1.y < rect2.y + rect2.height &&\n\t\t\t\trect1.y + rect1.height > rect2.y) {\n\t\t\t\tif (!rect1.isLayerLocked) {\n\t\t\t\t\tif (this.state.activeBoxes.includes('box' + index)) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tthis.selectBox({\n\t\t\t\t\t\ttarget : box,\n\t\t\t\t\t\tshiftKey: true,\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t} else {\n\t\t\t\tif (this.state.activeBoxes.includes('box' + index)) {\n\t\t\t\t\tthis.selectBox({\n\t\t\t\t\t\ttarget: box,\n\t\t\t\t\t\tshiftKey: true,\n\t\t\t\t\t\tunselect: true\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t}\n\t// drag select handler\n\trender() {\n\t\tconst { active, boxes, activeBoxes, guides } = this.state;\n\t\tconst areMultipleBoxesSelected = activeBoxes.length > 1 ||  (activeBoxes.length === 1 && activeBoxes[0].includes('box-ms-'));\n\n\t\tconst reorderedBoxes = this.getReorderedBoxes(boxes, this.state.captionGroupsToIndexMap);\n\n\t\t// Create the draggable boxes from the position data\n\t\tconst draggableBoxes = reorderedBoxes.map(box => {\n\t\t\tconst position = box;\n\t\t\tconst id = box.id;\n\t\t\tconst identifier = box.identifier;  // option index for caption\n\t\t\tconst isLayerLocked = box.isLayerLocked; \n\t\t\tconst isSelected = (active === id || activeBoxes.includes(id));\n\t\t\tconst url = box?.metadata?.url;\n\t\t\tconst zoomScale = box?.metadata?.zoomScale || 1;\n\t\t\tconst objectPosition = box?.metadata?.objectPosition || {};\n\t\t\tconst imageShape = box?.metadata?.imageShape || 'fitImage';\n\t\t\treturn <Box\n\t\t\t\t{...this.props}\n\t\t\t\tareMultipleBoxesSelected={areMultipleBoxesSelected}\n\t\t\t\tboundingBox={this.state.boundingBox}\n\t\t\t\tdidDragOrResizeHappen={this.didDragOrResizeHappen}\n\t\t\t\tdragging={this.state.dragging}\n\t\t\t\tgetBoundingBoxElement={this.getBoundingBoxElement}\n\t\t\t\tid={id}\n\t\t\t\tidentifier={identifier}\n\t\t\t\tisSelected={isSelected}\n\t\t\t\tisShiftKeyActive={this.state.isShiftKeyActive}\n\t\t\t\tkey={id}\n\t\t\t\tonDragStart={this.dragStartHandler}\n\t\t\t\tonDrag={this.dragHandler}\n\t\t\t\tonDragEnd={this.dragEndHandler}\n\t\t\t\tonKeyUp={this.keyUpHandler}\n\t\t\t\tonKeyEnd={this.keyEndHandler}\n\t\t\t\tonResizeStart={this.resizeStartHandler}\n\t\t\t\tonResize={this.resizeHandler}\n\t\t\t\tonResizeEnd={this.resizeEndHandler}\n\t\t\t\tonRotateStart={this.rotateStartHandler}\n\t\t\t\tonRotate={this.rotateHandler}\n\t\t\t\tonRotateEnd={this.rotateEndHandler}\n\t\t\t\tposition={position}\n\t\t\t\tresizing={this.state.resizing}\n\t\t\t\trotating={this.state.rotating}\n\t\t\t\tselectBox={this.selectBox}\n\t\t\t\tsetDragOrResizeState={this.setDragOrResizeState}\n\t\t\t\tisLayerLocked={isLayerLocked}\n\t\t\t\tpreventShortcutEvents={this.state.preventShortcutEvents}\n\t\t\t\tsetPreventShortcutEvents={this.setPreventShortcutEvents}\n\t\t\t\ttoggleHover={this.props.toggleHover}\n\t\t\t\toverRideStyles={this.props.overrideHover}\n\t\t\t\tdragToggleHoverBgStyle={this.props.dragToggleHoverBgStyle}\n\t\t\t\toverRideSelected = {this.props.overrideSelected}\n\t\t\t\turl={url}\n\t\t\t\tzoomScale={zoomScale}\n\t\t\t\tobjectPosition={objectPosition}\n\t\t\t\trenderedResolution={this.props.renderedResolution}\n\t\t\t\tcropActiveForElement={this.props.cropActiveForElement}\n\t\t\t\timageShape={imageShape}\n\t\t\t\tmetadata={box?.metadata}\n\t\t\t\tupdateBoxAfterCrop={this.updateBoxAfterCrop}\n\t\t\t/>;\n\t\t});\n\n\t\t// Create a guide(s) when the following conditions are met:\n\t\t// 1. A box aligns with another (top, center or bottom)\n\t\t// 2. An edge of a box touches any of the edges of another box\n\t\t// 3. A box aligns vertically or horizontally with the bounding box\n\t\t// TODO: Use a functional component to generate the guides for both axis instead of duplicating code.\n\t\tlet xAxisGuides = null;\n\t\tlet yAxisGuides = null;\n\t\tif (guides) {\n\t\t\txAxisGuides = Object.keys(guides).reduce((result, box) => {\n\t\t\t\tconst guideClassNames = this.state.guidesActive ? `${styles.guide} ${styles.xAxis} ${styles.active}` : `${styles.guide} ${styles.xAxis}`;\n\t\t\t\tlet xAxisGuidesForCurrentBox = null;\n\t\t\t\tif (guides[box] && guides[box].x) {\n\t\t\t\t\txAxisGuidesForCurrentBox = guides[box].x.map((position, index) => {\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tthis.state.active &&\n\t\t\t\t\t\t\tthis.state.active === box &&\n\t\t\t\t\t\t\tthis.state.match &&\n\t\t\t\t\t\t\tthis.state.match.x &&\n\t\t\t\t\t\t\tthis.state.match.x.intersection &&\n\t\t\t\t\t\t\tthis.state.match.x.intersection === position\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\treturn <div key={`${position}-${index}`} className={guideClassNames} style={{ left: position }} />;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\treturn result.concat(xAxisGuidesForCurrentBox);\n\t\t\t}, []);\n\n\t\t\tyAxisGuides = Object.keys(guides).reduce((result, box) => {\n\t\t\t\tconst guideClassNames = this.state.guidesActive ? `${styles.guide} ${styles.yAxis} ${styles.active}` : `${styles.guide} ${styles.yAxis}`;\n\t\t\t\tlet yAxisGuidesForCurrentBox = null;\n\t\t\t\tif (guides[box] && guides[box].y) {\n\t\t\t\t\tyAxisGuidesForCurrentBox = guides[box].y.map((position, index) => {\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tthis.state.active &&\n\t\t\t\t\t\t\tthis.state.active === box &&\n\t\t\t\t\t\t\tthis.state.match &&\n\t\t\t\t\t\t\tthis.state.match.y &&\n\t\t\t\t\t\t\tthis.state.match.y.intersection &&\n\t\t\t\t\t\t\tthis.state.match.y.intersection === position\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\treturn <div key={`${position}-${index}`} className={guideClassNames} style={{ top: position }} />\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\treturn result.concat(yAxisGuidesForCurrentBox);\n\t\t\t}, []);\n\t\t}\n\n\t\treturn <div id={this.props.id} ref={this.boundingBox} className={`${styles.boundingBox} ${this.props.className} bounding-box-wrapper`} style={this.props.style}\n\t\t\tonDrop={\n\t\t\t\te => {\n\t\t\t\t\tthis.unSelectBox(e);\n\t\t\t\t}\n\t\t\t}\n\t\t>\n\t\t\t{draggableBoxes}\n\t\t\t{xAxisGuides}\n\t\t\t{yAxisGuides}\n\t\t</div>;\n\t}\n}\n\n\n// Typechecking props for AlignmentGuides component\nAlignmentGuides.propTypes = {\n\tboundToParent: PropTypes.bool,\n\tboxes: PropTypes.array.isRequired,\n\tboxStyle: PropTypes.object,\n\tclassName: PropTypes.string,\n\tdrag: PropTypes.bool,\n\tkeybindings: PropTypes.bool,\n\tonDragStart: PropTypes.func,\n\tonDrag: PropTypes.func,\n\tonDragEnd: PropTypes.func,\n\tonKeyUp: PropTypes.func,\n\tonKeyEnd: PropTypes.func,\n\tonResizeStart: PropTypes.func,\n\tonResize: PropTypes.func,\n\tonResizeEnd: PropTypes.func,\n\tonRotateStart: PropTypes.func,\n\tonRotate: PropTypes.func,\n\tonRotateEnd: PropTypes.func,\n\tonSelect: PropTypes.func,\n\tonUnselect: PropTypes.func,\n\tonSecondaryClick: PropTypes.func,\n\tresize: PropTypes.bool,\n\trotate: PropTypes.bool,\n\tresolution: PropTypes.object,\n\trenderedResolution: PropTypes.object,\n\tsnap: PropTypes.bool,\n\tstyle: PropTypes.object,\n};\n\n// Default values for props\nAlignmentGuides.defaultProps = {\n\tboundToParent: true,\n\tboxes: [],\n\tdrag: true,\n\tresize: true,\n\trotate: true,\n\tsnap: true\n};\n\nexport default AlignmentGuides;","'use strict';\n\n/*\n* React Alignment Guides v1.0.0-rc.3\n*/\n\n// import React from 'react';\n// import ReactDOM from 'react-dom';\nimport AlignmentGuides from './AlignmentGuides';\n\nexport default AlignmentGuides;\n\n// ReactDOM.render(\n// \t<AlignmentGuides />,\n// \tdocument.getElementById('root')\n// );"],"names":["global","calculateGuidePositions","dimensions","axis","start","left","middle","parseInt","width","end","top","height","proximityListener","active","allGuides","xAxisGuidesForActiveBox","x","yAxisGuidesForActiveBox","y","xAxisAllGuides","getAllGuidesForGivenAxisExceptActiveBox","yAxisAllGuides","xAxisMatchedGuides","checkValueProximities","yAxisMatchedGuides","allMatchedGuides","proximity","_objectSpread","activeBoxGuides","guidesForActiveBoxAlongGivenAxis","result","Object","keys","map","box","currentBoxGuidesAlongGivenAxis","filter","guides","undefined","activeBoxGuidesInOneAxis","allOtherGuidesInOneAxis","intersection","matchedArray","snapThreshold","index","length","index2","index3","diff","Math","abs","value","activeBoxIndex","matchedBoxIndex","calculateBoundariesForDrag","bounds","boundingBox","calculateBoundariesForResize","widthDifference","heightDifference","getOffsetCoordinates","node","offsetLeft","offsetTop","offsetWidth","offsetHeight","getLength","sqrt","topLeftToCenter","rotateAngle","cx","cy","centerToTopLeft","setWidthAndDeltaW","deltaW","minWidth","expectedWidth","setHeightAndDeltaH","deltaH","minHeight","expectedHeight","getNewStyle","type","rect","widthFlag","heightFlag","widthAndDeltaW","heightAndDeltaH","cos","sin","position","size","getAngle","x1","y1","x2","y2","dot","det","angle","atan2","PI","getNewCoordinates","tempX","tempY","cosine","sine","rotatedX","rotatedY","degToRadian","deg","getMultipleSelectionCoordinates","allBoxes","activeBoxes","selectedBoxes","hasOwnProperty","includes","push","reduce","min","b","max","getGroupCoordinates","groupedBoxes","metadata","captionIndex","getResizeSVGCursor","getResizeCursorCSS","handle","degree","cursor","checkGroupChildElementsLocked","captions","isLocked","forEach","caption","isLayerLocked","RESIZE_CORNERS","RESIZE_CORNERS_FOR_NO_HEIGHT","RESIZE_CORNERS_FOR_NO_WIDTH","RESIZE_SIDES","ROTATE_HANDLES","GROUP_BOX_PREFIX","DRAG_THRESHOLD","DEFAULT_SIZE","PREVENT_DEFAULT_KEYS","Box","props","_classCallCheck","React","createRef","coordinates","callSelectBox","didDragHappen","didResizeHappen","selectBox","bind","_assertThisInitialized","unHoverBox","hoverBox","onDragStart","shortcutHandler","onShortcutKeyUp","keyDownHandler","throttle","e","onResizeStart","onRotateStart","getCoordinatesWrapperWidth","handleDoubleClick","endCropMode","dragOverBox","unDragOverBox","onDropElementBox","filterControls","state","callKeyEnd","data","newBoxData","boxTranslateX","boxTranslateY","boxDeltaWidth","boxDeltaHeight","current","deltaX","deltaY","updateBoxAfterCrop","dragDisabled","cropDisabledCallback","onDoubleClickElement","identifier","currentTarget","hasAttribute","target","id","indexOf","focus","cropActiveForElement","classList","add","toggleHover","remove","dragToggleHoverBgStyle","onDragOver","Number","isInteger","drag","stopPropagation","getBoundingBoxElement","startingPosition","getBoundingClientRect","toJSON","boundingBoxPosition","assign","clientX","clientY","onDrag","didDragOrResizeHappen","setDragOrResizeState","boundingBoxDimensions","boxWidth","boxHeight","currentPosition","boundToParent","dragDisabledCallback","onDragEnd","document","removeEventListener","addEventListener","preventShortcutEvents","key","areMultipleBoxesSelected","isSelected","preventDefault","DELTA","shiftKey","ctrlKey","metaKey","isWidthZero","isHeightZero","newValues","changedValues","setState","movingSides","onKeyUp","keysAllowed","onKeyEnd","currentResizeHandle","resize","style","zIndex","startX","startY","startingDimensions","ratio","sign","getMovingSides","getAttribute","movingSidesObj","side","resizeAroundCenter","altKey","onResize","right","bottom","alpha","deltaL","beta","replace","tempPosition","onResizeEnd","rotate","center","startVector","startAngle","newCoordinates","onRotate","rotateVector","round","onRotateEnd","control","prevProps","boxStyle","isShiftKeyActive","resolution","isNaN","dashedCentreNodes","xFactor","yFactor","isCropModeActive","boxClassNames","styles","hideBorders","overRideSelected","selected","overRideStyles","groupElement","boxStyles","transform","pointerEvents","display","justifyContent","alignItems","setPreventShortcutEvents","zeroDimensionBoxSelected","zeroDimensionBox","dimensions_style","visibleHandle","additionalStyles","className","resizeCorners","rotateHandle","Component","propTypes","PropTypes","bool","func","string","keybindings","object","isRequired","mousedown","last_mousex","last_mousey","posX","posY","AlignmentGuides","boxes","dragging","guidesActive","match","resizing","rotating","activeBoxSnappedPosition","activeCaptionGroupCaptions","captionGroupsToIndexMap","setShiftKeyState","unSelectBox","dragStartHandler","dragHandler","dragEndHandler","resizeStartHandler","resizeHandler","resizeEndHandler","rotateStartHandler","rotateHandler","rotateEndHandler","keyUpHandler","keyEndHandler","startingPositions","didRotateHappen","mouseDragHandler","boxSelectByDrag","createRectByDrag","addGuidelinesForSnapping","getReorderedBoxes","url","img","Image","src","selections","groups","groupArray","selectedIndexes","allElementsInsideGroupAreSelected","val","splice","window","isStylingPanelEnabled","prevState","activeBoxWithoutLock","activeBox","JSON","stringify","fromEntries","entries","startsWith","groupedCaptions","userXGuides","userYGuides","selectionBoxesWithHigherIndex","reversedKeys","reverse","group","i","reorderedBoxes","userXGuidesPos","guideId","userYGuidesPos","userGuides","sort","onDragOrResize","onCropEnd","boxDimensions","unselect","isDragHappening","allCaptionsForMultipleSelections","selection","currentBox","find","tempActiveBoxes","select","onSecondaryClick","onSelect","parentNode","isEscUnselectActive","isDragging","keyCode","Array","isArray","preventDeselectionKeyCodes","isValidUnselect","onUnselect","newData","boxKey","currentBoxKey","hoverGroupedData","guide","snap","newActiveBoxLeft","newActiveBoxTop","activeBoxProximityIndex","matchedBoxProximityIndex","newBoxes","widthDiff","heightDiff","initialDeltaXPercentage","xDiff","initialDeltaYPercentage","yDiff","innerBox","self","el","createElement","allowDragSelection","tempE","getElementsByTagName","appendChild","border","backgroundColor","onmousemove","event","contains","rect2","rect1","getElementById","draggableBoxes","zoomScale","objectPosition","imageShape","overrideHover","overrideSelected","renderedResolution","xAxisGuides","yAxisGuides","guideClassNames","xAxis","xAxisGuidesForCurrentBox","concat","yAxis","yAxisGuidesForCurrentBox","array","defaultProps"],"mappings":"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"}